(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function l(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=l(n);fetch(n.href,r)}})();function rt(){}function Ul(e,t){for(const l in t)e[l]=t[l];return e}function vl(e){return e()}function Ut(){return Object.create(null)}function Ze(e){e.forEach(vl)}function Vl(e){return typeof e=="function"}function At(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Jl(e){return Object.keys(e).length===0}function Kl(e,t,l,o){if(e){const n=zl(e,t,l,o);return e[0](n)}}function zl(e,t,l,o){return e[1]&&o?Ul(l.ctx.slice(),e[1](o(t))):l.ctx}function Yl(e,t,l,o){if(e[2]&&o){const n=e[2](o(l));if(t.dirty===void 0)return n;if(typeof n=="object"){const r=[],a=Math.max(t.dirty.length,n.length);for(let d=0;d<a;d+=1)r[d]=t.dirty[d]|n[d];return r}return t.dirty|n}return t.dirty}function Ql(e,t,l,o,n,r){if(n){const a=zl(t,l,o,r);e.p(a,n)}}function Xl(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let o=0;o<l;o++)t[o]=-1;return t}return-1}function Vt(e){return e==null?"":e}function s(e,t){e.appendChild(t)}function H(e,t,l){e.insertBefore(t,l||null)}function A(e){e.parentNode.removeChild(e)}function _t(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function g(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function b(){return T(" ")}function yl(){return T("")}function G(e,t,l,o){return e.addEventListener(t,l,o),()=>e.removeEventListener(t,l,o)}function c(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function He(e){return e===""?null:+e}function Zl(e){return Array.from(e.childNodes)}function pe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function fe(e,t){e.value=t==null?"":t}function he(e,t,l,o){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,o?"important":"")}let Dt;function $l(){if(Dt===void 0){Dt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Dt=!0}}return Dt}function xl(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const o=g("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const n=$l();let r;return n?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=G(window,"message",a=>{a.source===o.contentWindow&&t()})):(o.src="about:blank",o.onload=()=>{r=G(o.contentWindow,"resize",t)}),s(e,o),()=>{(n||r&&o.contentWindow)&&r(),A(o)}}function S(e,t,l){e.classList[l?"add":"remove"](t)}let bt;function mt(e){bt=e}function Cl(){if(!bt)throw new Error("Function called outside component initialization");return bt}function en(e){Cl().$$.on_mount.push(e)}function tn(e){Cl().$$.after_update.push(e)}function Pl(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(o=>o.call(this,t))}const pt=[],be=[],Gt=[],Ft=[],Rl=Promise.resolve();let Nt=!1;function Dl(){Nt||(Nt=!0,Rl.then(Il))}function ot(){return Dl(),Rl}function Et(e){Gt.push(e)}function nt(e){Ft.push(e)}const Tt=new Set;let It=0;function Il(){const e=bt;do{for(;It<pt.length;){const t=pt[It];It++,mt(t),ln(t.$$)}for(mt(null),pt.length=0,It=0;be.length;)be.pop()();for(let t=0;t<Gt.length;t+=1){const l=Gt[t];Tt.has(l)||(Tt.add(l),l())}Gt.length=0}while(pt.length);for(;Ft.length;)Ft.pop()();Nt=!1,Tt.clear(),mt(e)}function ln(e){if(e.fragment!==null){e.update(),Ze(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Et)}}const Bt=new Set;let ct;function tt(){ct={r:0,c:[],p:ct}}function lt(){ct.r||Ze(ct.c),ct=ct.p}function L(e,t){e&&e.i&&(Bt.delete(e),e.i(t))}function Y(e,t,l,o){if(e&&e.o){if(Bt.has(e))return;Bt.add(e),ct.c.push(()=>{Bt.delete(e),o&&(l&&e.d(1),o())}),e.o(t)}else o&&o()}function it(e,t,l){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=l,l(e.$$.ctx[o]))}function je(e){e&&e.c()}function Oe(e,t,l,o){const{fragment:n,on_mount:r,on_destroy:a,after_update:d}=e.$$;n&&n.m(t,l),o||Et(()=>{const f=r.map(vl).filter(Vl);a?a.push(...f):Ze(f),e.$$.on_mount=[]}),d.forEach(Et)}function Ae(e,t){const l=e.$$;l.fragment!==null&&(Ze(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function nn(e,t){e.$$.dirty[0]===-1&&(pt.push(e),Dl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qt(e,t,l,o,n,r,a,d=[-1]){const f=bt;mt(e);const i=e.$$={fragment:null,ctx:null,props:r,update:rt,not_equal:n,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Ut(),dirty:d,skip_bound:!1,root:t.target||f.$$.root};a&&a(i.root);let u=!1;if(i.ctx=l?l(e,t.props||{},(p,z,...k)=>{const m=k.length?k[0]:z;return i.ctx&&n(i.ctx[p],i.ctx[p]=m)&&(!i.skip_bound&&i.bound[p]&&i.bound[p](m),u&&nn(e,p)),z}):[],i.update(),u=!0,Ze(i.before_update),i.fragment=o?o(i.ctx):!1,t.target){if(t.hydrate){const p=Zl(t.target);i.fragment&&i.fragment.l(p),p.forEach(A)}else i.fragment&&i.fragment.c();t.intro&&L(e.$$.fragment),Oe(e,t.target,t.anchor,t.customElement),Il()}mt(f)}class Wt{$destroy(){Ae(this,1),this.$destroy=rt}$on(t,l){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(l),()=>{const n=o.indexOf(l);n!==-1&&o.splice(n,1)}}$set(t){this.$$set&&!Jl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function on(e){let t;return{c(){t=g("input"),c(t,"type","radio"),t.checked=e[0]},m(l,o){H(l,t,o)},p(l,o){o&1&&(t.checked=l[0])},d(l){l&&A(t)}}}function rn(e){let t;return{c(){t=g("input"),c(t,"type","checkbox"),t.checked=e[0]},m(l,o){H(l,t,o)},p(l,o){o&1&&(t.checked=l[0])},d(l){l&&A(t)}}}function sn(e){let t,l,o,n,r,a,d,f,i;const u=e[7].default,p=Kl(u,e,e[6],null);function z(w,y){if(w[3]=="checkbox")return rn;if(w[3]=="radio")return on}let k=z(e),m=k&&k(e);return{c(){t=g("div"),p&&p.c(),l=b(),m&&m.c(),o=b(),n=T(e[1]),c(t,"class",r="p-2 "+(e[0]?e[2]:"")+" rounded-lg border-solid border-[1px] svelte-1t1l2hh"),c(t,"style",a=e[4]?`background-color: ${e[4]}`:"")},m(w,y){H(w,t,y),p&&p.m(t,null),s(t,l),m&&m.m(t,null),s(t,o),s(t,n),d=!0,f||(i=[G(t,"click",e[5]),G(t,"click",e[8])],f=!0)},p(w,[y]){p&&p.p&&(!d||y&64)&&Ql(p,u,w,w[6],d?Yl(u,w[6],y,null):Xl(w[6]),null),k===(k=z(w))&&m?m.p(w,y):(m&&m.d(1),m=k&&k(w),m&&(m.c(),m.m(t,o))),(!d||y&2)&&pe(n,w[1]),(!d||y&5&&r!==(r="p-2 "+(w[0]?w[2]:"")+" rounded-lg border-solid border-[1px] svelte-1t1l2hh"))&&c(t,"class",r),(!d||y&16&&a!==(a=w[4]?`background-color: ${w[4]}`:""))&&c(t,"style",a)},i(w){d||(L(p,w),d=!0)},o(w){Y(p,w),d=!1},d(w){w&&A(t),p&&p.d(w),m&&m.d(),f=!1,Ze(i)}}}function an(e,t,l){let{$$slots:o={},$$scope:n}=t,{checked:r=!1}=t,{text:a="O"}=t,{toggleClass:d="bg-gray-200"}=t,{type:f="checkbox"}=t,{bgcolor:i=""}=t,u=()=>{l(0,r=!r)};function p(z){Pl.call(this,e,z)}return e.$$set=z=>{"checked"in z&&l(0,r=z.checked),"text"in z&&l(1,a=z.text),"toggleClass"in z&&l(2,d=z.toggleClass),"type"in z&&l(3,f=z.type),"bgcolor"in z&&l(4,i=z.bgcolor),"$$scope"in z&&l(6,n=z.$$scope)},[r,a,d,f,i,u,n,o,p]}class Ke extends Wt{constructor(t){super(),qt(this,t,an,sn,At,{checked:0,text:1,toggleClass:2,type:3,bgcolor:4})}}function Jt(e,t,l){const o=e.slice();return o[3]=t[l],o}function Kt(e){let t;return{c(){t=g("div"),he(t,"background-color",e[3].color),c(t,"class","grow h-4")},m(l,o){H(l,t,o)},p(l,o){o&2&&he(t,"background-color",l[3].color)},d(l){l&&A(t)}}}function cn(e){let t,l,o,n,r=e[1],a=[];for(let d=0;d<r.length;d+=1)a[d]=Kt(Jt(e,r,d));return{c(){t=g("button"),l=g("div");for(let d=0;d<a.length;d+=1)a[d].c();c(l,"class","flex border-[1px] border-black w-12"),c(t,"class","p-2 rounded-lg border-solid border-2 text-center"),S(t,"bg-gray-400",e[0])},m(d,f){H(d,t,f),s(t,l);for(let i=0;i<a.length;i+=1)a[i].m(l,null);o||(n=G(t,"click",e[2]),o=!0)},p(d,[f]){if(f&2){r=d[1];let i;for(i=0;i<r.length;i+=1){const u=Jt(d,r,i);a[i]?a[i].p(u,f):(a[i]=Kt(u),a[i].c(),a[i].m(l,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=r.length}f&1&&S(t,"bg-gray-400",d[0])},i:rt,o:rt,d(d){d&&A(t),_t(a,d),o=!1,n()}}}function un(e,t,l){let{selected:o=""}=t,{colors:n}=t;function r(a){Pl.call(this,e,a)}return e.$$set=a=>{"selected"in a&&l(0,o=a.selected),"colors"in a&&l(1,n=a.colors)},[o,n,r]}class fn extends Wt{constructor(t){super(),qt(this,t,un,cn,At,{selected:0,colors:1})}}const Ot=(e,t)=>({r:e.r-t.r,g:e.g-t.g,b:e.b-t.b}),dn=(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}),gn=(e,t,l)=>Math.max(e,Math.min(t,l));let St={};const Gl=e=>{if(typeof e!="string")throw Error("wrong type in hexToRgb");if(St[e])return St[e];{if(e.length==4){let[r,a,d,f]=e.split("");e="#"+a+a+d+d+f+f}let t=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16),n={r:t,g:l,b:o};return St[e]=n,n}},Ht=(e,t,l)=>{let o=Ot(l?El(e):e,t),n=Math.abs(o.r),r=Math.abs(o.g),a=Math.abs(o.b);return n*n+a*a+r*r};let Lt={};const _n=(e,t,l)=>{let o;Lt[t]?o=Lt[t]:(o=t,Lt[t]=o);let n=o[0],r=null;return o.forEach((a,d)=>{let f=Gl(a),i=Ht(f,e,l);(r==null||r>i)&&(r=i,n=f)}),n},hn=(e,t,l)=>{let o=t[0],n=null;return t.forEach((r,a)=>{let d=Ht(r,e,l);(n==null||n>d)&&(n=d,o=r)}),o},Bl=e=>Math.floor((e.r+e.g+e.b)/3),Yt=e=>"#"+e.r.toString(16).padStart(2,"0")+e.g.toString(16).padStart(2,"0")+e.b.toString(16).padStart(2,"0"),El=e=>{let t=Bl(e);return{r:t,g:t,b:t}};function pn(e){let t=0;for(let l=0,o=e.length;l<o;l++){let n=e.charCodeAt(l);t=(t<<5)-t+n,t|=0}return t}const jt=(e,t,l)=>(t*l+e)*4;let mn=function(e,t,l,o){let n=e.width,r=jt(t,l,n);e.data[r]=o.r,e.data[r+1]=o.g,e.data[r+2]=o.b},bn=function(e,t,l){e.data[t]=l},kn=function(e,t,l){let o=e.width,n=jt(t,l,o);return{r:e.data[n],g:e.data[n+1],b:e.data[n+2]}};const wn=(e,t,l,o,n,r)=>{let a=t.getContext("2d"),f=e.getContext("2d").getImageData(0,0,n,r);a.putImageData(f,0,0)};function vn(e,t,l){for(var o=e.createImageData(t.width*l,t.height*l),n=0;n<t.height;n++)for(var r=0;r<t.width;r++)for(var a=[t.data[(n*t.width+r)*4+0],t.data[(n*t.width+r)*4+1],t.data[(n*t.width+r)*4+2],t.data[(n*t.width+r)*4+3]],d=0;d<l;d++)for(var f=n*l+d,i=0;i<l;i++)for(var u=r*l+i,p=0;p<4;p++)o.data[(f*o.width+u)*4+p]=a[p];return o}const zn=(e,t,l,o,n,r="#000000")=>{e.lineWidth=t,e.strokeStyle=r;for(let a=0;a<n+1;a++)e.beginPath(),e.moveTo(0,a*l),e.lineTo(o*l,a*l),e.stroke();for(let a=0;a<o+1;a++)e.beginPath(),e.moveTo(a*l,0),e.lineTo(a*l,n*l),e.stroke()},M={cloneSubset:wn,getPixelDataRGB:kn,setPixelDataRGB:mn,setPixelDataRaw:bn,calc_i:jt,hashCode:pn,Rgb2Gray:El,RgbGrayValue:Bl,RgbToHex:Yt,nearestPixel:_n,nearestPixel2:hn,clamp:gn,pixelAdd:dn,pixelDiff:Ot,hexToRgb:Gl,RgbToHex:Yt,calculatePixelDifference:Ht,drawGrid:zn,scaleImageData:vn};function Qt(e,t,l){const o=e.slice();return o[97]=t[l],o}function Xt(e,t,l){const o=e.slice();return o[100]=t[l],o[101]=t,o[102]=l,o}function Zt(e,t,l){const o=e.slice();return o[103]=t[l],o[104]=t,o[105]=l,o}function $t(e,t,l){const o=e.slice();return o[106]=t[l],o}function xt(e,t,l){const o=e.slice();return o[109]=t[l],o}function el(e){let t,l,o,n,r,a,d,f,i,u,p;function z(m){e[45](m)}let k={text:"Live"};return e[0].live_capture!==void 0&&(k.checked=e[0].live_capture),r=new Ke({props:k}),be.push(()=>it(r,"checked",z)),{c(){t=g("video"),l=b(),o=g("button"),o.innerHTML='<i class="fa fa-camera"></i>',n=b(),je(r.$$.fragment),d=b(),f=g("canvas"),he(t,"max-height","40px"),he(t,"border","1px solid black"),t.autoplay=!0,c(o,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),he(f,"width","auto"),he(f,"max-height","40px"),he(f,"border","1px solid black"),c(f,"width",e[11]),c(f,"height",e[12]),c(f,"class","svelte-1w6kap6")},m(m,w){H(m,t,w),e[43](t),H(m,l,w),H(m,o,w),H(m,n,w),Oe(r,m,w),H(m,d,w),H(m,f,w),e[46](f),i=!0,u||(p=G(o,"click",e[44]),u=!0)},p(m,w){const y={};!a&&w[0]&1&&(a=!0,y.checked=m[0].live_capture,nt(()=>a=!1)),r.$set(y),(!i||w[0]&2048)&&c(f,"width",m[11]),(!i||w[0]&4096)&&c(f,"height",m[12])},i(m){i||(L(r.$$.fragment,m),i=!0)},o(m){Y(r.$$.fragment,m),i=!1},d(m){m&&A(t),e[43](null),m&&A(l),m&&A(o),m&&A(n),Ae(r,m),m&&A(d),m&&A(f),e[46](null),u=!1,p()}}}function tl(e){let t,l,o,n,r,a=!1;return{c(){t=g("div"),l=g("div"),o=g("div"),n=g("div"),c(n,"class","d-block"),c(o,"class","flex"),c(l,"class","flex flex-col"),c(t,"class","text-black p-2")},m(d,f){H(d,t,f),s(t,l),s(l,o),s(o,n),r=!0},p(d,f){},i(d){r||(L(a),r=!0)},o(d){Y(a),r=!1},d(d){d&&A(t)}}}function ll(e){let t,l,o,n,r,a,d,f,i,u,p,z,k,m,w,y,Q,Z=e[1].resizedwidth+"",x,J,q=e[1].resizedheight+"",B,j,re=e[1].resizedwidth*e[1].resizedheight+"",R,K,h,C,P=e[1].resizedheight*e[1].resizedwidth/9+"",D,ee,U,ie,ne,V,de,oe=e[0].rubiks_scale+"",te,Ee,me,ce,F,$,Ie,qe=e[0].grid_size+"",X,N,Ue,Ye,xe=!1;function st(se){e[51](se)}let _e={text:"Show Grid"};return e[0].show_grid!==void 0&&(_e.checked=e[0].show_grid),d=new Ke({props:_e}),be.push(()=>it(d,"checked",st)),{c(){t=g("div"),l=g("h2"),l.textContent="Dimension",o=b(),n=g("div"),r=g("div"),a=b(),je(d.$$.fragment),i=b(),u=g("div"),p=g("span"),p.textContent="Width",z=b(),k=g("input"),w=b(),y=g("span"),Q=T("Resolution: "),x=T(Z),J=T(" x "),B=T(q),j=T(" = "),R=T(re),K=b(),h=g("br"),C=T(`\r
                Cubes Needed: `),D=T(P),ee=b(),U=g("div"),ie=T(`Scale\r
                `),ne=g("input"),V=b(),de=g("span"),te=T(oe),Ee=b(),me=g("span"),me.textContent="\xA0",ce=T(`\r
                Grid Size\r
                `),F=g("input"),$=b(),Ie=g("span"),X=T(qe),c(l,"class","svelte-1w6kap6"),c(r,"class","flex"),c(p,"class","p-2 svelte-1w6kap6"),he(k,"width","200px"),c(k,"type","range"),c(k,"min","3"),c(k,"max",m=e[0].max_width),c(k,"step","3"),c(k,"class","svelte-1w6kap6"),c(u,"class","flex slider-wrapper svelte-1w6kap6"),c(ne,"type","range"),c(ne,"max","40"),he(me,"margin-left","10px"),c(F,"type","range"),c(F,"max","10"),c(U,"class","flex"),he(U,"display","none"),c(n,"class","flex flex-col"),c(t,"class","text-black p-2")},m(se,ke){H(se,t,ke),s(t,l),s(t,o),s(t,n),s(n,r),s(r,a),Oe(d,r,null),s(n,i),s(n,u),s(u,p),s(u,z),s(u,k),fe(k,e[0].width),s(n,w),s(n,y),s(y,Q),s(y,x),s(y,J),s(y,B),s(y,j),s(y,R),s(y,K),s(y,h),s(y,C),s(y,D),s(n,ee),s(n,U),s(U,ie),s(U,ne),fe(ne,e[0].rubiks_scale),s(U,V),s(U,de),s(de,te),s(U,Ee),s(U,me),s(U,ce),s(U,F),fe(F,e[0].grid_size),s(U,$),s(U,Ie),s(Ie,X),N=!0,Ue||(Ye=[G(k,"change",e[52]),G(k,"input",e[52]),G(ne,"change",e[53]),G(ne,"input",e[53]),G(F,"change",e[54]),G(F,"input",e[54])],Ue=!0)},p(se,ke){const at={};!f&&ke[0]&1&&(f=!0,at.checked=se[0].show_grid,nt(()=>f=!1)),d.$set(at),(!N||ke[0]&1&&m!==(m=se[0].max_width))&&c(k,"max",m),ke[0]&1&&fe(k,se[0].width),(!N||ke[0]&2)&&Z!==(Z=se[1].resizedwidth+"")&&pe(x,Z),(!N||ke[0]&2)&&q!==(q=se[1].resizedheight+"")&&pe(B,q),(!N||ke[0]&2)&&re!==(re=se[1].resizedwidth*se[1].resizedheight+"")&&pe(R,re),(!N||ke[0]&2)&&P!==(P=se[1].resizedheight*se[1].resizedwidth/9+"")&&pe(D,P),ke[0]&1&&fe(ne,se[0].rubiks_scale),(!N||ke[0]&1)&&oe!==(oe=se[0].rubiks_scale+"")&&pe(te,oe),ke[0]&1&&fe(F,se[0].grid_size),(!N||ke[0]&1)&&qe!==(qe=se[0].grid_size+"")&&pe(X,qe)},i(se){N||(L(xe),L(d.$$.fragment,se),N=!0)},o(se){Y(xe),Y(d.$$.fragment,se),N=!1},d(se){se&&A(t),Ae(d),Ue=!1,Ze(Ye)}}}function nl(e){let t,l,o,n,r,a,d,f,i,u,p,z,k,m,w,y=e[0].mockup_pixel_size+"",Q,Z,x,J,q,B,j,re,R,K=e[0].mockup_x+"",h,C,P,D,ee,U,ie,ne=e[0].mockup_y+"",V,de,oe;function te(F,$){return F[1].mockup_hovering?yn:Cn}let Ee=te(e),me=Ee(e),ce=e[0].has_mockup&&il(e);return{c(){t=g("div"),l=g("div"),o=g("h2"),o.textContent="Mock Up",n=b(),r=g("i"),r.textContent=`This should be an image of the wall where you'll place your\r
                rubik's cube art.`,a=b(),d=g("br"),f=b(),me.c(),i=b(),u=g("canvas"),p=b(),ce&&ce.c(),z=T(`\r
\r
            Pixel Size\r
            `),k=g("input"),m=b(),w=g("span"),Q=T(y),Z=b(),x=g("br"),J=T(`\r
            Position\r
            `),q=g("br"),B=b(),j=g("input"),re=b(),R=g("span"),h=T(K),C=b(),P=g("br"),D=b(),ee=g("input"),U=b(),ie=g("span"),V=T(ne),c(o,"class","svelte-1w6kap6"),he(u,"width","auto"),c(u,"class","svelte-1w6kap6"),he(l,"height","auto"),c(l,"ondragover","return false"),c(l,"id","mockup_drop_zone"),c(l,"class","bg-green-200 h-full p-4"),c(k,"type","range"),c(k,"step","0.1"),c(k,"min","1"),c(k,"max","25"),c(j,"type","range"),c(j,"min","-500"),c(j,"max","500"),c(ee,"type","range"),c(ee,"min","-500"),c(ee,"max","500"),c(t,"class","text-black p-2")},m(F,$){H(F,t,$),s(t,l),s(l,o),s(l,n),s(l,r),s(l,a),s(l,d),s(l,f),me.m(l,null),s(l,i),s(l,u),e[55](u),s(l,p),ce&&ce.m(l,null),s(t,z),s(t,k),fe(k,e[0].mockup_pixel_size),s(t,m),s(t,w),s(w,Q),s(t,Z),s(t,x),s(t,J),s(t,q),s(t,B),s(t,j),fe(j,e[0].mockup_x),s(t,re),s(t,R),s(R,h),s(t,C),s(t,P),s(t,D),s(t,ee),fe(ee,e[0].mockup_y),s(t,U),s(t,ie),s(ie,V),de||(oe=[G(l,"drop",e[27]),G(l,"dragenter",e[28]),G(l,"dragleave",e[29]),G(k,"change",e[56]),G(k,"input",e[56]),G(j,"change",e[57]),G(j,"input",e[57]),G(ee,"change",e[58]),G(ee,"input",e[58])],de=!0)},p(F,$){Ee!==(Ee=te(F))&&(me.d(1),me=Ee(F),me&&(me.c(),me.m(l,i))),F[0].has_mockup?ce?ce.p(F,$):(ce=il(F),ce.c(),ce.m(l,null)):ce&&(ce.d(1),ce=null),$[0]&1&&fe(k,F[0].mockup_pixel_size),$[0]&1&&y!==(y=F[0].mockup_pixel_size+"")&&pe(Q,y),$[0]&1&&fe(j,F[0].mockup_x),$[0]&1&&K!==(K=F[0].mockup_x+"")&&pe(h,K),$[0]&1&&fe(ee,F[0].mockup_y),$[0]&1&&ne!==(ne=F[0].mockup_y+"")&&pe(V,ne)},d(F){F&&A(t),me.d(),e[55](null),ce&&ce.d(),de=!1,Ze(oe)}}}function yn(e){let t;return{c(){t=T("Release to load file")},m(l,o){H(l,t,o)},d(l){l&&A(t)}}}function Cn(e){let t;return{c(){t=T("Drop Background Image here.")},m(l,o){H(l,t,o)},d(l){l&&A(t)}}}function il(e){let t,l,o;return{c(){t=g("button"),t.textContent="Remove mockup",c(t,"class","p-2 border-[1px] border-black")},m(n,r){H(n,t,r),l||(o=G(t,"click",e[30]),l=!0)},p:rt,d(n){n&&A(t),l=!1,o()}}}function ol(e){let t,l,o,n,r,a,d,f,i,u,p,z,k,m,w,y,Q,Z,x,J,q;function B(h){e[59](h)}let j={text:"Make Input Image Gray First"};e[0].gray_scale_input!==void 0&&(j.checked=e[0].gray_scale_input),r=new Ke({props:j}),be.push(()=>it(r,"checked",B));function re(h){e[60](h)}let R={text:"Use Gray Value To Calculate Nearest Pixel"};e[0].gray_scale_nearest_pixel!==void 0&&(R.checked=e[0].gray_scale_nearest_pixel),i=new Ke({props:R}),be.push(()=>it(i,"checked",re)),w=new Ke({props:{text:"None",type:"radio",checked:e[0].dithering==""}}),w.$on("click",e[61]),Q=new Ke({props:{text:"Floyd Steinberg",type:"radio",checked:e[0].dithering=="fs"}}),Q.$on("click",e[62]),x=new Ke({props:{text:"Patterned",type:"radio",checked:e[0].dithering=="pattern"}}),x.$on("click",e[63]);let K=e[0].dithering=="pattern"&&rl(e);return{c(){t=g("div"),l=g("h2"),l.textContent="Processing Options",o=b(),n=g("div"),je(r.$$.fragment),d=b(),f=g("div"),je(i.$$.fragment),p=b(),z=g("div"),k=g("span"),k.textContent="Dithering:",m=b(),je(w.$$.fragment),y=b(),je(Q.$$.fragment),Z=b(),je(x.$$.fragment),J=b(),K&&K.c(),c(l,"class","svelte-1w6kap6"),c(n,"class","flex"),c(f,"class","flex"),c(k,"class","p-2"),c(z,"class","flex"),c(t,"class","text-black p-2")},m(h,C){H(h,t,C),s(t,l),s(t,o),s(t,n),Oe(r,n,null),s(t,d),s(t,f),Oe(i,f,null),s(t,p),s(t,z),s(z,k),s(z,m),Oe(w,z,null),s(z,y),Oe(Q,z,null),s(z,Z),Oe(x,z,null),s(t,J),K&&K.m(t,null),q=!0},p(h,C){const P={};!a&&C[0]&1&&(a=!0,P.checked=h[0].gray_scale_input,nt(()=>a=!1)),r.$set(P);const D={};!u&&C[0]&1&&(u=!0,D.checked=h[0].gray_scale_nearest_pixel,nt(()=>u=!1)),i.$set(D);const ee={};C[0]&1&&(ee.checked=h[0].dithering==""),w.$set(ee);const U={};C[0]&1&&(U.checked=h[0].dithering=="fs"),Q.$set(U);const ie={};C[0]&1&&(ie.checked=h[0].dithering=="pattern"),x.$set(ie),h[0].dithering=="pattern"?K?K.p(h,C):(K=rl(h),K.c(),K.m(t,null)):K&&(K.d(1),K=null)},i(h){q||(L(r.$$.fragment,h),L(i.$$.fragment,h),L(w.$$.fragment,h),L(Q.$$.fragment,h),L(x.$$.fragment,h),q=!0)},o(h){Y(r.$$.fragment,h),Y(i.$$.fragment,h),Y(w.$$.fragment,h),Y(Q.$$.fragment,h),Y(x.$$.fragment,h),q=!1},d(h){h&&A(t),Ae(r),Ae(i),Ae(w),Ae(Q),Ae(x),K&&K.d()}}}function rl(e){let t,l,o,n=e[20],r=[];for(let a=0;a<n.length;a+=1)r[a]=sl(xt(e,n,a));return{c(){t=g("div"),l=g("span"),l.textContent="Pattern Matrix Size:",o=b();for(let a=0;a<r.length;a+=1)r[a].c();c(l,"class","h-10 p-2")},m(a,d){H(a,t,d),s(t,l),s(t,o);for(let f=0;f<r.length;f+=1)r[f].m(t,null)},p(a,d){if(d[0]&1048577){n=a[20];let f;for(f=0;f<n.length;f+=1){const i=xt(a,n,f);r[f]?r[f].p(i,d):(r[f]=sl(i),r[f].c(),r[f].m(t,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=n.length}},d(a){a&&A(t),_t(r,a)}}}function sl(e){let t,l=e[109].length+"",o,n,r,a;function d(){return e[64](e[109])}return{c(){t=g("button"),o=T(l),n=b(),c(t,"class","h-10 p-2 rounded-lg border-solid border-2"),S(t,"bg-gray-200",e[0].matrix==e[109])},m(f,i){H(f,t,i),s(t,o),s(t,n),r||(a=G(t,"click",d),r=!0)},p(f,i){e=f,i[0]&1048577&&S(t,"bg-gray-200",e[0].matrix==e[109])},d(f){f&&A(t),r=!1,a()}}}function al(e){let t,l,o,n=e[0].pallette.name+"",r,a,d,f,i,u,p,z,k,m,w,y,Q,Z;function x(h){e[65](h)}let J={text:"Make Colors Editable"};e[1].allow_edit_colors!==void 0&&(J.checked=e[1].allow_edit_colors),f=new Ke({props:J}),be.push(()=>it(f,"checked",x));let q=e[4],B=[];for(let h=0;h<q.length;h+=1)B[h]=cl($t(e,q,h));const j=h=>Y(B[h],1,1,()=>{B[h]=null});let re=e[0].pallette.colors,R=[];for(let h=0;h<re.length;h+=1)R[h]=ul(Zt(e,re,h));const K=h=>Y(R[h],1,1,()=>{R[h]=null});return{c(){t=g("div"),l=g("h2"),o=T("Pallette - "),r=T(n),a=b(),d=g("div"),je(f.$$.fragment),u=b(),p=g("button"),p.textContent="Reset Pallettes",z=b(),k=g("div");for(let h=0;h<B.length;h+=1)B[h].c();m=b(),w=g("div");for(let h=0;h<R.length;h+=1)R[h].c();c(l,"class","svelte-1w6kap6"),c(p,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(d,"class","w-fit"),c(k,"class","flex"),c(t,"class","text-black p-2"),c(w,"class","flex px-2")},m(h,C){H(h,t,C),s(t,l),s(l,o),s(l,r),s(t,a),s(t,d),Oe(f,d,null),s(d,u),s(d,p),s(t,z),s(t,k);for(let P=0;P<B.length;P+=1)B[P].m(k,null);H(h,m,C),H(h,w,C);for(let P=0;P<R.length;P+=1)R[P].m(w,null);y=!0,Q||(Z=G(p,"click",e[19]),Q=!0)},p(h,C){(!y||C[0]&1)&&n!==(n=h[0].pallette.name+"")&&pe(r,n);const P={};if(!i&&C[0]&2&&(i=!0,P.checked=h[1].allow_edit_colors,nt(()=>i=!1)),f.$set(P),C[0]&17|C[1]&1){q=h[4];let D;for(D=0;D<q.length;D+=1){const ee=$t(h,q,D);B[D]?(B[D].p(ee,C),L(B[D],1)):(B[D]=cl(ee),B[D].c(),L(B[D],1),B[D].m(k,null))}for(tt(),D=q.length;D<B.length;D+=1)j(D);lt()}if(C[0]&3){re=h[0].pallette.colors;let D;for(D=0;D<re.length;D+=1){const ee=Zt(h,re,D);R[D]?(R[D].p(ee,C),L(R[D],1)):(R[D]=ul(ee),R[D].c(),L(R[D],1),R[D].m(w,null))}for(tt(),D=re.length;D<R.length;D+=1)K(D);lt()}},i(h){if(!y){L(f.$$.fragment,h);for(let C=0;C<q.length;C+=1)L(B[C]);for(let C=0;C<re.length;C+=1)L(R[C]);y=!0}},o(h){Y(f.$$.fragment,h),B=B.filter(Boolean);for(let C=0;C<B.length;C+=1)Y(B[C]);R=R.filter(Boolean);for(let C=0;C<R.length;C+=1)Y(R[C]);y=!1},d(h){h&&A(t),Ae(f),_t(B,h),h&&A(m),h&&A(w),_t(R,h),Q=!1,Z()}}}function cl(e){let t,l;function o(...n){return e[66](e[106],...n)}return t=new fn({props:{selected:e[0].pallette==e[106],colors:e[106].colors}}),t.$on("click",o),{c(){je(t.$$.fragment)},m(n,r){Oe(t,n,r),l=!0},p(n,r){e=n;const a={};r[0]&17&&(a.selected=e[0].pallette==e[106]),r[0]&16&&(a.colors=e[106].colors),t.$set(a)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){Y(t.$$.fragment,n),l=!1},d(n){Ae(t,n)}}}function ul(e){let t,l,o,n,r,a,d,f,i;function u(k){e[67](k,e[103])}let p={text:"",toggleClass:"",bgcolor:e[103].color};e[103].on!==void 0&&(p.checked=e[103].on),l=new Ke({props:p}),be.push(()=>it(l,"checked",u));function z(){e[68].call(r,e[104],e[105])}return{c(){t=g("div"),je(l.$$.fragment),n=b(),r=g("input"),a=b(),c(r,"type","color"),c(r,"name",""),c(r,"id",""),S(r,"hidden",!e[1].allow_edit_colors),c(t,"style","")},m(k,m){H(k,t,m),Oe(l,t,null),s(t,n),s(t,r),fe(r,e[103].color),s(t,a),d=!0,f||(i=G(r,"input",z),f=!0)},p(k,m){e=k;const w={};m[0]&1&&(w.bgcolor=e[103].color),!o&&m[0]&1&&(o=!0,w.checked=e[103].on,nt(()=>o=!1)),l.$set(w),m[0]&1&&fe(r,e[103].color),(!d||m[0]&2)&&S(r,"hidden",!e[1].allow_edit_colors)},i(k){d||(L(l.$$.fragment,k),d=!0)},o(k){Y(l.$$.fragment,k),d=!1},d(k){k&&A(t),Ae(l),f=!1,i()}}}function fl(e){let t,l,o,n,r,a,d,f,i=e[0].dithering=="pattern"&&dl(e),u=e[0].dithering=="fs"&&!1;return{c(){t=g("div"),l=g("pre"),o=T(e[18]),n=b(),r=b(),i&&i.c(),a=b(),u&&u.c(),d=yl(),c(l,"class","svelte-1w6kap6"),c(t,"class","fixed h-full overflow-scroll bg-white right-0 shadow-lg")},m(p,z){H(p,t,z),s(t,l),s(l,o),s(t,n),H(p,r,z),i&&i.m(p,z),H(p,a,z),u&&u.m(p,z),H(p,d,z),f=!0},p(p,z){(!f||z[0]&262144)&&pe(o,p[18]),p[0].dithering=="pattern"?i?i.p(p,z):(i=dl(p),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null),p[0].dithering=="fs",u&&(tt(),Y(u,1,1,()=>{u=null}),lt())},i(p){f||(L(u),f=!0)},o(p){Y(u),f=!1},d(p){p&&A(t),p&&A(r),i&&i.d(p),p&&A(a),u&&u.d(p),p&&A(d)}}}function dl(e){let t,l,o,n=e[0].matrix,r=[];for(let a=0;a<n.length;a+=1)r[a]=_l(Qt(e,n,a));return{c(){t=T(`Matrix Vectors\r
            `),l=g("div");for(let a=0;a<r.length;a+=1)r[a].c();c(l,"class",o=Vt(`grid grid-cols-${e[0].matrix[0].length} w-fit`)+" svelte-1w6kap6")},m(a,d){H(a,t,d),H(a,l,d);for(let f=0;f<r.length;f+=1)r[f].m(l,null)},p(a,d){if(d[0]&1){n=a[0].matrix;let f;for(f=0;f<n.length;f+=1){const i=Qt(a,n,f);r[f]?r[f].p(i,d):(r[f]=_l(i),r[f].c(),r[f].m(l,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=n.length}d[0]&1&&o!==(o=Vt(`grid grid-cols-${a[0].matrix[0].length} w-fit`)+" svelte-1w6kap6")&&c(l,"class",o)},d(a){a&&A(t),a&&A(l),_t(r,a)}}}function gl(e){let t,l,o,n=e[100]+"",r,a,d,f;function i(){e[70].call(l,e[101],e[102])}return{c(){t=g("div"),l=g("input"),o=b(),r=T(n),a=b(),c(l,"type","range"),c(l,"step","0.01"),c(l,"max","1.0"),c(l,"min","0.0"),c(t,"class","p-2 svelte-1w6kap6")},m(u,p){H(u,t,p),s(t,l),fe(l,e[100]),s(t,o),s(t,r),s(t,a),d||(f=[G(l,"change",i),G(l,"input",i)],d=!0)},p(u,p){e=u,p[0]&1&&fe(l,e[100]),p[0]&1&&n!==(n=e[100]+"")&&pe(r,n)},d(u){u&&A(t),d=!1,Ze(f)}}}function _l(e){let t,l=e[97],o=[];for(let n=0;n<l.length;n+=1)o[n]=gl(Xt(e,l,n));return{c(){for(let n=0;n<o.length;n+=1)o[n].c();t=yl()},m(n,r){for(let a=0;a<o.length;a+=1)o[a].m(n,r);H(n,t,r)},p(n,r){if(r[0]&1){l=n[97];let a;for(a=0;a<l.length;a+=1){const d=Xt(n,l,a);o[a]?o[a].p(d,r):(o[a]=gl(d),o[a].c(),o[a].m(t.parentNode,t))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(n){_t(o,n),n&&A(t)}}}function hl(e){let t,l,o,n,r,a,d,f,i,u=e[0].zoom_range.x+"",p,z,k,m,w,y=e[0].zoom_range.y+"",Q,Z,x,J,q=e[1].select_pos.x+"",B,j,re=e[1].select_pos.y+"",R,K,h,C,P,D,ee,U,ie,ne,V,de,oe,te,Ee;function me(X){e[74](X)}let ce={text:"Show Instructional Cubes?"};e[1].show_steps!==void 0&&(ce.checked=e[1].show_steps),P=new Ke({props:ce}),be.push(()=>it(P,"checked",me));function F(X){e[75](X)}let $={text:"Use arrow keys to move"};e[1].enable_arrows!==void 0&&($.checked=e[1].enable_arrows),U=new Ke({props:$}),be.push(()=>it(U,"checked",F));function Ie(X){e[76](X)}let qe={text:"Full-Width Rubiks"};return e[1].show_zoomed!==void 0&&(qe.checked=e[1].show_zoomed),V=new Ke({props:qe}),be.push(()=>it(V,"checked",Ie)),{c(){t=g("div"),l=g("h2"),l.textContent="Ready to Cube?",o=b(),n=g("div"),r=g("div"),a=T(`Rows and columns of cubes to show.\r
                `),d=g("div"),f=g("input"),i=b(),p=T(u),z=b(),k=g("div"),m=g("input"),w=b(),Q=T(y),Z=b(),x=g("span"),J=T("Cursor: ("),B=T(q),j=T(", "),R=T(re),K=T(")"),h=b(),C=g("span"),je(P.$$.fragment),ee=b(),je(U.$$.fragment),ne=b(),je(V.$$.fragment),c(l,"class","svelte-1w6kap6"),c(f,"type","range"),c(f,"min","1"),c(f,"max","36"),c(m,"type","range"),c(m,"min","1"),c(m,"max","36"),c(r,"class","flex flex-col"),c(C,"class","w-fit"),c(n,"class","flex flex-col gap-2"),c(t,"class","p-2")},m(X,N){H(X,t,N),s(t,l),s(t,o),s(t,n),s(n,r),s(r,a),s(r,d),s(d,f),fe(f,e[0].zoom_range.x),s(d,i),s(d,p),s(r,z),s(r,k),s(k,m),fe(m,e[0].zoom_range.y),s(k,w),s(k,Q),s(n,Z),s(n,x),s(x,J),s(x,B),s(x,j),s(x,R),s(x,K),s(n,h),s(n,C),Oe(P,C,null),s(C,ee),Oe(U,C,null),s(C,ne),Oe(V,C,null),oe=!0,te||(Ee=[G(f,"change",e[72]),G(f,"input",e[72]),G(m,"change",e[73]),G(m,"input",e[73])],te=!0)},p(X,N){N[0]&1&&fe(f,X[0].zoom_range.x),(!oe||N[0]&1)&&u!==(u=X[0].zoom_range.x+"")&&pe(p,u),N[0]&1&&fe(m,X[0].zoom_range.y),(!oe||N[0]&1)&&y!==(y=X[0].zoom_range.y+"")&&pe(Q,y),(!oe||N[0]&2)&&q!==(q=X[1].select_pos.x+"")&&pe(B,q),(!oe||N[0]&2)&&re!==(re=X[1].select_pos.y+"")&&pe(R,re);const Ue={};!D&&N[0]&2&&(D=!0,Ue.checked=X[1].show_steps,nt(()=>D=!1)),P.$set(Ue);const Ye={};!ie&&N[0]&2&&(ie=!0,Ye.checked=X[1].enable_arrows,nt(()=>ie=!1)),U.$set(Ye);const xe={};!de&&N[0]&2&&(de=!0,xe.checked=X[1].show_zoomed,nt(()=>de=!1)),V.$set(xe)},i(X){oe||(L(P.$$.fragment,X),L(U.$$.fragment,X),L(V.$$.fragment,X),oe=!0)},o(X){Y(P.$$.fragment,X),Y(U.$$.fragment,X),Y(V.$$.fragment,X),oe=!1},d(X){X&&A(t),Ae(P),Ae(U),Ae(V),te=!1,Ze(Ee)}}}function pl(e){let t;return{c(){t=g("div"),t.textContent="Drop Image Here to Load",c(t,"class","h-full w-full flex justify-center items-center bg-gray-300")},m(l,o){H(l,t,o)},d(l){l&&A(t)}}}function ml(e){let t,l,o,n,r,a,d,f=e[0].screenCapturePadding.left+"",i,u,p,z,k,m,w=e[0].screenCapturePadding.right+"",y,Q,Z,x,J,q,B=e[0].screenCapturePadding.top+"",j,re,R,K,h,C,P=e[0].screenCapturePadding.bottom+"",D,ee,U;return{c(){t=g("div"),l=g("span"),l.textContent="Crop Screen Capture",o=b(),n=g("span"),r=T(`Left\r
                `),a=g("input"),d=b(),i=T(f),u=b(),p=g("span"),z=T(`Right\r
                `),k=g("input"),m=b(),y=T(w),Q=b(),Z=g("span"),x=T(`Top\r
                `),J=g("input"),q=b(),j=T(B),re=b(),R=g("span"),K=T(`Bottom\r
                `),h=g("input"),C=b(),D=T(P),c(a,"type","range"),c(a,"min","0"),c(a,"max","1000"),c(k,"type","range"),c(k,"min","0"),c(k,"max","1000"),c(J,"type","range"),c(J,"min","0"),c(J,"max","1000"),c(h,"type","range"),c(h,"min","0"),c(h,"max","1000"),c(t,"class","flex flex-col")},m(ie,ne){H(ie,t,ne),s(t,l),s(t,o),s(t,n),s(n,r),s(n,a),fe(a,e[0].screenCapturePadding.left),s(n,d),s(n,i),s(t,u),s(t,p),s(p,z),s(p,k),fe(k,e[0].screenCapturePadding.right),s(p,m),s(p,y),s(t,Q),s(t,Z),s(Z,x),s(Z,J),fe(J,e[0].screenCapturePadding.top),s(Z,q),s(Z,j),s(t,re),s(t,R),s(R,K),s(R,h),fe(h,e[0].screenCapturePadding.bottom),s(R,C),s(R,D),ee||(U=[G(a,"change",e[77]),G(a,"input",e[77]),G(k,"change",e[78]),G(k,"input",e[78]),G(J,"change",e[79]),G(J,"input",e[79]),G(h,"change",e[80]),G(h,"input",e[80])],ee=!0)},p(ie,ne){ne[0]&1&&fe(a,ie[0].screenCapturePadding.left),ne[0]&1&&f!==(f=ie[0].screenCapturePadding.left+"")&&pe(i,f),ne[0]&1&&fe(k,ie[0].screenCapturePadding.right),ne[0]&1&&w!==(w=ie[0].screenCapturePadding.right+"")&&pe(y,w),ne[0]&1&&fe(J,ie[0].screenCapturePadding.top),ne[0]&1&&B!==(B=ie[0].screenCapturePadding.top+"")&&pe(j,B),ne[0]&1&&fe(h,ie[0].screenCapturePadding.bottom),ne[0]&1&&P!==(P=ie[0].screenCapturePadding.bottom+"")&&pe(D,P)},d(ie){ie&&A(t),ee=!1,Ze(U)}}}function bl(e){let t,l,o=e[1].select_pos.x+1+"",n,r,a=e[1].select_pos.y+1+"",d;return{c(){t=g("div"),l=T("Column "),n=T(o),r=T(", Row "),d=T(a),c(t,"class","min-w-[20px]")},m(f,i){H(f,t,i),s(t,l),s(t,n),s(t,r),s(t,d)},p(f,i){i[0]&2&&o!==(o=f[1].select_pos.x+1+"")&&pe(n,o),i[0]&2&&a!==(a=f[1].select_pos.y+1+"")&&pe(d,a)},d(f){f&&A(t)}}}function Pn(e){let t,l,o;return{c(){t=g("canvas"),c(t,"id","rubiks_canvas"),c(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),c(t,"height",o=e[1].resizedheight*e[0].rubiks_scale),c(t,"class","svelte-1w6kap6"),S(t,"shown",e[3]&&e[0].show_rubiks),S(t,"pixelated",e[0].pixelated)},m(n,r){H(n,t,r),e[86](t)},p(n,r){r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&c(t,"width",l),r[0]&3&&o!==(o=n[1].resizedheight*n[0].rubiks_scale)&&c(t,"height",o),r[0]&9&&S(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&S(t,"pixelated",n[0].pixelated)},d(n){n&&A(t),e[86](null)}}}function Rn(e){let t,l,o;return{c(){t=g("canvas"),he(t,"position","absolute"),he(t,"top",e[5]/2-e[1].resizedheight*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_y*e[2]/e[1].mockupwidth+"px"),he(t,"left",e[2]/2-e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_x*e[2]/e[1].mockupwidth+"px"),he(t,"width",e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth+"px"),c(t,"id","rubiks_canvas"),c(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),c(t,"height",o=e[1].resizedheight*e[0].rubiks_scale),c(t,"class","svelte-1w6kap6"),S(t,"shown",e[3]&&e[0].show_rubiks),S(t,"pixelated",e[0].pixelated)},m(n,r){H(n,t,r),e[85](t)},p(n,r){r[0]&39&&he(t,"top",n[5]/2-n[1].resizedheight*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_y*n[2]/n[1].mockupwidth+"px"),r[0]&7&&he(t,"left",n[2]/2-n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_x*n[2]/n[1].mockupwidth+"px"),r[0]&7&&he(t,"width",n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth+"px"),r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&c(t,"width",l),r[0]&3&&o!==(o=n[1].resizedheight*n[0].rubiks_scale)&&c(t,"height",o),r[0]&9&&S(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&S(t,"pixelated",n[0].pixelated)},d(n){n&&A(t),e[85](null)}}}function kl(e){let t;return{c(){t=g("div"),t.textContent="Drop to load image",c(t,"class","rounded-lg border-solid border-2 p-8 text-white text-center m-auto w-fit")},m(l,o){H(l,t,o)},d(l){l&&A(t)}}}function wl(e){return{c:rt,m:rt,d:rt}}function Dn(e){let t,l,o,n,r,a,d,f,i,u,p,z,k,m,w,y,Q,Z,x,J,q,B,j,re,R,K,h,C,P,D,ee,U,ie,ne,V,de,oe,te,Ee,me,ce,F,$,Ie,qe,X,N,Ue,Ye,xe,st,_e,se,ke,at,Ve,Je,ut,ft,kt,wt,vt,zt,ae,ht,yt,we=e[15]&&el(e);function Mt(v){e[47](v)}let Ct={text:"Debug"};e[1].show_debug!==void 0&&(Ct.checked=e[1].show_debug),R=new Ke({props:Ct}),be.push(()=>it(R,"checked",Mt));let ve=e[1].current=="img"&&tl(),ze=e[1].current=="rubiks"&&ll(e),Me=e[1].current=="mockup"&&nl(e),ye=e[1].current=="processing"&&ol(e),Ce=e[1].current=="pallette"&&al(e),Pe=e[1].show_debug&&fl(e),Re=e[1].current=="arrows"&&hl(e),Le=!e[3]&&pl(),Te=e[15]&&ml(e),Se=e[1].show_steps&&bl(e);function Pt(v,E){return v[0].has_mockup?Rn:Pn}let dt=Pt(e),Qe=dt(e),Fe=!e[3]&&e[1].hovering&&kl(),Ne=e[1].resizedheight&&e[1].resizedwidth&&wl();return{c(){t=g("main"),l=g("div"),o=g("div"),n=g("div"),r=b(),a=g("button"),a.innerHTML='<i class="fa-fw fa fa-folder-open"></i>',d=b(),f=g("button"),f.innerHTML='<i class="fa-fw fa fa-expand"></i>',i=b(),u=g("button"),u.innerHTML='<i class="fa-fw fa fa-palette"></i>',p=b(),z=g("button"),z.innerHTML='<i class="fa-fw fa fa-cog"></i>',k=b(),m=g("button"),m.innerHTML='<i class="fa fa-image"></i>',w=b(),y=g("button"),y.innerHTML='<i class="fa-fw fa fa-play"></i>',Q=b(),Z=g("button"),Z.innerHTML='<i class="fa-fw fa fa-desktop"></i>',x=b(),J=g("button"),J.textContent="Capture",q=b(),we&&we.c(),B=b(),j=g("div"),re=b(),je(R.$$.fragment),h=b(),C=g("div"),P=g("div"),ve&&ve.c(),D=b(),ze&&ze.c(),ee=b(),Me&&Me.c(),U=b(),ye&&ye.c(),ie=b(),Ce&&Ce.c(),ne=b(),Pe&&Pe.c(),V=b(),Re&&Re.c(),de=b(),oe=g("div"),te=g("div"),Le&&Le.c(),Ee=b(),Te&&Te.c(),me=b(),ce=g("div"),F=g("div"),$=g("canvas"),X=b(),N=g("canvas"),xe=b(),Se&&Se.c(),st=b(),_e=g("canvas"),at=b(),Ve=g("div"),Je=g("canvas"),kt=b(),Qe.c(),vt=b(),Fe&&Fe.c(),zt=b(),Ne&&Ne.c(),c(a,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(a,"title","Open File"),c(f,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(f,"title","Dimensions"),S(f,"bg-gray-400",e[1].current=="rubiks"),c(u,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(u,"title","Colors"),S(u,"bg-gray-400",e[1].current=="pallette"),c(z,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(z,"title","Image Processing"),S(z,"bg-gray-400",e[1].current=="processing"),c(m,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(m,"bg-gray-400",e[1].current=="mockup"),c(y,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(y,"bg-gray-400",e[1].current=="arrows"),c(Z,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(Z,"title","Screen Capture"),S(Z,"bg-gray-400",e[15]),c(J,"class","hidden h-10 p-2 rounded-lg border-solid border-2 text-center"),c(j,"class","spacer svelte-1w6kap6"),c(n,"class","flex"),c(o,"class","bg-white text-black p-2"),c(P,"class","bg-white shadow-md absolute z-10 pb-2"),he($,"display","none"),c($,"class","small svelte-1w6kap6"),c($,"id","canvas"),c($,"width",Ie=e[1].canvaswidth),c($,"height",qe=e[1].canvasheight),S($,"shown",e[3]),S($,"pixelated",e[0].pixelated),c(N,"id","output_canvas"),c(N,"width",Ue=e[1].resizedwidth),c(N,"height",Ye=e[1].resizedheight),he(N,"border","4px solid red"),c(N,"class","svelte-1w6kap6"),S(N,"small",e[0].show_rubiks),S(N,"shown",e[3]),S(N,"pixelated",e[0].pixelated),he(_e,"image-rendering","pixelated"),c(_e,"id","preview"),c(_e,"class","border-red-500 border-4 svelte-1w6kap6"),c(_e,"width",se=e[0].zoom_range.x*3*Number(e[0].rubiks_scale)),c(_e,"height",ke=e[0].zoom_range.y*3*Number(e[0].rubiks_scale)),S(_e,"w-full",e[1].show_zoomed),S(_e,"fixed",!e[1].show_steps),S(_e,"top-[-100vh]",!e[1].show_steps),S(_e,"relative",e[1].show_steps),c(Je,"id","bgcanvas"),c(Je,"width",ut=e[1].mockupwidth),c(Je,"height",ft=e[1].mockupheight),c(Je,"class","svelte-1w6kap6"),S(Je,"shown",e[0].has_mockup),he(Ve,"position","relative"),c(Ve,"id","canvas_wrapper"),Et(()=>e[87].call(Ve)),c(F,"class","flex-col"),c(ce,"class","flex"),c(te,"ondragover","return false"),c(te,"id","drop_zone"),c(te,"class","h-full"),c(oe,"class","h-full grow justify-center"),c(oe,"style",""),c(C,"class","main relative h-full"),c(C,"style",""),c(l,"class","flex flex-col h-screen")},m(v,E){H(v,t,E),s(t,l),s(l,o),s(o,n),s(n,r),s(n,a),s(n,d),s(n,f),s(n,i),s(n,u),s(n,p),s(n,z),s(n,k),s(n,m),s(n,w),s(n,y),s(n,Q),s(n,Z),s(n,x),s(n,J),s(n,q),we&&we.m(n,null),s(n,B),s(n,j),s(n,re),Oe(R,n,null),s(l,h),s(l,C),s(C,P),ve&&ve.m(P,null),s(P,D),ze&&ze.m(P,null),s(P,ee),Me&&Me.m(P,null),s(P,U),ye&&ye.m(P,null),s(P,ie),Ce&&Ce.m(P,null),s(P,ne),Pe&&Pe.m(P,null),s(P,V),Re&&Re.m(P,null),s(C,de),s(C,oe),s(oe,te),Le&&Le.m(te,null),s(te,Ee),Te&&Te.m(te,null),s(te,me),s(te,ce),s(ce,F),s(F,$),e[81]($),s(F,X),s(F,N),e[82](N),s(F,xe),Se&&Se.m(F,null),s(F,st),s(F,_e),e[83](_e),s(F,at),s(F,Ve),s(Ve,Je),e[84](Je),s(Ve,kt),Qe.m(Ve,null),wt=xl(Ve,e[87].bind(Ve)),s(te,vt),Fe&&Fe.m(te,null),s(l,zt),Ne&&Ne.m(l,null),ae=!0,ht||(yt=[G(a,"click",e[35]),G(f,"click",e[36]),G(u,"click",e[37]),G(z,"click",e[38]),G(m,"click",e[39]),G(y,"click",e[40]),G(Z,"click",e[41]),G(J,"click",e[42]),G(te,"drop",e[23]),G(te,"dragenter",e[25]),G(te,"dragleave",e[26]),G(oe,"click",e[88])],ht=!0)},p(v,E){(!ae||E[0]&2)&&S(f,"bg-gray-400",v[1].current=="rubiks"),(!ae||E[0]&2)&&S(u,"bg-gray-400",v[1].current=="pallette"),(!ae||E[0]&2)&&S(z,"bg-gray-400",v[1].current=="processing"),(!ae||E[0]&2)&&S(m,"bg-gray-400",v[1].current=="mockup"),(!ae||E[0]&2)&&S(y,"bg-gray-400",v[1].current=="arrows"),(!ae||E[0]&32768)&&S(Z,"bg-gray-400",v[15]),v[15]?we?(we.p(v,E),E[0]&32768&&L(we,1)):(we=el(v),we.c(),L(we,1),we.m(n,B)):we&&(tt(),Y(we,1,1,()=>{we=null}),lt());const Rt={};!K&&E[0]&2&&(K=!0,Rt.checked=v[1].show_debug,nt(()=>K=!1)),R.$set(Rt),v[1].current=="img"?ve?(ve.p(v,E),E[0]&2&&L(ve,1)):(ve=tl(),ve.c(),L(ve,1),ve.m(P,D)):ve&&(tt(),Y(ve,1,1,()=>{ve=null}),lt()),v[1].current=="rubiks"?ze?(ze.p(v,E),E[0]&2&&L(ze,1)):(ze=ll(v),ze.c(),L(ze,1),ze.m(P,ee)):ze&&(tt(),Y(ze,1,1,()=>{ze=null}),lt()),v[1].current=="mockup"?Me?Me.p(v,E):(Me=nl(v),Me.c(),Me.m(P,U)):Me&&(Me.d(1),Me=null),v[1].current=="processing"?ye?(ye.p(v,E),E[0]&2&&L(ye,1)):(ye=ol(v),ye.c(),L(ye,1),ye.m(P,ie)):ye&&(tt(),Y(ye,1,1,()=>{ye=null}),lt()),v[1].current=="pallette"?Ce?(Ce.p(v,E),E[0]&2&&L(Ce,1)):(Ce=al(v),Ce.c(),L(Ce,1),Ce.m(P,ne)):Ce&&(tt(),Y(Ce,1,1,()=>{Ce=null}),lt()),v[1].show_debug?Pe?(Pe.p(v,E),E[0]&2&&L(Pe,1)):(Pe=fl(v),Pe.c(),L(Pe,1),Pe.m(P,V)):Pe&&(tt(),Y(Pe,1,1,()=>{Pe=null}),lt()),v[1].current=="arrows"?Re?(Re.p(v,E),E[0]&2&&L(Re,1)):(Re=hl(v),Re.c(),L(Re,1),Re.m(P,null)):Re&&(tt(),Y(Re,1,1,()=>{Re=null}),lt()),v[3]?Le&&(Le.d(1),Le=null):Le||(Le=pl(),Le.c(),Le.m(te,Ee)),v[15]?Te?Te.p(v,E):(Te=ml(v),Te.c(),Te.m(te,me)):Te&&(Te.d(1),Te=null),(!ae||E[0]&2&&Ie!==(Ie=v[1].canvaswidth))&&c($,"width",Ie),(!ae||E[0]&2&&qe!==(qe=v[1].canvasheight))&&c($,"height",qe),(!ae||E[0]&8)&&S($,"shown",v[3]),(!ae||E[0]&1)&&S($,"pixelated",v[0].pixelated),(!ae||E[0]&2&&Ue!==(Ue=v[1].resizedwidth))&&c(N,"width",Ue),(!ae||E[0]&2&&Ye!==(Ye=v[1].resizedheight))&&c(N,"height",Ye),(!ae||E[0]&1)&&S(N,"small",v[0].show_rubiks),(!ae||E[0]&8)&&S(N,"shown",v[3]),(!ae||E[0]&1)&&S(N,"pixelated",v[0].pixelated),v[1].show_steps?Se?Se.p(v,E):(Se=bl(v),Se.c(),Se.m(F,st)):Se&&(Se.d(1),Se=null),(!ae||E[0]&1&&se!==(se=v[0].zoom_range.x*3*Number(v[0].rubiks_scale)))&&c(_e,"width",se),(!ae||E[0]&1&&ke!==(ke=v[0].zoom_range.y*3*Number(v[0].rubiks_scale)))&&c(_e,"height",ke),(!ae||E[0]&2)&&S(_e,"w-full",v[1].show_zoomed),(!ae||E[0]&2)&&S(_e,"fixed",!v[1].show_steps),(!ae||E[0]&2)&&S(_e,"top-[-100vh]",!v[1].show_steps),(!ae||E[0]&2)&&S(_e,"relative",v[1].show_steps),(!ae||E[0]&2&&ut!==(ut=v[1].mockupwidth))&&c(Je,"width",ut),(!ae||E[0]&2&&ft!==(ft=v[1].mockupheight))&&c(Je,"height",ft),(!ae||E[0]&1)&&S(Je,"shown",v[0].has_mockup),dt===(dt=Pt(v))&&Qe?Qe.p(v,E):(Qe.d(1),Qe=dt(v),Qe&&(Qe.c(),Qe.m(Ve,null))),!v[3]&&v[1].hovering?Fe||(Fe=kl(),Fe.c(),Fe.m(te,null)):Fe&&(Fe.d(1),Fe=null),v[1].resizedheight&&v[1].resizedwidth?Ne||(Ne=wl(),Ne.c(),Ne.m(l,null)):Ne&&(Ne.d(1),Ne=null)},i(v){ae||(L(we),L(R.$$.fragment,v),L(ve),L(ze),L(ye),L(Ce),L(Pe),L(Re),ae=!0)},o(v){Y(we),Y(R.$$.fragment,v),Y(ve),Y(ze),Y(ye),Y(Ce),Y(Pe),Y(Re),ae=!1},d(v){v&&A(t),we&&we.d(),Ae(R),ve&&ve.d(),ze&&ze.d(),Me&&Me.d(),ye&&ye.d(),Ce&&Ce.d(),Pe&&Pe.d(),Re&&Re.d(),Le&&Le.d(),Te&&Te.d(),e[81](null),e[82](null),Se&&Se.d(),e[83](null),e[84](null),Qe.d(),wt(),Fe&&Fe.d(),Ne&&Ne.d(),ht=!1,Ze(yt)}}}function In(e,t,l){let o,n;en(()=>{window.addEventListener("keydown",_=>{if(u.enable_arrows&&u.show_steps)switch(_.key){case"ArrowUp":_.preventDefault(),l(1,u.select_pos.y-=1,u);break;case"ArrowDown":_.preventDefault(),l(1,u.select_pos.y+=1,u);break;case"ArrowLeft":l(1,u.select_pos.x-=1,u),_.preventDefault();break;case"ArrowRight":l(1,u.select_pos.x+=1,u),_.preventDefault();break}}),d(),$(a[0])});let r=!1,a=[];function d(){l(4,a=[{name:"Rubik's Colors",colors:[{color:"#013082",on:!0},{color:"#BB2328",on:!0},{color:"#01B351",on:!0},{color:"#FE8F25",on:!0},{color:"#F5FF42",on:!0},{color:"#ECF3F6",on:!0}]},{name:"Rubik's Colors W/O Green",colors:[{color:"#013082",on:!0},{color:"#BB2328",on:!0},{color:"#FE8F25",on:!0},{color:"#F5FF42",on:!0},{color:"#ECF3F6",on:!0}]},{name:"Black & White",colors:[{color:"#000",on:!0},{color:"#fff",on:!0}]},{name:"Black, Gray, White",colors:[{color:"#000",on:!0},{color:"#666",on:!0},{color:"#fff",on:!0}]},{name:"Gray Scale",colors:[{color:"#000",on:!0},{color:"#111",on:!0},{color:"#222",on:!0},{color:"#333",on:!0},{color:"#444",on:!0},{color:"#555",on:!0},{color:"#666",on:!0},{color:"#777",on:!0},{color:"#888",on:!0},{color:"#999",on:!0},{color:"#aaa",on:!0},{color:"#bbb",on:!0},{color:"#ccc",on:!0},{color:"#ddd",on:!0},{color:"#eee",on:!0},{color:"#fff",on:!0}]},{name:"RGB",colors:[{color:"#000",on:!0},{color:"#f00",on:!0},{color:"#0f0",on:!0},{color:"#00f",on:!0},{color:"#fff",on:!0}]},{name:"CMYK",colors:[{color:"#000",on:!0},{color:"#0ff",on:!0},{color:"#f0f",on:!0},{color:"#ff0",on:!0},{color:"#fff",on:!0}]}])}let f=[[[0/4,2/4],[3/4,1/4]],[[0/16,8/16,2/16,10/16],[12/16,4/16,14/16,6/16],[3/16,11/16,1/16,9/16],[15/16,7/16,13/16,5/16]]],i={zoom_range:{x:6,y:1},screenCapturePadding:{top:0,left:0,bottom:0,right:0},loadedfile:"",cache:!0,cap:!1,pixelated:!1,has_mockup:!1,mockup_pixel_size:5,mockup_x:0,mockup_y:0,width:99,height:0,dithering:"fs",max_width:600,show_rubiks:!0,show_grid:!0,rubiks_scale:8,gray_scale_input:!1,gray_scale_nearest_pixel:!1,grid_size:2,pallette:a[0],debug_range:-1,matrix:f[0],live_capture:!1},u={allow_edit_colors:!1,enable_arrows:!0,current:"",select_pos:{x:0,y:0},hovering:!1,mockup_hovering:!1,mockupheight:100,mockupwidth:100,show_zoomed:!1,show_steps:!1,show_debug:!1,resizedwidth:0,resizedheight:0,total_pixels:0,canvaswidth:100,canvasheight:100},p,z,k,m,w,y,Q,Z,x,J,q="",B={},j,re=!1,R=!1;async function K(_){let le=null;try{le=await navigator.mediaDevices.getDisplayMedia(_),re=!0,l(15,R=!0),await ot(),l(14,j.srcObject=le,j),setTimeout(()=>{h()},250)}catch(I){console.error(`Error: ${I}`)}let O=()=>{te&&(i.live_capture&&te(),setTimeout(O,1e3/15))};O()}let h=async function(){if(Q){console.log("videocanvas is not null");let _=Q.getContext("2d");console.log(j.videoWidth,j.videoHeight),await ot();let le=300,O=le*j.videoHeight/j.videoWidth,{top:I,bottom:Xe,left:We,right:et}={...i.screenCapturePadding};l(11,Z=le-We-et),l(12,x=O-I-Xe),await ot(),_.drawImage(j,-We,-I,le,O),console.log("loading image on video"),F(Q)}else console.log("videocanvas is null")},C=function(_){_.preventDefault();let le=_;if(le.dataTransfer.items)if(le.dataTransfer.items.length==1){let O=le.dataTransfer.items[0];if(O.kind==="file"){const I=O.getAsFile();ce(I)}else console.log("kind is not file, but: "+O.kind)}else l(18,n="Error: can only load one file");l(1,u.hovering=!1,u)},P=function(){var _=document.createElement("input");_.type="file",_.onchange=le=>{var O=le.target.files[0];ce(O)},_.click()},D=function(){console.log("drag enter"),l(1,u.hovering=!0,u)},ee=function(){l(1,u.hovering=!1,u)},U=function(_){_.preventDefault();let le=_;if(le.dataTransfer.items)if(le.dataTransfer.items.length==1){let O=le.dataTransfer.items[0];if(O.kind==="file"){const I=O.getAsFile();l(0,i.has_mockup=!0,i),Ee(I)}else console.log("kind is not file, but: "+O.kind)}else l(18,n="Error: can only load one file");l(1,u.mockup_hovering=!1,u)},ie=function(){console.log("drag enter"),l(1,u.mockup_hovering=!0,u)},ne=function(){l(1,u.mockup_hovering=!1,u)},V,de,oe,te=null,Ee=function(_){let le=m.getContext("2d"),O=oe.getContext("2d");de=new Image,de.onload=async function(){await ot(),l(1,u.mockupheight=de.height,u),l(1,u.mockupwidth=de.width,u),await ot(),le.drawImage(de,0,0,de.width,de.height),O.drawImage(de,0,0,200,200*de.height/de.width)},de.src=URL.createObjectURL(_)},me=function(){l(0,i.has_mockup=!1,i),de.src=null,oe.getContext("2d").clearRect(0,0,oe.width,oe.height)},ce=function(_){var O;l(15,R=!1),l(0,i.loadedfile=_.name,i),(O=i.loadedfile)!=null&&O.toLowerCase().endsWith(".png")&&alert("Transparent PNGs have known issues.. Please use non-transparent PNGs");let le=k.getContext("2d");V=new Image,V.onload=async function(){l(1,u.canvasheight=V.height,u),l(1,u.canvaswidth=V.width,u),l(3,r=!0),B={},await ot(),le.drawImage(V,0,0,V.width,V.height)},V.src=URL.createObjectURL(_)},F=function(_){let le=k.getContext("2d");V=new Image,V.onload=async function(){l(1,u.canvasheight=V.height,u),l(1,u.canvaswidth=V.width,u),l(3,r=!0),B={},await ot(),le.drawImage(V,0,0,V.width,V.height)},V.src=_.toDataURL("image/png")},$=function(_){l(0,i.pallette=_,i)},Ie=function(_){u.current==_?l(1,u.current="",u):l(1,u.current=_,u)};tn(async()=>{if(!i.width){console.log("no width, ending here");return}if(!r){console.log("no image loaded, ending here");return}if(!V){console.log("originalImage is empty","ending here");return}let _=u.canvasheight/u.canvaswidth*i.width;if(l(0,i.height=_,i),l(1,u.resizedwidth=parseInt(i.width/3)*3,u),l(1,u.resizedheight=parseInt(_/3)*3,u),l(1,u.total_pixels=u.resizedheight*u.resizedwidth,u),await ot(),_<1){console.log("height is less than 1","ending here");return}if(q=M.hashCode(JSON.stringify(o)),i.cache&&q&&B[q]){console.log("found",o.loadedfile,q,"from cache");let O=w.getContext("2d"),I=B[q].data,Xe=new ImageData(I.data,I.width,I.height);O.putImageData(Xe,0,0)}else{console.log("GENERATING IMAGE",JSON.stringify(o),q);let O=w.getContext("2d");O.drawImage(V,0,0,u.resizedwidth,u.resizedheight);let I=O.getImageData(0,0,u.resizedwidth,u.resizedheight);if(i.gray_scale_input)for(let W=0,De=0;W<I.height;W++)for(let ge=0;ge<I.width;ge++,De+=4){let gt=M.getPixelDataRGB(I,ge,W),$e=Math.round((gt.r+gt.g+gt.b)/3);M.setPixelDataRaw(I,De,$e),M.setPixelDataRaw(I,De+1,$e),M.setPixelDataRaw(I,De+2,$e)}let Xe=i.pallette.colors;i.pallette.colors.length&&(Xe=i.pallette.colors.filter(W=>W.on).map(W=>W.color));let We=Xe.length,et=Xe;et.forEach((W,De)=>{et[De]=M.hexToRgb(W)});for(let W=0,De=0;W<I.height;W++)for(let ge=0;ge<I.width;ge++,De+=4){let gt=M.getPixelDataRGB(I,ge,W),$e=M.nearestPixel2(gt,et,i.gray_scale_nearest_pixel);if(i.dithering=="")M.setPixelDataRaw(I,De,$e.r),M.setPixelDataRaw(I,De+1,$e.g),M.setPixelDataRaw(I,De+2,$e.b);else if(i.dithering=="fs"){M.setPixelDataRaw(I,De,$e.r),M.setPixelDataRaw(I,De+1,$e.g),M.setPixelDataRaw(I,De+2,$e.b);let ue=M.pixelDiff(gt,$e);if(ge<I.width-1){let Ge=M.getPixelDataRGB(I,ge+1,W);i.cap?M.setPixelDataRGB(I,ge+1,W,{r:M.clamp(0,255,Ge.r+ue.r*7/16),g:M.clamp(0,255,Ge.g+ue.g*7/16),b:M.clamp(0,255,Ge.b+ue.b*7/16)}):M.setPixelDataRGB(I,ge+1,W,{r:Ge.r+ue.r*7/16,g:Ge.g+ue.g*7/16,b:Ge.b+ue.b*7/16})}if(W<I.height-1){if(ge>0){let Be=M.getPixelDataRGB(I,ge-1,W+1);i.cap?M.setPixelDataRGB(I,ge-1,W+1,{r:M.clamp(0,255,Be.r+ue.r*3/16),g:M.clamp(0,255,Be.g+ue.g*3/16),b:M.clamp(0,255,Be.b+ue.b*3/16)}):M.setPixelDataRGB(I,ge-1,W+1,{r:Be.r+ue.r*3/16,g:Be.g+ue.g*3/16,b:Be.b+ue.b*3/16})}let Ge=M.getPixelDataRGB(I,ge,W+1);if(i.cap?M.setPixelDataRGB(I,ge,W+1,{r:M.clamp(0,255,Ge.r+ue.r*5/16),g:M.clamp(0,255,Ge.g+ue.g*5/16),b:M.clamp(0,255,Ge.b+ue.b*5/16)}):M.setPixelDataRGB(I,ge,W+1,{r:Ge.r+ue.r*5/16,g:Ge.g+ue.g*5/16,b:Ge.b+ue.b*5/16}),ge<I.width-1){let Be=M.getPixelDataRGB(I,ge+1,W+1);i.cap?M.setPixelDataRGB(I,ge+1,W+1,{r:M.clamp(0,255,Be.r+ue.r*1/16),g:M.clamp(0,255,Be.g+ue.g*1/16),b:M.clamp(0,255,Be.b+ue.b*1/16)}):M.setPixelDataRGB(I,ge+1,W+1,{r:Be.r+ue.r*1/16,g:Be.g+ue.g*1/16,b:Be.b+ue.b*1/16})}}}else if(i.dithering=="pattern"){let ue=M.getPixelDataRGB(I,ge,W),Ge=255/We*(i.matrix[ge%i.matrix[0].length][W%i.matrix.length]-.5),Be=M.nearestPixel2({r:ue.r+Ge,g:ue.g+Ge,b:ue.b+Ge},et,i.gray_scale_nearest_pixel);M.setPixelDataRaw(I,De,Be.r),M.setPixelDataRaw(I,De+1,Be.g),M.setPixelDataRaw(I,De+2,Be.b)}}if(O.putImageData(I,0,0),i.cache){let W=new ImageData(new Uint8ClampedArray(I.data),I.width,I.height);console.log("adding",q,"to cache"),B[q]={data:W,params:Object.assign({},o),config:Object.assign({},i)}}}let le=w.getContext("2d");if(le.getImageData(0,0,u.resizedwidth,u.resizedheight),u.enable_arrows){let O=y.getContext("2d");O.fillStyle="black",O.fillRect(0,0,y.width,y.height);let I=le.getImageData(u.select_pos.x*3,u.select_pos.y*3,i.zoom_range.x*3,i.zoom_range.y*3),{grid_size:Xe,rubiks_scale:We}=i,et=M.scaleImageData(le,I,We);if(O.imageSmoothingEnabled=!1,O.putImageData(et,0,0),M.drawGrid(O,Xe/4,We,i.zoom_range.x*3,i.zoom_range.y*3),M.drawGrid(O,Xe,We*3,i.zoom_range.x*3,i.zoom_range.y*3),u.select_pos.x<0){let W=-u.select_pos.x;O.fillRect(0,0,W*We*3,y.height)}if(u.select_pos.y<0){let W=-u.select_pos.y;O.fillRect(0,0,y.width,W*We*3)}if(u.select_pos.x+i.zoom_range.x>u.resizedwidth/3){let W=u.select_pos.x+i.zoom_range.x-u.resizedwidth/3;O.fillRect(Math.max(0,y.width-W*We*3),0,y.width,y.height)}if(u.select_pos.y+i.zoom_range.y>u.resizedheight/3){let W=u.select_pos.y+i.zoom_range.y-u.resizedheight/3;O.fillRect(0,Math.max(0,y.height-W*We*3),y.width,y.height)}}if(i.show_rubiks){let O=J.getContext("2d"),Xe=w.getContext("2d").getImageData(0,0,u.resizedwidth,u.resizedheight);if(O.imageSmoothingEnabled=!1,O.drawImage(w,0,0,u.resizedwidth*i.rubiks_scale,u.resizedheight*i.rubiks_scale),i.show_grid&&i.grid_size>0){let{grid_size:We,rubiks_scale:et}=i,{width:W,height:De}=Xe;M.drawGrid(O,We,et,W,De)}}});const qe=()=>{Ie("img")},X=()=>{P()},N=()=>{Ie("rubiks")},Ue=()=>{Ie("pallette")},Ye=()=>{Ie("processing")},xe=()=>{Ie("mockup")},st=()=>{Ie("arrows")},_e=()=>{l(17,te=h),K()},se=()=>{h()};function ke(_){be[_?"unshift":"push"](()=>{j=_,l(14,j)})}const at=()=>{h()};function Ve(_){e.$$.not_equal(i.live_capture,_)&&(i.live_capture=_,l(0,i))}function Je(_){be[_?"unshift":"push"](()=>{Q=_,l(10,Q)})}function ut(_){e.$$.not_equal(u.show_debug,_)&&(u.show_debug=_,l(1,u))}function ft(_){e.$$.not_equal(i.pixelated,_)&&(i.pixelated=_,l(0,i))}function kt(_){e.$$.not_equal(i.cache,_)&&(i.cache=_,l(0,i))}function wt(_){e.$$.not_equal(i.show_rubiks,_)&&(i.show_rubiks=_,l(0,i))}function vt(_){e.$$.not_equal(i.show_grid,_)&&(i.show_grid=_,l(0,i))}function zt(){i.width=He(this.value),l(0,i)}function ae(){i.rubiks_scale=He(this.value),l(0,i)}function ht(){i.grid_size=He(this.value),l(0,i)}function yt(_){be[_?"unshift":"push"](()=>{oe=_,l(16,oe)})}function we(){i.mockup_pixel_size=He(this.value),l(0,i)}function Mt(){i.mockup_x=He(this.value),l(0,i)}function Ct(){i.mockup_y=He(this.value),l(0,i)}function ve(_){e.$$.not_equal(i.gray_scale_input,_)&&(i.gray_scale_input=_,l(0,i))}function ze(_){e.$$.not_equal(i.gray_scale_nearest_pixel,_)&&(i.gray_scale_nearest_pixel=_,l(0,i))}const Me=()=>l(0,i.dithering="",i),ye=()=>l(0,i.dithering="fs",i),Ce=()=>l(0,i.dithering="pattern",i),Pe=_=>{l(0,i.matrix=_,i)};function Re(_){e.$$.not_equal(u.allow_edit_colors,_)&&(u.allow_edit_colors=_,l(1,u))}const Le=(_,le,O)=>{$(_)};function Te(_,le){e.$$.not_equal(le.on,_)&&(le.on=_,l(0,i))}function Se(_,le){_[le].color=this.value,l(0,i)}function Pt(){i.debug_range=He(this.value),l(0,i)}function dt(_,le){_[le]=He(this.value),l(0,i)}function Qe(_){e.$$.not_equal(i.cap,_)&&(i.cap=_,l(0,i))}function Fe(){i.zoom_range.x=He(this.value),l(0,i)}function Ne(){i.zoom_range.y=He(this.value),l(0,i)}function v(_){e.$$.not_equal(u.show_steps,_)&&(u.show_steps=_,l(1,u))}function E(_){e.$$.not_equal(u.enable_arrows,_)&&(u.enable_arrows=_,l(1,u))}function Rt(_){e.$$.not_equal(u.show_zoomed,_)&&(u.show_zoomed=_,l(1,u))}function Ml(){i.screenCapturePadding.left=He(this.value),l(0,i)}function Tl(){i.screenCapturePadding.right=He(this.value),l(0,i)}function Sl(){i.screenCapturePadding.top=He(this.value),l(0,i)}function Ll(){i.screenCapturePadding.bottom=He(this.value),l(0,i)}function Fl(_){be[_?"unshift":"push"](()=>{k=_,l(6,k)})}function Nl(_){be[_?"unshift":"push"](()=>{w=_,l(8,w)})}function Ol(_){be[_?"unshift":"push"](()=>{y=_,l(9,y)})}function Al(_){be[_?"unshift":"push"](()=>{m=_,l(7,m)})}function ql(_){be[_?"unshift":"push"](()=>{J=_,l(13,J)})}function Wl(_){be[_?"unshift":"push"](()=>{J=_,l(13,J)})}function Hl(){z=this.clientHeight,p=this.clientWidth,l(5,z),l(2,p)}const jl=()=>{l(1,u.current="",u)};return e.$$.update=()=>{e.$$.dirty[0]&1&&l(33,o={loadedfile:i.loadedfile,width:i.width,height:i.height,dithering:i.dithering,gray_scale_input:i.gray_scale_input,gray_scale_nearest_pixel:i.gray_scale_nearest_pixel,pallette:i.pallette,matrix:i.matrix}),e.$$.dirty[0]&7|e.$$.dirty[1]&4&&l(18,n=JSON.stringify({ui:u,params:o,config:i,clientWidth:p},null,2))},[i,u,p,r,a,z,k,m,w,y,Q,Z,x,J,j,R,oe,te,n,d,f,K,h,C,P,D,ee,U,ie,ne,me,$,Ie,o,qe,X,N,Ue,Ye,xe,st,_e,se,ke,at,Ve,Je,ut,ft,kt,wt,vt,zt,ae,ht,yt,we,Mt,Ct,ve,ze,Me,ye,Ce,Pe,Re,Le,Te,Se,Pt,dt,Qe,Fe,Ne,v,E,Rt,Ml,Tl,Sl,Ll,Fl,Nl,Ol,Al,ql,Wl,Hl,jl]}class Gn extends Wt{constructor(t){super(),qt(this,t,In,Dn,At,{},null,[-1,-1,-1,-1])}}new Gn({target:document.getElementById("app")});
