(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function l(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=l(n);fetch(n.href,r)}})();function Ke(){}function zl(e,t){for(const l in t)e[l]=t[l];return e}function nl(e){return e()}function Et(){return Object.create(null)}function je(e){e.forEach(nl)}function Cl(e){return typeof e=="function"}function Pt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Dl(e){return Object.keys(e).length===0}function Pl(e,t,l,o){if(e){const n=ol(e,t,l,o);return e[0](n)}}function ol(e,t,l,o){return e[1]&&o?zl(l.ctx.slice(),e[1](o(t))):l.ctx}function Rl(e,t,l,o){if(e[2]&&o){const n=e[2](o(l));if(t.dirty===void 0)return n;if(typeof n=="object"){const r=[],a=Math.max(t.dirty.length,n.length);for(let u=0;u<a;u+=1)r[u]=t.dirty[u]|n[u];return r}return t.dirty|n}return t.dirty}function Il(e,t,l,o,n,r){if(n){const a=ol(t,l,o,r);e.p(a,n)}}function Bl(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let o=0;o<l;o++)t[o]=-1;return t}return-1}function Gt(e){return e==null?"":e}function c(e,t){e.appendChild(t)}function E(e,t,l){e.insertBefore(t,l||null)}function I(e){e.parentNode.removeChild(e)}function lt(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function g(e){return document.createElement(e)}function K(e){return document.createTextNode(e)}function v(){return K(" ")}function rl(){return K("")}function T(e,t,l,o){return e.addEventListener(t,l,o),()=>e.removeEventListener(t,l,o)}function f(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Qe(e){return e===""?null:+e}function Ml(e){return Array.from(e.childNodes)}function Me(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Pe(e,t){e.value=t==null?"":t}function x(e,t,l,o){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,o?"important":"")}let _t;function El(){if(_t===void 0){_t=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{_t=!0}}return _t}function Gl(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const o=g("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const n=El();let r;return n?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=T(window,"message",a=>{a.source===o.contentWindow&&t()})):(o.src="about:blank",o.onload=()=>{r=T(o.contentWindow,"resize",t)}),c(e,o),()=>{(n||r&&o.contentWindow)&&r(),I(o)}}function S(e,t,l){e.classList[l?"add":"remove"](t)}let at;function st(e){at=e}function Tl(){if(!at)throw new Error("Function called outside component initialization");return at}function Ol(e){Tl().$$.after_update.push(e)}function sl(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(o=>o.call(this,t))}const rt=[],ve=[],pt=[],zt=[],al=Promise.resolve();let Ct=!1;function cl(){Ct||(Ct=!0,al.then(ul))}function Xe(){return cl(),al}function bt(e){pt.push(e)}function it(e){zt.push(e)}const wt=new Set;let gt=0;function ul(){const e=at;do{for(;gt<rt.length;){const t=rt[gt];gt++,st(t),Sl(t.$$)}for(st(null),rt.length=0,gt=0;ve.length;)ve.pop()();for(let t=0;t<pt.length;t+=1){const l=pt[t];wt.has(l)||(wt.add(l),l())}pt.length=0}while(rt.length);for(;zt.length;)zt.pop()();Ct=!1,wt.clear(),st(e)}function Sl(e){if(e.fragment!==null){e.update(),je(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(bt)}}const mt=new Set;let xe;function qe(){xe={r:0,c:[],p:xe}}function Je(){xe.r||je(xe.c),xe=xe.p}function B(e,t){e&&e.i&&(mt.delete(e),e.i(t))}function F(e,t,l,o){if(e&&e.o){if(mt.has(e))return;mt.add(e),xe.c.push(()=>{mt.delete(e),o&&(l&&e.d(1),o())}),e.o(t)}else o&&o()}function nt(e,t,l){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=l,l(e.$$.ctx[o]))}function Ue(e){e&&e.c()}function Le(e,t,l,o){const{fragment:n,on_mount:r,on_destroy:a,after_update:u}=e.$$;n&&n.m(t,l),o||bt(()=>{const i=r.map(nl).filter(Cl);a?a.push(...i):je(i),e.$$.on_mount=[]}),u.forEach(bt)}function Fe(e,t){const l=e.$$;l.fragment!==null&&(je(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Ll(e,t){e.$$.dirty[0]===-1&&(rt.push(e),cl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Rt(e,t,l,o,n,r,a,u=[-1]){const i=at;st(e);const s=e.$$={fragment:null,ctx:null,props:r,update:Ke,not_equal:n,bound:Et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:Et(),dirty:u,skip_bound:!1,root:t.target||i.$$.root};a&&a(s.root);let m=!1;if(s.ctx=l?l(e,t.props||{},(k,b,...D)=>{const d=D.length?D[0]:b;return s.ctx&&n(s.ctx[k],s.ctx[k]=d)&&(!s.skip_bound&&s.bound[k]&&s.bound[k](d),m&&Ll(e,k)),b}):[],s.update(),m=!0,je(s.before_update),s.fragment=o?o(s.ctx):!1,t.target){if(t.hydrate){const k=Ml(t.target);s.fragment&&s.fragment.l(k),k.forEach(I)}else s.fragment&&s.fragment.c();t.intro&&B(e.$$.fragment),Le(e,t.target,t.anchor,t.customElement),ul()}st(i)}class It{$destroy(){Fe(this,1),this.$destroy=Ke}$on(t,l){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(l),()=>{const n=o.indexOf(l);n!==-1&&o.splice(n,1)}}$set(t){this.$$set&&!Dl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Fl(e){let t;return{c(){t=g("input"),f(t,"type","radio"),t.checked=e[0]},m(l,o){E(l,t,o)},p(l,o){o&1&&(t.checked=l[0])},d(l){l&&I(t)}}}function Nl(e){let t;return{c(){t=g("input"),f(t,"type","checkbox"),t.checked=e[0]},m(l,o){E(l,t,o)},p(l,o){o&1&&(t.checked=l[0])},d(l){l&&I(t)}}}function Al(e){let t,l,o,n,r,a,u,i,s;const m=e[7].default,k=Pl(m,e,e[6],null);function b(h,p){if(h[3]=="checkbox")return Nl;if(h[3]=="radio")return Fl}let D=b(e),d=D&&D(e);return{c(){t=g("div"),k&&k.c(),l=v(),d&&d.c(),o=v(),n=K(e[1]),f(t,"class",r="p-2 "+(e[0]?e[2]:"")+" rounded-lg border-solid border-[1px] text-center svelte-1t1l2hh"),f(t,"style",a=e[4]?`background-color: ${e[4]}`:"")},m(h,p){E(h,t,p),k&&k.m(t,null),c(t,l),d&&d.m(t,null),c(t,o),c(t,n),u=!0,i||(s=[T(t,"click",e[5]),T(t,"click",e[8])],i=!0)},p(h,[p]){k&&k.p&&(!u||p&64)&&Il(k,m,h,h[6],u?Rl(m,h[6],p,null):Bl(h[6]),null),D===(D=b(h))&&d?d.p(h,p):(d&&d.d(1),d=D&&D(h),d&&(d.c(),d.m(t,o))),(!u||p&2)&&Me(n,h[1]),(!u||p&5&&r!==(r="p-2 "+(h[0]?h[2]:"")+" rounded-lg border-solid border-[1px] text-center svelte-1t1l2hh"))&&f(t,"class",r),(!u||p&16&&a!==(a=h[4]?`background-color: ${h[4]}`:""))&&f(t,"style",a)},i(h){u||(B(k,h),u=!0)},o(h){F(k,h),u=!1},d(h){h&&I(t),k&&k.d(h),d&&d.d(),i=!1,je(s)}}}function Ul(e,t,l){let{$$slots:o={},$$scope:n}=t,{checked:r=!1}=t,{text:a="O"}=t,{toggleClass:u="bg-gray-200"}=t,{type:i="checkbox"}=t,{bgcolor:s=""}=t,m=()=>{l(0,r=!r)};function k(b){sl.call(this,e,b)}return e.$$set=b=>{"checked"in b&&l(0,r=b.checked),"text"in b&&l(1,a=b.text),"toggleClass"in b&&l(2,u=b.toggleClass),"type"in b&&l(3,i=b.type),"bgcolor"in b&&l(4,s=b.bgcolor),"$$scope"in b&&l(6,n=b.$$scope)},[r,a,u,i,s,m,n,o,k]}class Ve extends It{constructor(t){super(),Rt(this,t,Ul,Al,Pt,{checked:0,text:1,toggleClass:2,type:3,bgcolor:4})}}function Tt(e,t,l){const o=e.slice();return o[5]=t[l],o}function Ot(e){let t;return{c(){t=g("div"),x(t,"background-color",e[5]),f(t,"class","grow h-4")},m(l,o){E(l,t,o)},p:Ke,d(l){l&&I(t)}}}function jl(e){let t,l,o,n,r=e[2],a=[];for(let u=0;u<r.length;u+=1)a[u]=Ot(Tt(e,r,u));return{c(){t=g("button"),l=g("div");for(let u=0;u<a.length;u+=1)a[u].c();f(l,"class","flex border-[1px] border-black w-12"),f(t,"class","p-2 rounded-lg border-solid border-2 text-center"),S(t,"bg-gray-200",e[1]==e[0])},m(u,i){E(u,t,i),c(t,l);for(let s=0;s<a.length;s+=1)a[s].m(l,null);o||(n=T(t,"click",e[4]),o=!0)},p(u,[i]){if(i&4){r=u[2];let s;for(s=0;s<r.length;s+=1){const m=Tt(u,r,s);a[s]?a[s].p(m,i):(a[s]=Ot(m),a[s].c(),a[s].m(l,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}i&3&&S(t,"bg-gray-200",u[1]==u[0])},i:Ke,o:Ke,d(u){u&&I(t),lt(a,u),o=!1,n()}}}function Hl(e,t,l){let{color:o=""}=t,{selected:n=""}=t,{name:r="default"}=t,a=o.split(",");function u(i){sl.call(this,e,i)}return e.$$set=i=>{"color"in i&&l(0,o=i.color),"selected"in i&&l(1,n=i.selected),"name"in i&&l(3,r=i.name)},[o,n,a,r,u]}class Wl extends It{constructor(t){super(),Rt(this,t,Hl,jl,Pt,{color:0,selected:1,name:3})}}const Dt=(e,t)=>({r:e.r-t.r,g:e.g-t.g,b:e.b-t.b}),ql=(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}),Jl=(e,t,l)=>Math.max(e,Math.min(t,l));let vt={};const fl=e=>{if(vt[e])return vt[e];{if(e.length==4){let[r,a,u,i]=e.split("");e="#"+a+a+u+u+i+i}let t=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16),n={r:t,g:l,b:o};return vt[e]=n,n}},Bt=(e,t,l)=>{let o=Dt(l?hl(e):e,t),n=Math.abs(o.r),r=Math.abs(o.g),a=Math.abs(o.b);return n*n+a*a+r*r};let yt={};const Vl=(e,t,l)=>{let o;yt[t]?o=yt[t]:(o=t.split(","),yt[t]=o);let n=o[0],r=null;return o.forEach((a,u)=>{let i=fl(a),s=Bt(i,e,l);(r==null||r>s)&&(r=s,n=i)}),n},Kl=(e,t,l)=>{let o=t[0],n=null;return t.forEach((r,a)=>{let u=Bt(r,e,l);(n==null||n>u)&&(n=u,o=r)}),o},dl=e=>Math.floor((e.r+e.g+e.b)/3),Yl=e=>"#"+e.r.toString(16).padStart(2,"0")+e.g.toString(16).padStart(2,"0")+e.b.toString(16).padStart(2,"0"),hl=e=>{let t=dl(e);return{r:t,g:t,b:t}};function Ql(e){let t=0;for(let l=0,o=e.length;l<o;l++){let n=e.charCodeAt(l);t=(t<<5)-t+n,t|=0}return t}const Mt=(e,t,l)=>(t*l+e)*4;let Xl=function(e,t,l,o){let n=e.width,r=Mt(t,l,n);e.data[r]=o.r,e.data[r+1]=o.g,e.data[r+2]=o.b},Zl=function(e,t,l){e.data[t]=l},xl=function(e,t,l){let o=e.width,n=Mt(t,l,o);return{r:e.data[n],g:e.data[n+1],b:e.data[n+2]}};const P={getPixelDataRGB:xl,setPixelDataRGB:Xl,setPixelDataRaw:Zl,calc_i:Mt,hashCode:Ql,Rgb2Gray:hl,RgbGrayValue:dl,RgbToHex:Yl,nearestPixel:Vl,nearestPixel2:Kl,clamp:Jl,pixelAdd:ql,pixelDiff:Dt,hexToRgb:fl,calculatePixelDifference:Bt};function St(e,t,l){const o=e.slice();return o[82]=t[l],o}function Lt(e,t,l){const o=e.slice();return o[85]=t[l],o[86]=t,o[87]=l,o}function Ft(e,t,l){const o=e.slice();return o[88]=t[l],o[89]=t,o[90]=l,o}function Nt(e,t,l){const o=e.slice();return o[91]=t[l],o}function At(e,t,l){const o=e.slice();return o[94]=t[l],o}function Ut(e){let t,l,o,n,r,a,u,i,s,m,k;function b(d){e[42](d)}let D={text:"Live"};return e[0].live_capture!==void 0&&(D.checked=e[0].live_capture),r=new Ve({props:D}),ve.push(()=>nt(r,"checked",b)),{c(){t=g("video"),l=v(),o=g("button"),o.innerHTML='<i class="fa fa-camera"></i>',n=v(),Ue(r.$$.fragment),u=v(),i=g("canvas"),x(t,"max-height","40px"),x(t,"border","1px solid black"),t.autoplay=!0,f(o,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),x(i,"width","auto"),x(i,"max-height","40px"),x(i,"border","1px solid black"),f(i,"width",e[9]),f(i,"height",e[10]),f(i,"class","svelte-4zyt2z")},m(d,h){E(d,t,h),e[40](t),E(d,l,h),E(d,o,h),E(d,n,h),Le(r,d,h),E(d,u,h),E(d,i,h),e[43](i),s=!0,m||(k=T(o,"click",e[41]),m=!0)},p(d,h){const p={};!a&&h[0]&1&&(a=!0,p.checked=d[0].live_capture,it(()=>a=!1)),r.$set(p),(!s||h[0]&512)&&f(i,"width",d[9]),(!s||h[0]&1024)&&f(i,"height",d[10])},i(d){s||(B(r.$$.fragment,d),s=!0)},o(d){F(r.$$.fragment,d),s=!1},d(d){d&&I(t),e[40](null),d&&I(l),d&&I(o),d&&I(n),Fe(r,d),d&&I(u),d&&I(i),e[43](null),m=!1,k()}}}function jt(e){let t,l,o,n,r,a=!1;return{c(){t=g("div"),l=g("div"),o=g("div"),n=g("div"),f(n,"class","d-block"),f(o,"class","flex"),f(l,"class","flex flex-col"),f(t,"class","text-black p-2")},m(u,i){E(u,t,i),c(t,l),c(l,o),c(o,n),r=!0},p(u,i){},i(u){r||(B(a),r=!0)},o(u){F(a),r=!1},d(u){u&&I(t)}}}function Ht(e){let t,l,o,n,r,a,u,i,s,m,k,b,D,d,h,p,W,Y=e[1].resizedwidth+"",A,fe,O=e[1].resizedheight+"",Re,X,de=e[1].resizedwidth*e[1].resizedheight+"",ue,L,z,le,he=e[1].resizedheight*e[1].resizedwidth/9+"",$,q,R,M,U,J,Ie,Ee=e[0].rubiks_scale+"",De,ie,Ge,Ne,_e,ee,Ae,Te=e[0].grid_size+"",Ye,Z,te,He,We=!1;function $e(j){e[48](j)}let Ze={text:"Show Grid"};return e[0].show_grid!==void 0&&(Ze.checked=e[0].show_grid),u=new Ve({props:Ze}),ve.push(()=>nt(u,"checked",$e)),{c(){t=g("div"),l=g("h2"),l.textContent="Output Options",o=v(),n=g("div"),r=g("div"),a=v(),Ue(u.$$.fragment),s=v(),m=g("div"),k=g("span"),k.textContent="Width",b=v(),D=g("input"),h=v(),p=g("span"),W=K("Resolution: "),A=K(Y),fe=K(" x "),Re=K(O),X=K(" = "),ue=K(de),L=v(),z=g("br"),le=K(`\r
                 Cubes Needed: `),$=K(he),q=v(),R=g("div"),M=K(`Scale\r
                `),U=g("input"),J=v(),Ie=g("span"),De=K(Ee),ie=v(),Ge=g("span"),Ge.textContent="\xA0",Ne=K(`\r
                Grid Size\r
                `),_e=g("input"),ee=v(),Ae=g("span"),Ye=K(Te),f(l,"class","svelte-4zyt2z"),f(r,"class","flex"),f(k,"class","p-2 svelte-4zyt2z"),x(D,"width","200px"),f(D,"type","range"),f(D,"min","3"),f(D,"max",d=e[0].max_width),f(D,"step","3"),f(D,"class","svelte-4zyt2z"),f(m,"class","flex slider-wrapper svelte-4zyt2z"),f(U,"type","range"),f(U,"max","40"),x(Ge,"margin-left","10px"),f(_e,"type","range"),f(_e,"max","10"),f(R,"class","flex"),x(R,"display","none"),f(n,"class","flex flex-col"),f(t,"class","text-black p-2")},m(j,ge){E(j,t,ge),c(t,l),c(t,o),c(t,n),c(n,r),c(r,a),Le(u,r,null),c(n,s),c(n,m),c(m,k),c(m,b),c(m,D),Pe(D,e[0].width),c(n,h),c(n,p),c(p,W),c(p,A),c(p,fe),c(p,Re),c(p,X),c(p,ue),c(p,L),c(p,z),c(p,le),c(p,$),c(n,q),c(n,R),c(R,M),c(R,U),Pe(U,e[0].rubiks_scale),c(R,J),c(R,Ie),c(Ie,De),c(R,ie),c(R,Ge),c(R,Ne),c(R,_e),Pe(_e,e[0].grid_size),c(R,ee),c(R,Ae),c(Ae,Ye),Z=!0,te||(He=[T(D,"change",e[49]),T(D,"input",e[49]),T(U,"change",e[50]),T(U,"input",e[50]),T(_e,"change",e[51]),T(_e,"input",e[51])],te=!0)},p(j,ge){const V={};!i&&ge[0]&1&&(i=!0,V.checked=j[0].show_grid,it(()=>i=!1)),u.$set(V),(!Z||ge[0]&1&&d!==(d=j[0].max_width))&&f(D,"max",d),ge[0]&1&&Pe(D,j[0].width),(!Z||ge[0]&2)&&Y!==(Y=j[1].resizedwidth+"")&&Me(A,Y),(!Z||ge[0]&2)&&O!==(O=j[1].resizedheight+"")&&Me(Re,O),(!Z||ge[0]&2)&&de!==(de=j[1].resizedwidth*j[1].resizedheight+"")&&Me(ue,de),(!Z||ge[0]&2)&&he!==(he=j[1].resizedheight*j[1].resizedwidth/9+"")&&Me($,he),ge[0]&1&&Pe(U,j[0].rubiks_scale),(!Z||ge[0]&1)&&Ee!==(Ee=j[0].rubiks_scale+"")&&Me(De,Ee),ge[0]&1&&Pe(_e,j[0].grid_size),(!Z||ge[0]&1)&&Te!==(Te=j[0].grid_size+"")&&Me(Ye,Te)},i(j){Z||(B(We),B(u.$$.fragment,j),Z=!0)},o(j){F(We),F(u.$$.fragment,j),Z=!1},d(j){j&&I(t),Fe(u),te=!1,je(He)}}}function Wt(e){let t,l,o,n,r,a,u,i,s,m=e[0].mockup_pixel_size+"",k,b,D,d,h,p,W,Y=e[0].mockup_x+"",A,fe,O,Re,X,de=e[0].mockup_y+"",ue,L,z;function le(R,M){return R[1].mockup_hovering?$l:ei}let he=le(e),$=he(e),q=e[0].has_mockup&&qt(e);return{c(){t=g("div"),l=g("div"),$.c(),o=v(),q&&q.c(),n=v(),r=g("canvas"),a=K(`\r
\r
            Mock Up Pixel\r
            `),u=g("input"),i=v(),s=g("span"),k=K(m),b=v(),D=g("br"),d=K(`\r
            Mock Up Position\r
            `),h=g("input"),p=v(),W=g("span"),A=K(Y),fe=v(),O=g("input"),Re=v(),X=g("span"),ue=K(de),x(r,"width","auto"),f(r,"class","svelte-4zyt2z"),x(l,"height","auto"),f(l,"ondragover","return false"),f(l,"id","mockup_drop_zone"),f(l,"class","bg-red-500 h-full p-4"),f(u,"type","range"),f(u,"min","1"),f(u,"max","25"),f(h,"type","range"),f(h,"min","-500"),f(h,"max","500"),f(O,"type","range"),f(O,"min","-500"),f(O,"max","500"),f(t,"class","text-black p-2")},m(R,M){E(R,t,M),c(t,l),$.m(l,null),c(l,o),q&&q.m(l,null),c(l,n),c(l,r),e[52](r),c(t,a),c(t,u),Pe(u,e[0].mockup_pixel_size),c(t,i),c(t,s),c(s,k),c(t,b),c(t,D),c(t,d),c(t,h),Pe(h,e[0].mockup_x),c(t,p),c(t,W),c(W,A),c(t,fe),c(t,O),Pe(O,e[0].mockup_y),c(t,Re),c(t,X),c(X,ue),L||(z=[T(l,"drop",e[25]),T(l,"dragenter",e[26]),T(l,"dragleave",e[27]),T(u,"change",e[53]),T(u,"input",e[53]),T(h,"change",e[54]),T(h,"input",e[54]),T(O,"change",e[55]),T(O,"input",e[55])],L=!0)},p(R,M){he!==(he=le(R))&&($.d(1),$=he(R),$&&($.c(),$.m(l,o))),R[0].has_mockup?q?q.p(R,M):(q=qt(R),q.c(),q.m(l,n)):q&&(q.d(1),q=null),M[0]&1&&Pe(u,R[0].mockup_pixel_size),M[0]&1&&m!==(m=R[0].mockup_pixel_size+"")&&Me(k,m),M[0]&1&&Pe(h,R[0].mockup_x),M[0]&1&&Y!==(Y=R[0].mockup_x+"")&&Me(A,Y),M[0]&1&&Pe(O,R[0].mockup_y),M[0]&1&&de!==(de=R[0].mockup_y+"")&&Me(ue,de)},d(R){R&&I(t),$.d(),q&&q.d(),e[52](null),L=!1,je(z)}}}function $l(e){let t;return{c(){t=K("Release to load file")},m(l,o){E(l,t,o)},d(l){l&&I(t)}}}function ei(e){let t;return{c(){t=K("Drop MockUp Image here")},m(l,o){E(l,t,o)},d(l){l&&I(t)}}}function qt(e){let t,l,o;return{c(){t=g("button"),t.textContent="Remove mockup",f(t,"class","p-2 border-[1px] border-black")},m(n,r){E(n,t,r),l||(o=T(t,"click",e[28]),l=!0)},p:Ke,d(n){n&&I(t),l=!1,o()}}}function Jt(e){let t,l,o,n,r,a,u,i,s,m,k,b,D,d,h,p,W,Y,A,fe,O;function Re(z){e[56](z)}let X={text:"Make Input Image Gray First"};e[0].gray_scale_input!==void 0&&(X.checked=e[0].gray_scale_input),r=new Ve({props:X}),ve.push(()=>nt(r,"checked",Re));function de(z){e[57](z)}let ue={text:"Use Gray Value To Calculate Nearest Pixel"};e[0].gray_scale_nearest_pixel!==void 0&&(ue.checked=e[0].gray_scale_nearest_pixel),s=new Ve({props:ue}),ve.push(()=>nt(s,"checked",de)),h=new Ve({props:{text:"None",type:"radio",checked:e[0].dithering==""}}),h.$on("click",e[58]),W=new Ve({props:{text:"Floyd Steinberg",type:"radio",checked:e[0].dithering=="fs"}}),W.$on("click",e[59]),A=new Ve({props:{text:"Patterned",type:"radio",checked:e[0].dithering=="pattern"}}),A.$on("click",e[60]);let L=e[0].dithering=="pattern"&&Vt(e);return{c(){t=g("div"),l=g("h2"),l.textContent="Processing Options",o=v(),n=g("div"),Ue(r.$$.fragment),u=v(),i=g("div"),Ue(s.$$.fragment),k=v(),b=g("div"),D=g("span"),D.textContent="Dithering:",d=v(),Ue(h.$$.fragment),p=v(),Ue(W.$$.fragment),Y=v(),Ue(A.$$.fragment),fe=v(),L&&L.c(),f(l,"class","svelte-4zyt2z"),f(n,"class","flex"),f(i,"class","flex"),f(D,"class","p-2"),f(b,"class","flex"),f(t,"class","text-black p-2")},m(z,le){E(z,t,le),c(t,l),c(t,o),c(t,n),Le(r,n,null),c(t,u),c(t,i),Le(s,i,null),c(t,k),c(t,b),c(b,D),c(b,d),Le(h,b,null),c(b,p),Le(W,b,null),c(b,Y),Le(A,b,null),c(t,fe),L&&L.m(t,null),O=!0},p(z,le){const he={};!a&&le[0]&1&&(a=!0,he.checked=z[0].gray_scale_input,it(()=>a=!1)),r.$set(he);const $={};!m&&le[0]&1&&(m=!0,$.checked=z[0].gray_scale_nearest_pixel,it(()=>m=!1)),s.$set($);const q={};le[0]&1&&(q.checked=z[0].dithering==""),h.$set(q);const R={};le[0]&1&&(R.checked=z[0].dithering=="fs"),W.$set(R);const M={};le[0]&1&&(M.checked=z[0].dithering=="pattern"),A.$set(M),z[0].dithering=="pattern"?L?L.p(z,le):(L=Vt(z),L.c(),L.m(t,null)):L&&(L.d(1),L=null)},i(z){O||(B(r.$$.fragment,z),B(s.$$.fragment,z),B(h.$$.fragment,z),B(W.$$.fragment,z),B(A.$$.fragment,z),O=!0)},o(z){F(r.$$.fragment,z),F(s.$$.fragment,z),F(h.$$.fragment,z),F(W.$$.fragment,z),F(A.$$.fragment,z),O=!1},d(z){z&&I(t),Fe(r),Fe(s),Fe(h),Fe(W),Fe(A),L&&L.d()}}}function Vt(e){let t,l,o,n=e[18],r=[];for(let a=0;a<n.length;a+=1)r[a]=Kt(At(e,n,a));return{c(){t=g("div"),l=g("span"),l.textContent="Pattern Matrix Size:",o=v();for(let a=0;a<r.length;a+=1)r[a].c();f(l,"class","h-10 p-2")},m(a,u){E(a,t,u),c(t,l),c(t,o);for(let i=0;i<r.length;i+=1)r[i].m(t,null)},p(a,u){if(u[0]&262145){n=a[18];let i;for(i=0;i<n.length;i+=1){const s=At(a,n,i);r[i]?r[i].p(s,u):(r[i]=Kt(s),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(a){a&&I(t),lt(r,a)}}}function Kt(e){let t,l=e[94].length+"",o,n,r,a;function u(){return e[61](e[94])}return{c(){t=g("button"),o=K(l),n=v(),f(t,"class","h-10 p-2 rounded-lg border-solid border-2"),S(t,"bg-gray-200",e[0].matrix==e[94])},m(i,s){E(i,t,s),c(t,o),c(t,n),r||(a=T(t,"click",u),r=!0)},p(i,s){e=i,s[0]&262145&&S(t,"bg-gray-200",e[0].matrix==e[94])},d(i){i&&I(t),r=!1,a()}}}function Yt(e){let t,l,o,n,r,a,u,i=e[17],s=[];for(let d=0;d<i.length;d+=1)s[d]=Qt(Nt(e,i,d));const m=d=>F(s[d],1,1,()=>{s[d]=null});let k=e[0].individual_pallette_colors,b=[];for(let d=0;d<k.length;d+=1)b[d]=Xt(Ft(e,k,d));const D=d=>F(b[d],1,1,()=>{b[d]=null});return{c(){t=g("div"),l=g("h2"),l.textContent="Pallettes",o=v(),n=g("div");for(let d=0;d<s.length;d+=1)s[d].c();r=v(),a=g("div");for(let d=0;d<b.length;d+=1)b[d].c();f(l,"class","svelte-4zyt2z"),f(n,"class","flex"),f(t,"class","text-black p-2"),f(a,"class","flex px-2")},m(d,h){E(d,t,h),c(t,l),c(t,o),c(t,n);for(let p=0;p<s.length;p+=1)s[p].m(n,null);E(d,r,h),E(d,a,h);for(let p=0;p<b.length;p+=1)b[p].m(a,null);u=!0},p(d,h){if(h[0]&537001985){i=d[17];let p;for(p=0;p<i.length;p+=1){const W=Nt(d,i,p);s[p]?(s[p].p(W,h),B(s[p],1)):(s[p]=Qt(W),s[p].c(),B(s[p],1),s[p].m(n,null))}for(qe(),p=i.length;p<s.length;p+=1)m(p);Je()}if(h[0]&1){k=d[0].individual_pallette_colors;let p;for(p=0;p<k.length;p+=1){const W=Ft(d,k,p);b[p]?(b[p].p(W,h),B(b[p],1)):(b[p]=Xt(W),b[p].c(),B(b[p],1),b[p].m(a,null))}for(qe(),p=k.length;p<b.length;p+=1)D(p);Je()}},i(d){if(!u){for(let h=0;h<i.length;h+=1)B(s[h]);for(let h=0;h<k.length;h+=1)B(b[h]);u=!0}},o(d){s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)F(s[h]);b=b.filter(Boolean);for(let h=0;h<b.length;h+=1)F(b[h]);u=!1},d(d){d&&I(t),lt(s,d),d&&I(r),d&&I(a),lt(b,d)}}}function Qt(e){let t,l;function o(...n){return e[62](e[91],...n)}return t=new Wl({props:{selected:e[0].pallette,name:e[91].name,color:e[91].colors}}),t.$on("click",o),{c(){Ue(t.$$.fragment)},m(n,r){Le(t,n,r),l=!0},p(n,r){e=n;const a={};r[0]&1&&(a.selected=e[0].pallette),t.$set(a)},i(n){l||(B(t.$$.fragment,n),l=!0)},o(n){F(t.$$.fragment,n),l=!1},d(n){Fe(t,n)}}}function Xt(e){let t,l,o,n,r;function a(i){e[63](i,e[88])}let u={text:"",toggleClass:"",bgcolor:e[88].color};return e[88].on!==void 0&&(u.checked=e[88].on),l=new Ve({props:u}),ve.push(()=>nt(l,"checked",a)),{c(){t=g("div"),Ue(l.$$.fragment),n=v(),f(t,"style","")},m(i,s){E(i,t,s),Le(l,t,null),c(t,n),r=!0},p(i,s){e=i;const m={};s[0]&1&&(m.bgcolor=e[88].color),!o&&s[0]&1&&(o=!0,m.checked=e[88].on,it(()=>o=!1)),l.$set(m)},i(i){r||(B(l.$$.fragment,i),r=!0)},o(i){F(l.$$.fragment,i),r=!1},d(i){i&&I(t),Fe(l)}}}function Zt(e){let t,l,o,n,r,a,u,i=e[0].dithering=="pattern"&&xt(e),s=e[0].dithering=="fs"&&!1;return{c(){t=g("code"),l=K(e[16]),o=v(),n=v(),i&&i.c(),r=v(),s&&s.c(),a=rl()},m(m,k){E(m,t,k),c(t,l),E(m,o,k),E(m,n,k),i&&i.m(m,k),E(m,r,k),s&&s.m(m,k),E(m,a,k),u=!0},p(m,k){(!u||k[0]&65536)&&Me(l,m[16]),m[0].dithering=="pattern"?i?i.p(m,k):(i=xt(m),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),m[0].dithering=="fs",s&&(qe(),F(s,1,1,()=>{s=null}),Je())},i(m){u||(B(s),u=!0)},o(m){F(s),u=!1},d(m){m&&I(t),m&&I(o),m&&I(n),i&&i.d(m),m&&I(r),s&&s.d(m),m&&I(a)}}}function xt(e){let t,l,o,n=e[0].matrix,r=[];for(let a=0;a<n.length;a+=1)r[a]=el(St(e,n,a));return{c(){t=K(`Matrix Vectors\r
            `),l=g("div");for(let a=0;a<r.length;a+=1)r[a].c();f(l,"class",o=Gt(`grid grid-cols-${e[0].matrix[0].length} w-fit`)+" svelte-4zyt2z")},m(a,u){E(a,t,u),E(a,l,u);for(let i=0;i<r.length;i+=1)r[i].m(l,null)},p(a,u){if(u[0]&1){n=a[0].matrix;let i;for(i=0;i<n.length;i+=1){const s=St(a,n,i);r[i]?r[i].p(s,u):(r[i]=el(s),r[i].c(),r[i].m(l,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}u[0]&1&&o!==(o=Gt(`grid grid-cols-${a[0].matrix[0].length} w-fit`)+" svelte-4zyt2z")&&f(l,"class",o)},d(a){a&&I(t),a&&I(l),lt(r,a)}}}function $t(e){let t,l,o,n=e[85]+"",r,a,u,i;function s(){e[65].call(l,e[86],e[87])}return{c(){t=g("div"),l=g("input"),o=v(),r=K(n),a=v(),f(l,"type","range"),f(l,"step","0.01"),f(l,"max","1.0"),f(l,"min","0.0"),f(t,"class","p-2 svelte-4zyt2z")},m(m,k){E(m,t,k),c(t,l),Pe(l,e[85]),c(t,o),c(t,r),c(t,a),u||(i=[T(l,"change",s),T(l,"input",s)],u=!0)},p(m,k){e=m,k[0]&1&&Pe(l,e[85]),k[0]&1&&n!==(n=e[85]+"")&&Me(r,n)},d(m){m&&I(t),u=!1,je(i)}}}function el(e){let t,l=e[82],o=[];for(let n=0;n<l.length;n+=1)o[n]=$t(Lt(e,l,n));return{c(){for(let n=0;n<o.length;n+=1)o[n].c();t=rl()},m(n,r){for(let a=0;a<o.length;a+=1)o[a].m(n,r);E(n,t,r)},p(n,r){if(r[0]&1){l=n[82];let a;for(a=0;a<l.length;a+=1){const u=Lt(n,l,a);o[a]?o[a].p(u,r):(o[a]=$t(u),o[a].c(),o[a].m(t.parentNode,t))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(n){lt(o,n),n&&I(t)}}}function tl(e){let t;return{c(){t=g("div"),t.textContent="Drop Image Here to Load",f(t,"class","h-full w-full flex justify-center items-center bg-gray-300")},m(l,o){E(l,t,o)},d(l){l&&I(t)}}}function ti(e){let t,l,o;return{c(){t=g("canvas"),f(t,"id","rubiks_canvas"),f(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),f(t,"height",o=e[1].resizedheight*e[0].rubiks_scale),f(t,"class","svelte-4zyt2z"),S(t,"shown",e[3]&&e[0].show_rubiks),S(t,"pixelated",e[0].pixelated)},m(n,r){E(n,t,r),e[72](t)},p(n,r){r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&f(t,"width",l),r[0]&3&&o!==(o=n[1].resizedheight*n[0].rubiks_scale)&&f(t,"height",o),r[0]&9&&S(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&S(t,"pixelated",n[0].pixelated)},d(n){n&&I(t),e[72](null)}}}function li(e){let t,l,o;return{c(){t=g("canvas"),x(t,"position","absolute"),x(t,"top",e[4]/2-e[1].resizedheight*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_y*e[2]/e[1].mockupwidth+"px"),x(t,"left",e[2]/2-e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_x*e[2]/e[1].mockupwidth+"px"),x(t,"width",e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth+"px"),f(t,"id","rubiks_canvas"),f(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),f(t,"height",o=e[1].resizedheight*e[0].rubiks_scale),f(t,"class","svelte-4zyt2z"),S(t,"shown",e[3]&&e[0].show_rubiks),S(t,"pixelated",e[0].pixelated)},m(n,r){E(n,t,r),e[71](t)},p(n,r){r[0]&23&&x(t,"top",n[4]/2-n[1].resizedheight*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_y*n[2]/n[1].mockupwidth+"px"),r[0]&7&&x(t,"left",n[2]/2-n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_x*n[2]/n[1].mockupwidth+"px"),r[0]&7&&x(t,"width",n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth+"px"),r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&f(t,"width",l),r[0]&3&&o!==(o=n[1].resizedheight*n[0].rubiks_scale)&&f(t,"height",o),r[0]&9&&S(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&S(t,"pixelated",n[0].pixelated)},d(n){n&&I(t),e[71](null)}}}function ll(e){let t;return{c(){t=g("div"),t.textContent="Drop to load image",f(t,"class","rounded-lg border-solid border-2 p-8 text-white text-center m-auto w-fit")},m(l,o){E(l,t,o)},d(l){l&&I(t)}}}function il(e){return{c:Ke,m:Ke,d:Ke}}function ii(e){let t,l,o,n,r,a,u,i,s,m,k,b,D,d,h,p,W,Y,A,fe,O,Re,X,de,ue,L,z,le,he,$,q,R,M,U,J,Ie,Ee,De,ie,Ge,Ne,_e,ee,Ae,Te,Ye,Z,te,He,We,$e,Ze,j,ge,V,ot,ct,ne=e[13]&&Ut(e);function kt(y){e[44](y)}let ut={text:"Debug"};e[1].show_debug!==void 0&&(ut.checked=e[1].show_debug),X=new Ve({props:ut}),ve.push(()=>nt(X,"checked",kt));let oe=e[1].current=="img"&&jt(),re=e[1].current=="rubiks"&&Ht(e),we=e[1].current=="mockup"&&Wt(e),se=e[1].current=="processing"&&Jt(e),ae=e[1].current=="pallette"&&Yt(e),ce=e[1].show_debug&&Zt(e),ye=!e[3]&&tl();function ft(y,G){return y[0].has_mockup?li:ti}let et=ft(e),Be=et(e),ze=!e[3]&&e[1].hovering&&ll(),Ce=e[1].resizedheight&&e[1].resizedwidth&&il();return{c(){t=g("main"),l=g("div"),o=g("div"),n=g("div"),r=v(),a=g("button"),a.innerHTML='<i class="fa fa-folder-open"></i>',u=v(),i=g("button"),i.innerHTML='<i class="fa fa-paintbrush"></i>',s=v(),m=g("button"),m.innerHTML='<i class="fa fa-cog"></i>',k=v(),b=g("button"),b.innerHTML='<i class="fa fa-table"></i>',D=v(),d=g("button"),d.textContent="Mock\xA0Up",h=v(),p=g("button"),p.innerHTML='<i class="fa fa-tv"></i>',W=v(),Y=g("button"),Y.textContent="Capture",A=v(),ne&&ne.c(),fe=v(),O=g("div"),Re=v(),Ue(X.$$.fragment),ue=v(),L=g("div"),z=g("div"),oe&&oe.c(),le=v(),re&&re.c(),he=v(),we&&we.c(),$=v(),se&&se.c(),q=v(),ae&&ae.c(),R=v(),ce&&ce.c(),M=v(),U=g("div"),J=g("div"),ye&&ye.c(),Ie=v(),Ee=g("div"),De=g("div"),ie=g("canvas"),_e=v(),ee=g("canvas"),Ye=v(),Z=g("div"),te=g("canvas"),Ze=v(),Be.c(),j=v(),ze&&ze.c(),ge=v(),Ce&&Ce.c(),f(a,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),f(i,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(i,"bg-gray-400",e[1].current=="pallette"),f(m,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(m,"bg-gray-400",e[1].current=="processing"),f(b,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(b,"bg-gray-400",e[1].current=="rubiks"),f(d,"class","hidden h-10 p-2 rounded-lg border-solid border-2 text-center"),S(d,"bg-gray-400",e[1].current=="mockup"),f(p,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(p,"bg-gray-400",e[13]),f(Y,"class","hidden h-10 p-2 rounded-lg border-solid border-2 text-center"),f(O,"class","spacer svelte-4zyt2z"),f(n,"class","flex"),f(o,"class","bg-white text-black p-2"),f(z,"class","bg-white shadow-md absolute z-10 pb-2"),x(ie,"display","none"),f(ie,"class","small svelte-4zyt2z"),f(ie,"id","canvas"),f(ie,"width",Ge=e[1].canvaswidth),f(ie,"height",Ne=e[1].canvasheight),S(ie,"shown",e[3]),S(ie,"pixelated",e[0].pixelated),f(ee,"id","output_canvas"),f(ee,"width",Ae=e[1].resizedwidth),f(ee,"height",Te=e[1].resizedheight),x(ee,"border","4px solid red"),f(ee,"class","svelte-4zyt2z"),S(ee,"small",e[0].show_rubiks),S(ee,"shown",e[3]),S(ee,"pixelated",e[0].pixelated),x(te,"position","absolute"),f(te,"id","bgcanvas"),f(te,"width",He=e[1].mockupwidth),f(te,"height",We=e[1].mockupheight),f(te,"class","svelte-4zyt2z"),bt(()=>e[70].call(te)),S(te,"shown",e[0].has_mockup),x(Z,"position","relative"),f(Z,"id","canvas_wrapper"),f(De,"class","flex-col"),f(Ee,"class","flex"),f(J,"ondragover","return false"),f(J,"id","drop_zone"),f(J,"class","h-full"),f(U,"class","h-full grow justify-center"),f(U,"style",""),f(L,"class","main relative h-full"),f(L,"style",""),f(l,"class","flex flex-col h-screen")},m(y,G){E(y,t,G),c(t,l),c(l,o),c(o,n),c(n,r),c(n,a),c(n,u),c(n,i),c(n,s),c(n,m),c(n,k),c(n,b),c(n,D),c(n,d),c(n,h),c(n,p),c(n,W),c(n,Y),c(n,A),ne&&ne.m(n,null),c(n,fe),c(n,O),c(n,Re),Le(X,n,null),c(l,ue),c(l,L),c(L,z),oe&&oe.m(z,null),c(z,le),re&&re.m(z,null),c(z,he),we&&we.m(z,null),c(z,$),se&&se.m(z,null),c(z,q),ae&&ae.m(z,null),c(z,R),ce&&ce.m(z,null),c(L,M),c(L,U),c(U,J),ye&&ye.m(J,null),c(J,Ie),c(J,Ee),c(Ee,De),c(De,ie),e[67](ie),c(De,_e),c(De,ee),e[68](ee),c(De,Ye),c(De,Z),c(Z,te),e[69](te),$e=Gl(te,e[70].bind(te)),c(Z,Ze),Be.m(Z,null),c(J,j),ze&&ze.m(J,null),c(l,ge),Ce&&Ce.m(l,null),V=!0,ot||(ct=[T(a,"click",e[33]),T(i,"click",e[34]),T(m,"click",e[35]),T(b,"click",e[36]),T(d,"click",e[37]),T(p,"click",e[38]),T(Y,"click",e[39]),T(J,"drop",e[21]),T(J,"dragenter",e[23]),T(J,"dragleave",e[24]),T(U,"click",e[73])],ot=!0)},p(y,G){(!V||G[0]&2)&&S(i,"bg-gray-400",y[1].current=="pallette"),(!V||G[0]&2)&&S(m,"bg-gray-400",y[1].current=="processing"),(!V||G[0]&2)&&S(b,"bg-gray-400",y[1].current=="rubiks"),(!V||G[0]&2)&&S(d,"bg-gray-400",y[1].current=="mockup"),(!V||G[0]&8192)&&S(p,"bg-gray-400",y[13]),y[13]?ne?(ne.p(y,G),G[0]&8192&&B(ne,1)):(ne=Ut(y),ne.c(),B(ne,1),ne.m(n,fe)):ne&&(qe(),F(ne,1,1,()=>{ne=null}),Je());const dt={};!de&&G[0]&2&&(de=!0,dt.checked=y[1].show_debug,it(()=>de=!1)),X.$set(dt),y[1].current=="img"?oe?(oe.p(y,G),G[0]&2&&B(oe,1)):(oe=jt(),oe.c(),B(oe,1),oe.m(z,le)):oe&&(qe(),F(oe,1,1,()=>{oe=null}),Je()),y[1].current=="rubiks"?re?(re.p(y,G),G[0]&2&&B(re,1)):(re=Ht(y),re.c(),B(re,1),re.m(z,he)):re&&(qe(),F(re,1,1,()=>{re=null}),Je()),y[1].current=="mockup"?we?we.p(y,G):(we=Wt(y),we.c(),we.m(z,$)):we&&(we.d(1),we=null),y[1].current=="processing"?se?(se.p(y,G),G[0]&2&&B(se,1)):(se=Jt(y),se.c(),B(se,1),se.m(z,q)):se&&(qe(),F(se,1,1,()=>{se=null}),Je()),y[1].current=="pallette"?ae?(ae.p(y,G),G[0]&2&&B(ae,1)):(ae=Yt(y),ae.c(),B(ae,1),ae.m(z,R)):ae&&(qe(),F(ae,1,1,()=>{ae=null}),Je()),y[1].show_debug?ce?(ce.p(y,G),G[0]&2&&B(ce,1)):(ce=Zt(y),ce.c(),B(ce,1),ce.m(z,null)):ce&&(qe(),F(ce,1,1,()=>{ce=null}),Je()),y[3]?ye&&(ye.d(1),ye=null):ye||(ye=tl(),ye.c(),ye.m(J,Ie)),(!V||G[0]&2&&Ge!==(Ge=y[1].canvaswidth))&&f(ie,"width",Ge),(!V||G[0]&2&&Ne!==(Ne=y[1].canvasheight))&&f(ie,"height",Ne),(!V||G[0]&8)&&S(ie,"shown",y[3]),(!V||G[0]&1)&&S(ie,"pixelated",y[0].pixelated),(!V||G[0]&2&&Ae!==(Ae=y[1].resizedwidth))&&f(ee,"width",Ae),(!V||G[0]&2&&Te!==(Te=y[1].resizedheight))&&f(ee,"height",Te),(!V||G[0]&1)&&S(ee,"small",y[0].show_rubiks),(!V||G[0]&8)&&S(ee,"shown",y[3]),(!V||G[0]&1)&&S(ee,"pixelated",y[0].pixelated),(!V||G[0]&2&&He!==(He=y[1].mockupwidth))&&f(te,"width",He),(!V||G[0]&2&&We!==(We=y[1].mockupheight))&&f(te,"height",We),(!V||G[0]&1)&&S(te,"shown",y[0].has_mockup),et===(et=ft(y))&&Be?Be.p(y,G):(Be.d(1),Be=et(y),Be&&(Be.c(),Be.m(Z,null))),!y[3]&&y[1].hovering?ze||(ze=ll(),ze.c(),ze.m(J,null)):ze&&(ze.d(1),ze=null),y[1].resizedheight&&y[1].resizedwidth?Ce||(Ce=il(),Ce.c(),Ce.m(l,null)):Ce&&(Ce.d(1),Ce=null)},i(y){V||(B(ne),B(X.$$.fragment,y),B(oe),B(re),B(se),B(ae),B(ce),V=!0)},o(y){F(ne),F(X.$$.fragment,y),F(oe),F(re),F(se),F(ae),F(ce),V=!1},d(y){y&&I(t),ne&&ne.d(),Fe(X),oe&&oe.d(),re&&re.d(),we&&we.d(),se&&se.d(),ae&&ae.d(),ce&&ce.d(),ye&&ye.d(),e[67](null),e[68](null),e[69](null),$e(),Be.d(),ze&&ze.d(),Ce&&Ce.d(),ot=!1,je(ct)}}}function ni(e,t,l){let o,n,r=!1,a=[{name:"Rubik's Colors",colors:"#013082,#BB2328,#01B351,#FE8F25,#F5FF42,#ECF3F6"},{name:"Rubik's Colors W/O Green",colors:"#013082,#BB2328,#FE8F25,#F5FF42,#ECF3F6"},{name:"Black & White",colors:"#000,#fff"},{name:"Black, Gray, White",colors:"#000,#666,#fff"},{name:"Gray Scale",colors:"#000,#111,#222,#333,#444,#555,#666,#777,#888,#999,#aaa,#bbb,#ccc,#ddd,#eee,#fff"},{name:"RGB",colors:"#000,#f00,#0f0,#00f,#fff"},{name:"CMYK",colors:"#000,#0ff,#f0f,#ff0,#fff"}],u=[[[0/4,2/4],[3/4,1/4]],[[0/16,8/16,2/16,10/16],[12/16,4/16,14/16,6/16],[3/16,11/16,1/16,9/16],[15/16,7/16,13/16,5/16]]],i={loadedfile:"",cache:!0,cap:!1,pixelated:!1,has_mockup:!1,mockup_pixel_size:1,mockup_x:0,mockup_y:0,width:99,height:0,dithering:"fs",max_width:600,show_rubiks:!0,show_grid:!0,rubiks_scale:8,gray_scale_input:!1,gray_scale_nearest_pixel:!1,grid_size:2,pallette:a[0].colors,individual_pallette_colors:[],debug_range:-1,matrix:u[0],live_capture:!1},s={current:"",hovering:!1,mockup_hovering:!1,mockupheight:100,mockupwidth:100,show_debug:!1,resizedwidth:0,resizedheight:0,total_pixels:0,canvaswidth:100,canvasheight:100},m,k,b,D,d,h,p,W,Y,A="",fe={},O,Re=!1,X=!1;async function de(_){let C=null;try{C=await navigator.mediaDevices.getDisplayMedia(_),Re=!0,l(13,X=!0),await Xe(),l(12,O.srcObject=C,O),setTimeout(()=>{ue()},250)}catch(pe){console.error(`Error: ${pe}`)}let w=()=>{Ie&&(i.live_capture&&Ie(),setTimeout(w,1e3/15))};w()}let ue=async function(){if(h){console.log("videocanvas is not null");let _=h.getContext("2d");console.log(O.videoWidth,O.videoHeight),await Xe();let C=300,w=C*O.videoHeight/O.videoWidth;l(9,p=C),l(10,W=w),await Xe(),_.drawImage(O,0,0,C,w),console.log("loading image on video"),Ge(h)}else console.log("videocanvas is null")},L=function(_){_.preventDefault();let C=_;if(C.dataTransfer.items)if(C.dataTransfer.items.length==1){let w=C.dataTransfer.items[0];if(w.kind==="file"){const pe=w.getAsFile();ie(pe)}else console.log("kind is not file, but: "+w.kind)}else l(16,n="Error: can only load one file");l(1,s.hovering=!1,s)},z=function(){var _=document.createElement("input");_.type="file",_.onchange=C=>{var w=C.target.files[0];ie(w)},_.click()},le=function(){console.log("drag enter"),l(1,s.hovering=!0,s)},he=function(){l(1,s.hovering=!1,s)},$=function(_){_.preventDefault();let C=_;if(C.dataTransfer.items)if(C.dataTransfer.items.length==1){let w=C.dataTransfer.items[0];if(w.kind==="file"){const pe=w.getAsFile();l(0,i.has_mockup=!0,i),Ee(pe)}else console.log("kind is not file, but: "+w.kind)}else l(16,n="Error: can only load one file");l(1,s.mockup_hovering=!1,s)},q=function(){console.log("drag enter"),l(1,s.mockup_hovering=!0,s)},R=function(){l(1,s.mockup_hovering=!1,s)},M,U,J,Ie=null,Ee=function(_){let C=D.getContext("2d"),w=J.getContext("2d");U=new Image,U.onload=async function(){await Xe(),l(1,s.mockupheight=U.height,s),l(1,s.mockupwidth=U.width,s),await Xe(),C.drawImage(U,0,0,U.width,U.height),w.drawImage(U,0,0,200,200*U.height/U.width)},U.src=URL.createObjectURL(_)},De=function(){l(0,i.has_mockup=!1,i),U.src=null,J.getContext("2d").clearRect(0,0,J.width,J.height)},ie=function(_){l(13,X=!1),l(0,i.loadedfile=_.name,i);let C=b.getContext("2d");M=new Image,M.onload=async function(){l(1,s.canvasheight=M.height,s),l(1,s.canvaswidth=M.width,s),l(0,i.width=Math.min(99,s.canvaswidth),i),l(0,i.max_width=Math.min(s.canvaswidth,999),i),l(3,r=!0),fe={},await Xe(),C.drawImage(M,0,0,M.width,M.height)},M.src=URL.createObjectURL(_)},Ge=function(_){let C=b.getContext("2d");M=new Image,M.onload=async function(){l(1,s.canvasheight=M.height,s),l(1,s.canvaswidth=M.width,s),l(3,r=!0),fe={},await Xe(),C.drawImage(M,0,0,M.width,M.height)},M.src=_.toDataURL("image/png")},Ne=function(_){l(0,i.pallette=_,i),l(0,i.individual_pallette_colors=[],i),_.split(",").forEach(C=>{i.individual_pallette_colors.push({color:C,on:!0})})},_e=function(_){s.current==_?l(1,s.current="",s):l(1,s.current=_,s)};Ol(async()=>{if(!i.width){console.log("no width, ending here");return}if(!r){console.log("no image loaded, ending here");return}if(!M){console.log("originalImage is empty","ending here");return}let _=s.canvasheight/s.canvaswidth*i.width;if(l(0,i.height=_,i),l(1,s.resizedwidth=parseInt(i.width/3)*3,s),l(1,s.resizedheight=parseInt(_/3)*3,s),l(1,s.total_pixels=s.resizedheight*s.resizedwidth,s),await Xe(),_<1){console.log("height is less than 1","ending here");return}if(A=P.hashCode(JSON.stringify(o)),i.cache&&A&&fe[A]){console.log("found",o.loadedfile,A,"from cache");let C=d.getContext("2d"),w=fe[A].data,pe=new ImageData(w.data,w.width,w.height);C.putImageData(pe,0,0)}else{console.log("GENERATING IMAGE",JSON.stringify(o),A);let C=d.getContext("2d");C.drawImage(M,0,0,s.resizedwidth,s.resizedheight);let w=C.getImageData(0,0,s.resizedwidth,s.resizedheight);if(i.gray_scale_input)for(let N=0,me=0;N<w.height;N++)for(let Q=0;Q<w.width;Q++,me+=4){let tt=P.getPixelDataRGB(w,Q,N),Se=Math.round((tt.r+tt.g+tt.b)/3);P.setPixelDataRaw(w,me,Se),P.setPixelDataRaw(w,me+1,Se),P.setPixelDataRaw(w,me+2,Se)}let pe=i.pallette;i.individual_pallette_colors.length&&(pe=i.individual_pallette_colors.filter(N=>N.on).map(N=>N.color).join(","));let Oe=pe.split(",").length,ht=pe.split(",");ht.forEach((N,me)=>{ht[me]=P.hexToRgb(N)});for(let N=0,me=0;N<w.height;N++)for(let Q=0;Q<w.width;Q++,me+=4){let tt=P.getPixelDataRGB(w,Q,N),Se=P.nearestPixel2(tt,ht,i.gray_scale_nearest_pixel);if(i.dithering=="")P.setPixelDataRaw(w,me,Se.r),P.setPixelDataRaw(w,me+1,Se.g),P.setPixelDataRaw(w,me+2,Se.b);else if(i.dithering=="fs"){P.setPixelDataRaw(w,me,Se.r),P.setPixelDataRaw(w,me+1,Se.g),P.setPixelDataRaw(w,me+2,Se.b);let H=P.pixelDiff(tt,Se);if(Q<w.width-1){let be=P.getPixelDataRGB(w,Q+1,N);i.cap?P.setPixelDataRGB(w,Q+1,N,{r:P.clamp(0,255,be.r+H.r*7/16),g:P.clamp(0,255,be.g+H.g*7/16),b:P.clamp(0,255,be.b+H.b*7/16)}):P.setPixelDataRGB(w,Q+1,N,{r:be.r+H.r*7/16,g:be.g+H.g*7/16,b:be.b+H.b*7/16})}if(N<w.height-1){if(Q>0){let ke=P.getPixelDataRGB(w,Q-1,N+1);i.cap?P.setPixelDataRGB(w,Q-1,N+1,{r:P.clamp(0,255,ke.r+H.r*3/16),g:P.clamp(0,255,ke.g+H.g*3/16),b:P.clamp(0,255,ke.b+H.b*3/16)}):P.setPixelDataRGB(w,Q-1,N+1,{r:ke.r+H.r*3/16,g:ke.g+H.g*3/16,b:ke.b+H.b*3/16})}let be=P.getPixelDataRGB(w,Q,N+1);if(i.cap?P.setPixelDataRGB(w,Q,N+1,{r:P.clamp(0,255,be.r+H.r*5/16),g:P.clamp(0,255,be.g+H.g*5/16),b:P.clamp(0,255,be.b+H.b*5/16)}):P.setPixelDataRGB(w,Q,N+1,{r:be.r+H.r*5/16,g:be.g+H.g*5/16,b:be.b+H.b*5/16}),Q<w.width-1){let ke=P.getPixelDataRGB(w,Q+1,N+1);i.cap?P.setPixelDataRGB(w,Q+1,N+1,{r:P.clamp(0,255,ke.r+H.r*1/16),g:P.clamp(0,255,ke.g+H.g*1/16),b:P.clamp(0,255,ke.b+H.b*1/16)}):P.setPixelDataRGB(w,Q+1,N+1,{r:ke.r+H.r*1/16,g:ke.g+H.g*1/16,b:ke.b+H.b*1/16})}}}else if(i.dithering=="pattern"){let H=P.getPixelDataRGB(w,Q,N),be=255/Oe*(i.matrix[Q%i.matrix[0].length][N%i.matrix.length]-.5),ke=P.nearestPixel2({r:H.r+be,g:H.g+be,b:H.b+be},ht,i.gray_scale_nearest_pixel);P.setPixelDataRaw(w,me,ke.r),P.setPixelDataRaw(w,me+1,ke.g),P.setPixelDataRaw(w,me+2,ke.b)}}if(C.putImageData(w,0,0),i.cache){let N=new ImageData(new Uint8ClampedArray(w.data),w.width,w.height);console.log("adding",A,"to cache"),fe[A]={data:N,params:Object.assign({},o),config:Object.assign({},i)}}}if(i.show_rubiks){let C=Y.getContext("2d"),pe=d.getContext("2d").getImageData(0,0,s.resizedwidth,s.resizedheight);if(C.imageSmoothingEnabled=!1,C.drawImage(d,0,0,s.resizedwidth*i.rubiks_scale,s.resizedheight*i.rubiks_scale),i.show_grid&&i.grid_size>0){C.lineWidth=i.grid_size,C.strokeStyle="#000000";for(let Oe=0;Oe<pe.height;Oe++)C.beginPath(),C.moveTo(0,Oe*i.rubiks_scale),C.lineTo(pe.width*i.rubiks_scale,Oe*i.rubiks_scale),C.stroke();for(let Oe=0;Oe<pe.width;Oe++)C.beginPath(),C.moveTo(Oe*i.rubiks_scale,0),C.lineTo(Oe*i.rubiks_scale,pe.height*i.rubiks_scale),C.stroke()}}});const ee=()=>{_e("img")},Ae=()=>{z()},Te=()=>{_e("pallette")},Ye=()=>{_e("processing")},Z=()=>{_e("rubiks")},te=()=>{_e("mockup")},He=()=>{l(15,Ie=ue),de()},We=()=>{ue()};function $e(_){ve[_?"unshift":"push"](()=>{O=_,l(12,O)})}const Ze=()=>{ue()};function j(_){e.$$.not_equal(i.live_capture,_)&&(i.live_capture=_,l(0,i))}function ge(_){ve[_?"unshift":"push"](()=>{h=_,l(8,h)})}function V(_){e.$$.not_equal(s.show_debug,_)&&(s.show_debug=_,l(1,s))}function ot(_){e.$$.not_equal(i.pixelated,_)&&(i.pixelated=_,l(0,i))}function ct(_){e.$$.not_equal(i.cache,_)&&(i.cache=_,l(0,i))}function ne(_){e.$$.not_equal(i.show_rubiks,_)&&(i.show_rubiks=_,l(0,i))}function kt(_){e.$$.not_equal(i.show_grid,_)&&(i.show_grid=_,l(0,i))}function ut(){i.width=Qe(this.value),l(0,i)}function oe(){i.rubiks_scale=Qe(this.value),l(0,i)}function re(){i.grid_size=Qe(this.value),l(0,i)}function we(_){ve[_?"unshift":"push"](()=>{J=_,l(14,J)})}function se(){i.mockup_pixel_size=Qe(this.value),l(0,i)}function ae(){i.mockup_x=Qe(this.value),l(0,i)}function ce(){i.mockup_y=Qe(this.value),l(0,i)}function ye(_){e.$$.not_equal(i.gray_scale_input,_)&&(i.gray_scale_input=_,l(0,i))}function ft(_){e.$$.not_equal(i.gray_scale_nearest_pixel,_)&&(i.gray_scale_nearest_pixel=_,l(0,i))}const et=()=>l(0,i.dithering="",i),Be=()=>l(0,i.dithering="fs",i),ze=()=>l(0,i.dithering="pattern",i),Ce=_=>{l(0,i.matrix=_,i)},y=(_,C,w)=>{Ne(_.colors)};function G(_,C){e.$$.not_equal(C.on,_)&&(C.on=_,l(0,i))}function dt(){i.debug_range=Qe(this.value),l(0,i)}function _l(_,C){_[C]=Qe(this.value),l(0,i)}function gl(_){e.$$.not_equal(i.cap,_)&&(i.cap=_,l(0,i))}function pl(_){ve[_?"unshift":"push"](()=>{b=_,l(5,b)})}function ml(_){ve[_?"unshift":"push"](()=>{d=_,l(7,d)})}function bl(_){ve[_?"unshift":"push"](()=>{D=_,l(6,D)})}function kl(){k=this.clientHeight,m=this.clientWidth,l(4,k),l(2,m)}function wl(_){ve[_?"unshift":"push"](()=>{Y=_,l(11,Y)})}function vl(_){ve[_?"unshift":"push"](()=>{Y=_,l(11,Y)})}const yl=()=>{l(1,s.current="",s)};return e.$$.update=()=>{e.$$.dirty[0]&1&&l(31,o={loadedfile:i.loadedfile,width:i.width,height:i.height,dithering:i.dithering,gray_scale_input:i.gray_scale_input,gray_scale_nearest_pixel:i.gray_scale_nearest_pixel,pallette:i.pallette,individual_pallette_colors:i.individual_pallette_colors,matrix:i.matrix}),e.$$.dirty[0]&7|e.$$.dirty[1]&1&&l(16,n=("UI = "+JSON.stringify(s)+`
params: `+JSON.stringify(o)+`
CONFIG:`+JSON.stringify(i)+"CLIENT WIDTH:"+m).replaceAll(",",", "))},[i,s,m,r,k,b,D,d,h,p,W,Y,O,X,J,Ie,n,a,u,de,ue,L,z,le,he,$,q,R,De,Ne,_e,o,ee,Ae,Te,Ye,Z,te,He,We,$e,Ze,j,ge,V,ot,ct,ne,kt,ut,oe,re,we,se,ae,ce,ye,ft,et,Be,ze,Ce,y,G,dt,_l,gl,pl,ml,bl,kl,wl,vl,yl]}class oi extends It{constructor(t){super(),Rt(this,t,ni,ii,Pt,{},null,[-1,-1,-1,-1])}}new oi({target:document.getElementById("app")});
