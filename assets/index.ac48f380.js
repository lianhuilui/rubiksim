(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function l(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=l(n);fetch(n.href,o)}})();function Le(){}function ll(e){return e()}function Bt(){return Object.create(null)}function Ie(e){e.forEach(ll)}function bl(e){return typeof e=="function"}function yt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function kl(e){return Object.keys(e).length===0}function f(e,t){e.appendChild(t)}function B(e,t,l){e.insertBefore(t,l||null)}function I(e){e.parentNode.removeChild(e)}function Ye(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function m(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function C(){return J(" ")}function Ct(){return J("")}function M(e,t,l,r){return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)}function d(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Ae(e){return e===""?null:+e}function wl(e){return Array.from(e.childNodes)}function Ce(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function me(e,t){e.value=t==null?"":t}function X(e,t,l,r){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,r?"important":"")}let ft;function vl(){if(ft===void 0){ft=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ft=!0}}return ft}function zl(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=m("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const n=vl();let o;return n?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=M(window,"message",a=>{a.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{o=M(r.contentWindow,"resize",t)}),f(e,r),()=>{(n||o&&r.contentWindow)&&o(),I(r)}}function F(e,t,l){e.classList[l?"add":"remove"](t)}let et;function xe(e){et=e}function yl(){if(!et)throw new Error("Function called outside component initialization");return et}function Cl(e){yl().$$.after_update.push(e)}function nl(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(r=>r.call(this,t))}const $e=[],re=[],gt=[],wt=[],il=Promise.resolve();let vt=!1;function rl(){vt||(vt=!0,il.then(ol))}function Xe(){return rl(),il}function _t(e){gt.push(e)}function Ne(e){wt.push(e)}const mt=new Set;let dt=0;function ol(){const e=et;do{for(;dt<$e.length;){const t=$e[dt];dt++,xe(t),Dl(t.$$)}for(xe(null),$e.length=0,dt=0;re.length;)re.pop()();for(let t=0;t<gt.length;t+=1){const l=gt[t];mt.has(l)||(mt.add(l),l())}gt.length=0}while($e.length);for(;wt.length;)wt.pop()();vt=!1,mt.clear(),xe(e)}function Dl(e){if(e.fragment!==null){e.update(),Ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_t)}}const ht=new Set;let qe;function Me(){qe={r:0,c:[],p:qe}}function Fe(){qe.r||Ie(qe.c),qe=qe.p}function E(e,t){e&&e.i&&(ht.delete(e),e.i(t))}function L(e,t,l,r){if(e&&e.o){if(ht.has(e))return;ht.add(e),qe.c.push(()=>{ht.delete(e),r&&(l&&e.d(1),r())}),e.o(t)}else r&&r()}function Oe(e,t,l){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=l,l(e.$$.ctx[r]))}function ye(e){e&&e.c()}function ve(e,t,l,r){const{fragment:n,on_mount:o,on_destroy:a,after_update:c}=e.$$;n&&n.m(t,l),r||_t(()=>{const i=o.map(ll).filter(bl);a?a.push(...i):Ie(i),e.$$.on_mount=[]}),c.forEach(_t)}function ze(e,t){const l=e.$$;l.fragment!==null&&(Ie(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Pl(e,t){e.$$.dirty[0]===-1&&($e.push(e),rl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Dt(e,t,l,r,n,o,a,c=[-1]){const i=et;xe(e);const s=e.$$={fragment:null,ctx:null,props:o,update:Le,not_equal:n,bound:Bt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:Bt(),dirty:c,skip_bound:!1,root:t.target||i.$$.root};a&&a(s.root);let p=!1;if(s.ctx=l?l(e,t.props||{},(k,h,...g)=>{const u=g.length?g[0]:h;return s.ctx&&n(s.ctx[k],s.ctx[k]=u)&&(!s.skip_bound&&s.bound[k]&&s.bound[k](u),p&&Pl(e,k)),h}):[],s.update(),p=!0,Ie(s.before_update),s.fragment=r?r(s.ctx):!1,t.target){if(t.hydrate){const k=wl(t.target);s.fragment&&s.fragment.l(k),k.forEach(I)}else s.fragment&&s.fragment.c();t.intro&&E(e.$$.fragment),ve(e,t.target,t.anchor,t.customElement),ol()}xe(i)}class Pt{$destroy(){ze(this,1),this.$destroy=Le}$on(t,l){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(l),()=>{const n=r.indexOf(l);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!kl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Il(e){let t,l,r,n,o,a;return{c(){t=m("div"),l=J(e[1]),d(t,"style",r=e[0]&&e[2]?"background-color: "+e[2]+";":""),d(t,"class",n="h-10 p-2 "+(e[0]?e[3]:"")+" rounded-lg "+(e[0]?"border-solid":"border-none")+" border-2 text-center svelte-mesu7o")},m(c,i){B(c,t,i),f(t,l),o||(a=[M(t,"click",e[4]),M(t,"click",e[5])],o=!0)},p(c,[i]){i&2&&Ce(l,c[1]),i&5&&r!==(r=c[0]&&c[2]?"background-color: "+c[2]+";":"")&&d(t,"style",r),i&9&&n!==(n="h-10 p-2 "+(c[0]?c[3]:"")+" rounded-lg "+(c[0]?"border-solid":"border-none")+" border-2 text-center svelte-mesu7o")&&d(t,"class",n)},i:Le,o:Le,d(c){c&&I(t),o=!1,Ie(a)}}}function Rl(e,t,l){let{checked:r=!1}=t,{text:n="O"}=t,{bgcolor:o=""}=t,{toggleClass:a=o?"":"bg-green-600"}=t,c=()=>{console.log("toggle"),l(0,r=!r)};function i(s){nl.call(this,e,s)}return e.$$set=s=>{"checked"in s&&l(0,r=s.checked),"text"in s&&l(1,n=s.text),"bgcolor"in s&&l(2,o=s.bgcolor),"toggleClass"in s&&l(3,a=s.toggleClass)},[r,n,o,a,c,i]}class Pe extends Pt{constructor(t){super(),Dt(this,t,Rl,Il,yt,{checked:0,text:1,bgcolor:2,toggleClass:3})}}function Et(e,t,l){const r=e.slice();return r[5]=t[l],r}function Gt(e){let t,l;return{c(){t=m("span"),l=J("\xA0"),X(t,"background-color",e[5])},m(r,n){B(r,t,n),f(t,l)},p:Le,d(r){r&&I(t)}}}function Bl(e){let t,l,r,n,o,a,c=e[3],i=[];for(let s=0;s<c.length;s+=1)i[s]=Gt(Et(e,c,s));return{c(){t=m("button"),l=J(e[2]),r=C(),n=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(n,"class","svelte-63dooi"),d(t,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),F(t,"bg-green-600",e[1]==e[0])},m(s,p){B(s,t,p),f(t,l),f(t,r),f(t,n);for(let k=0;k<i.length;k+=1)i[k].m(n,null);o||(a=M(t,"click",e[4]),o=!0)},p(s,[p]){if(p&4&&Ce(l,s[2]),p&8){c=s[3];let k;for(k=0;k<c.length;k+=1){const h=Et(s,c,k);i[k]?i[k].p(h,p):(i[k]=Gt(h),i[k].c(),i[k].m(n,null))}for(;k<i.length;k+=1)i[k].d(1);i.length=c.length}p&3&&F(t,"bg-green-600",s[1]==s[0])},i:Le,o:Le,d(s){s&&I(t),Ye(i,s),o=!1,a()}}}function El(e,t,l){let{color:r=""}=t,{selected:n=""}=t,{name:o="default"}=t,a=r.split(",");function c(i){nl.call(this,e,i)}return e.$$set=i=>{"color"in i&&l(0,r=i.color),"selected"in i&&l(1,n=i.selected),"name"in i&&l(2,o=i.name)},[r,n,o,a,c]}class Gl extends Pt{constructor(t){super(),Dt(this,t,El,Bl,yt,{color:0,selected:1,name:2})}}const zt=(e,t)=>({r:e.r-t.r,g:e.g-t.g,b:e.b-t.b}),Sl=(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}),Nl=(e,t,l)=>Math.max(e,Math.min(t,l));let bt={};const sl=e=>{if(bt[e])return bt[e];{if(e.length==4){let[o,a,c,i]=e.split("");e="#"+a+a+c+c+i+i}let t=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16),n={r:t,g:l,b:r};return bt[e]=n,n}},It=(e,t,l)=>{let r=zt(l?cl(e):e,t),n=Math.abs(r.r),o=Math.abs(r.g),a=Math.abs(r.b);return n*n+a*a+o*o};let kt={};const Ol=(e,t,l)=>{let r;kt[t]?r=kt[t]:(r=t.split(","),kt[t]=r);let n=r[0],o=null;return r.forEach((a,c)=>{let i=sl(a),s=It(i,e,l);(o==null||o>s)&&(o=s,n=i)}),n},Tl=(e,t,l)=>{let r=t[0],n=null;return t.forEach((o,a)=>{let c=It(o,e,l);(n==null||n>c)&&(n=c,r=o)}),r},al=e=>Math.floor((e.r+e.g+e.b)/3),Ml=e=>"#"+e.r.toString(16).padStart(2,"0")+e.g.toString(16).padStart(2,"0")+e.b.toString(16).padStart(2,"0"),cl=e=>{let t=al(e);return{r:t,g:t,b:t}};function Fl(e){let t=0;for(let l=0,r=e.length;l<r;l++){let n=e.charCodeAt(l);t=(t<<5)-t+n,t|=0}return t}const Rt=(e,t,l)=>(t*l+e)*4;let Al=function(e,t,l,r){let n=e.width,o=Rt(t,l,n);e.data[o]=r.r,e.data[o+1]=r.g,e.data[o+2]=r.b},Ll=function(e,t,l){e.data[t]=l},Ul=function(e,t,l){let r=e.width,n=Rt(t,l,r);return{r:e.data[n],g:e.data[n+1],b:e.data[n+2]}};const R={getPixelDataRGB:Ul,setPixelDataRGB:Al,setPixelDataRaw:Ll,calc_i:Rt,hashCode:Fl,Rgb2Gray:cl,RgbGrayValue:al,RgbToHex:Ml,nearestPixel:Ol,nearestPixel2:Tl,clamp:Nl,pixelAdd:Sl,pixelDiff:zt,hexToRgb:sl,calculatePixelDifference:It};function St(e,t,l){const r=e.slice();return r[78]=t[l],r}function Nt(e,t,l){const r=e.slice();return r[81]=t[l],r[82]=t,r[83]=l,r}function Ot(e,t,l){const r=e.slice();return r[84]=t[l],r[85]=t,r[86]=l,r}function Tt(e,t,l){const r=e.slice();return r[87]=t[l],r}function Mt(e,t,l){const r=e.slice();return r[90]=t[l],r}function Ft(e){let t,l,r,n,o,a,c,i,s,p=e[0].width+"",k,h,g,u,b,Y,j,D,A,G,S,ae;function Z(z){e[39](z)}let oe={text:"Pixelated"};e[0].pixelated!==void 0&&(oe.checked=e[0].pixelated),b=new Pe({props:oe}),re.push(()=>Oe(b,"checked",Z));function $(z){e[40](z)}let U={text:"Cache"};return e[0].cache!==void 0&&(U.checked=e[0].cache),D=new Pe({props:U}),re.push(()=>Oe(D,"checked",$)),{c(){t=m("div"),l=m("div"),r=m("div"),n=m("span"),n.textContent="Width",o=C(),a=m("input"),i=C(),s=m("span"),k=J(p),h=C(),g=m("div"),u=m("div"),ye(b.$$.fragment),j=C(),ye(D.$$.fragment),d(n,"class","svelte-7lre2h"),X(a,"flex","1"),d(a,"type","range"),d(a,"min","3"),d(a,"max",c=e[0].max_width),d(a,"step","3"),d(a,"class","svelte-7lre2h"),d(s,"class","svelte-7lre2h"),d(r,"class","flex slider-wrapper svelte-7lre2h"),d(u,"class","d-block"),d(g,"class","flex"),d(l,"class","flex flex-col"),d(t,"class","bg-white text-black p-2")},m(z,K){B(z,t,K),f(t,l),f(l,r),f(r,n),f(r,o),f(r,a),me(a,e[0].width),f(r,i),f(r,s),f(s,k),f(l,h),f(l,g),f(g,u),ve(b,u,null),f(u,j),ve(D,u,null),G=!0,S||(ae=[M(a,"change",e[38]),M(a,"input",e[38])],S=!0)},p(z,K){(!G||K[0]&1&&c!==(c=z[0].max_width))&&d(a,"max",c),K[0]&1&&me(a,z[0].width),(!G||K[0]&1)&&p!==(p=z[0].width+"")&&Ce(k,p);const se={};!Y&&K[0]&1&&(Y=!0,se.checked=z[0].pixelated,Ne(()=>Y=!1)),b.$set(se);const N={};!A&&K[0]&1&&(A=!0,N.checked=z[0].cache,Ne(()=>A=!1)),D.$set(N)},i(z){G||(E(b.$$.fragment,z),E(D.$$.fragment,z),G=!0)},o(z){L(b.$$.fragment,z),L(D.$$.fragment,z),G=!1},d(z){z&&I(t),ze(b),ze(D),S=!1,Ie(ae)}}}function At(e){let t,l,r,n,o,a,c,i,s,p,k,h,g,u,b=e[0].rubiks_scale+"",Y,j,D,A,G,S,ae,Z=e[0].grid_size+"",oe,$,U,z;function K(v){e[41](v)}let se={text:"rubiks"};e[0].show_rubiks!==void 0&&(se.checked=e[0].show_rubiks),n=new Pe({props:se}),re.push(()=>Oe(n,"checked",K));function N(v){e[42](v)}let T={text:"Show Grid"};return e[0].show_grid!==void 0&&(T.checked=e[0].show_grid),c=new Pe({props:T}),re.push(()=>Oe(c,"checked",N)),{c(){t=m("div"),l=m("div"),r=m("div"),ye(n.$$.fragment),a=C(),ye(c.$$.fragment),s=C(),p=m("div"),k=J(`Scale\r
            `),h=m("input"),g=C(),u=m("span"),Y=J(b),j=C(),D=m("span"),D.textContent="\xA0",A=J(`\r
            Grid Size\r
            `),G=m("input"),S=C(),ae=m("span"),oe=J(Z),d(r,"class","flex"),d(h,"type","range"),d(h,"max","40"),X(D,"margin-left","10px"),d(G,"type","range"),d(G,"max","10"),d(p,"class","flex"),d(l,"class","flex flex-col"),d(t,"class","bg-white text-black p-2")},m(v,q){B(v,t,q),f(t,l),f(l,r),ve(n,r,null),f(r,a),ve(c,r,null),f(l,s),f(l,p),f(p,k),f(p,h),me(h,e[0].rubiks_scale),f(p,g),f(p,u),f(u,Y),f(p,j),f(p,D),f(p,A),f(p,G),me(G,e[0].grid_size),f(p,S),f(p,ae),f(ae,oe),$=!0,U||(z=[M(h,"change",e[43]),M(h,"input",e[43]),M(G,"change",e[44]),M(G,"input",e[44])],U=!0)},p(v,q){const Te={};!o&&q[0]&1&&(o=!0,Te.checked=v[0].show_rubiks,Ne(()=>o=!1)),n.$set(Te);const De={};!i&&q[0]&1&&(i=!0,De.checked=v[0].show_grid,Ne(()=>i=!1)),c.$set(De),q[0]&1&&me(h,v[0].rubiks_scale),(!$||q[0]&1)&&b!==(b=v[0].rubiks_scale+"")&&Ce(Y,b),q[0]&1&&me(G,v[0].grid_size),(!$||q[0]&1)&&Z!==(Z=v[0].grid_size+"")&&Ce(oe,Z)},i(v){$||(E(n.$$.fragment,v),E(c.$$.fragment,v),$=!0)},o(v){L(n.$$.fragment,v),L(c.$$.fragment,v),$=!1},d(v){v&&I(t),ze(n),ze(c),U=!1,Ie(z)}}}function Lt(e){let t,l,r,n,o,a,c,i,s,p=e[0].mockup_pixel_size+"",k,h,g,u,b,Y,j,D=e[0].mockup_x+"",A,G,S,ae,Z,oe=e[0].mockup_y+"",$,U,z;function K(v,q){return v[1].mockup_hovering?ql:jl}let se=K(e),N=se(e),T=e[0].has_mockup&&Ut(e);return{c(){t=m("div"),l=m("div"),N.c(),r=C(),T&&T.c(),n=C(),o=m("canvas"),a=J(`\r
\r
        Mock Up Pixel\r
        `),c=m("input"),i=C(),s=m("span"),k=J(p),h=C(),g=m("br"),u=J(`\r
        Mock Up Position\r
        `),b=m("input"),Y=C(),j=m("span"),A=J(D),G=C(),S=m("input"),ae=C(),Z=m("span"),$=J(oe),X(o,"width","auto"),d(o,"class","svelte-7lre2h"),X(l,"height","auto"),d(l,"ondragover","return false"),d(l,"id","mockup_drop_zone"),d(l,"class","bg-red-500 h-full p-4"),d(c,"type","range"),d(c,"min","1"),d(c,"max","25"),d(b,"type","range"),d(b,"min","-500"),d(b,"max","500"),d(S,"type","range"),d(S,"min","-500"),d(S,"max","500"),d(t,"class","bg-white text-black p-2")},m(v,q){B(v,t,q),f(t,l),N.m(l,null),f(l,r),T&&T.m(l,null),f(l,n),f(l,o),e[45](o),f(t,a),f(t,c),me(c,e[0].mockup_pixel_size),f(t,i),f(t,s),f(s,k),f(t,h),f(t,g),f(t,u),f(t,b),me(b,e[0].mockup_x),f(t,Y),f(t,j),f(j,A),f(t,G),f(t,S),me(S,e[0].mockup_y),f(t,ae),f(t,Z),f(Z,$),U||(z=[M(l,"drop",e[23]),M(l,"dragenter",e[24]),M(l,"dragleave",e[25]),M(c,"change",e[46]),M(c,"input",e[46]),M(b,"change",e[47]),M(b,"input",e[47]),M(S,"change",e[48]),M(S,"input",e[48])],U=!0)},p(v,q){se!==(se=K(v))&&(N.d(1),N=se(v),N&&(N.c(),N.m(l,r))),v[0].has_mockup?T?T.p(v,q):(T=Ut(v),T.c(),T.m(l,n)):T&&(T.d(1),T=null),q[0]&1&&me(c,v[0].mockup_pixel_size),q[0]&1&&p!==(p=v[0].mockup_pixel_size+"")&&Ce(k,p),q[0]&1&&me(b,v[0].mockup_x),q[0]&1&&D!==(D=v[0].mockup_x+"")&&Ce(A,D),q[0]&1&&me(S,v[0].mockup_y),q[0]&1&&oe!==(oe=v[0].mockup_y+"")&&Ce($,oe)},d(v){v&&I(t),N.d(),T&&T.d(),e[45](null),U=!1,Ie(z)}}}function ql(e){let t;return{c(){t=J("Release to load file")},m(l,r){B(l,t,r)},d(l){l&&I(t)}}}function jl(e){let t;return{c(){t=J("Drop MockUp Image here")},m(l,r){B(l,t,r)},d(l){l&&I(t)}}}function Ut(e){let t,l,r;return{c(){t=m("button"),t.textContent="Remove mockup",d(t,"class","p-2 border-[1px] border-black")},m(n,o){B(n,t,o),l||(r=M(t,"click",e[26]),l=!0)},p:Le,d(n){n&&I(t),l=!1,r()}}}function qt(e){let t,l,r,n,o,a,c,i,s,p,k,h,g,u,b;function Y(D){e[51](D)}let j={text:"Live Capture"};return e[0].live_capture!==void 0&&(j.checked=e[0].live_capture),a=new Pe({props:j}),re.push(()=>Oe(a,"checked",Y)),{c(){t=m("div"),l=m("button"),l.textContent="Start Capture",r=C(),n=m("button"),n.textContent="Take Screenshot",o=C(),ye(a.$$.fragment),i=C(),s=m("div"),p=m("video"),k=C(),h=m("canvas"),d(l,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),d(n,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),d(t,"class","flex"),X(p,"width","10%"),p.autoplay=!0,X(h,"width","10%"),d(h,"width",e[9]),d(h,"height",e[10]),d(h,"class","svelte-7lre2h"),d(s,"class","flex")},m(D,A){B(D,t,A),f(t,l),f(t,r),f(t,n),f(t,o),ve(a,t,null),B(D,i,A),B(D,s,A),f(s,p),e[52](p),f(s,k),f(s,h),e[53](h),g=!0,u||(b=[M(l,"click",e[49]),M(n,"click",e[50])],u=!0)},p(D,A){const G={};!c&&A[0]&1&&(c=!0,G.checked=D[0].live_capture,Ne(()=>c=!1)),a.$set(G),(!g||A[0]&512)&&d(h,"width",D[9]),(!g||A[0]&1024)&&d(h,"height",D[10])},i(D){g||(E(a.$$.fragment,D),g=!0)},o(D){L(a.$$.fragment,D),g=!1},d(D){D&&I(t),ze(a),D&&I(i),D&&I(s),e[52](null),e[53](null),u=!1,Ie(b)}}}function jt(e){let t,l,r,n,o,a,c,i,s,p,k,h,g,u,b,Y,j,D,A,G,S;function ae(z){e[54](z)}let Z={text:"Gray"};e[0].gray_scale_input!==void 0&&(Z.checked=e[0].gray_scale_input),o=new Pe({props:Z}),re.push(()=>Oe(o,"checked",ae));function oe(z){e[55](z)}let $={text:"Nearest Gray Pixel"};e[0].gray_scale_nearest_pixel!==void 0&&($.checked=e[0].gray_scale_nearest_pixel),k=new Pe({props:$}),re.push(()=>Oe(k,"checked",oe)),b=new Pe({props:{text:"No Dithering",checked:e[0].dithering==""}}),b.$on("click",e[56]),j=new Pe({props:{text:"Patterned Dithering",checked:e[0].dithering=="pattern"}}),j.$on("click",e[57]);let U=e[0].dithering=="pattern"&&Wt(e);return G=new Pe({props:{text:"Floyd Steinberg",checked:e[0].dithering=="fs"}}),G.$on("click",e[59]),{c(){t=m("div"),l=m("div"),r=m("span"),r.textContent="Input Image:",n=C(),ye(o.$$.fragment),c=C(),i=m("div"),s=m("span"),s.textContent="Nearest Pixel:",p=C(),ye(k.$$.fragment),g=C(),u=m("div"),ye(b.$$.fragment),Y=C(),ye(j.$$.fragment),D=C(),U&&U.c(),A=C(),ye(G.$$.fragment),d(r,"class","p-2"),d(l,"class","flex"),d(s,"class","p-2"),d(i,"class","flex"),d(u,"class","flex"),d(t,"class","bg-white text-black p-2")},m(z,K){B(z,t,K),f(t,l),f(l,r),f(l,n),ve(o,l,null),f(t,c),f(t,i),f(i,s),f(i,p),ve(k,i,null),f(t,g),f(t,u),ve(b,u,null),f(u,Y),ve(j,u,null),f(u,D),U&&U.m(u,null),f(u,A),ve(G,u,null),S=!0},p(z,K){const se={};!a&&K[0]&1&&(a=!0,se.checked=z[0].gray_scale_input,Ne(()=>a=!1)),o.$set(se);const N={};!h&&K[0]&1&&(h=!0,N.checked=z[0].gray_scale_nearest_pixel,Ne(()=>h=!1)),k.$set(N);const T={};K[0]&1&&(T.checked=z[0].dithering==""),b.$set(T);const v={};K[0]&1&&(v.checked=z[0].dithering=="pattern"),j.$set(v),z[0].dithering=="pattern"?U?U.p(z,K):(U=Wt(z),U.c(),U.m(u,A)):U&&(U.d(1),U=null);const q={};K[0]&1&&(q.checked=z[0].dithering=="fs"),G.$set(q)},i(z){S||(E(o.$$.fragment,z),E(k.$$.fragment,z),E(b.$$.fragment,z),E(j.$$.fragment,z),E(G.$$.fragment,z),S=!0)},o(z){L(o.$$.fragment,z),L(k.$$.fragment,z),L(b.$$.fragment,z),L(j.$$.fragment,z),L(G.$$.fragment,z),S=!1},d(z){z&&I(t),ze(o),ze(k),ze(b),ze(j),U&&U.d(),ze(G)}}}function Wt(e){let t,l,r,n=e[17],o=[];for(let a=0;a<n.length;a+=1)o[a]=Ht(Mt(e,n,a));return{c(){t=m("span"),t.textContent="Matrix:",l=C();for(let a=0;a<o.length;a+=1)o[a].c();r=Ct(),d(t,"class","h-10 p-2")},m(a,c){B(a,t,c),B(a,l,c);for(let i=0;i<o.length;i+=1)o[i].m(a,c);B(a,r,c)},p(a,c){if(c[0]&131073){n=a[17];let i;for(i=0;i<n.length;i+=1){const s=Mt(a,n,i);o[i]?o[i].p(s,c):(o[i]=Ht(s),o[i].c(),o[i].m(r.parentNode,r))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(a){a&&I(t),a&&I(l),Ye(o,a),a&&I(r)}}}function Ht(e){let t,l=e[90].length+"",r,n,o,a;function c(){return e[58](e[90])}return{c(){t=m("button"),r=J(l),n=C(),d(t,"class","h-10 p-2 rounded-lg border-solid border-2"),F(t,"bg-green-600",e[0].matrix==e[90])},m(i,s){B(i,t,s),f(t,r),f(t,n),o||(a=M(t,"click",c),o=!0)},p(i,s){e=i,s[0]&131073&&F(t,"bg-green-600",e[0].matrix==e[90])},d(i){i&&I(t),o=!1,a()}}}function Jt(e){let t,l,r,n,o,a=e[16],c=[];for(let h=0;h<a.length;h+=1)c[h]=Kt(Tt(e,a,h));const i=h=>L(c[h],1,1,()=>{c[h]=null});let s=e[0].individual_pallette_colors,p=[];for(let h=0;h<s.length;h+=1)p[h]=Vt(Ot(e,s,h));const k=h=>L(p[h],1,1,()=>{p[h]=null});return{c(){t=m("div"),l=m("div");for(let h=0;h<c.length;h+=1)c[h].c();r=C(),n=m("div");for(let h=0;h<p.length;h+=1)p[h].c();d(l,"class","flex"),d(t,"class","bg-white text-black p-2"),d(n,"class","flex")},m(h,g){B(h,t,g),f(t,l);for(let u=0;u<c.length;u+=1)c[u].m(l,null);B(h,r,g),B(h,n,g);for(let u=0;u<p.length;u+=1)p[u].m(n,null);o=!0},p(h,g){if(g[0]&134283265){a=h[16];let u;for(u=0;u<a.length;u+=1){const b=Tt(h,a,u);c[u]?(c[u].p(b,g),E(c[u],1)):(c[u]=Kt(b),c[u].c(),E(c[u],1),c[u].m(l,null))}for(Me(),u=a.length;u<c.length;u+=1)i(u);Fe()}if(g[0]&1){s=h[0].individual_pallette_colors;let u;for(u=0;u<s.length;u+=1){const b=Ot(h,s,u);p[u]?(p[u].p(b,g),E(p[u],1)):(p[u]=Vt(b),p[u].c(),E(p[u],1),p[u].m(n,null))}for(Me(),u=s.length;u<p.length;u+=1)k(u);Fe()}},i(h){if(!o){for(let g=0;g<a.length;g+=1)E(c[g]);for(let g=0;g<s.length;g+=1)E(p[g]);o=!0}},o(h){c=c.filter(Boolean);for(let g=0;g<c.length;g+=1)L(c[g]);p=p.filter(Boolean);for(let g=0;g<p.length;g+=1)L(p[g]);o=!1},d(h){h&&I(t),Ye(c,h),h&&I(r),h&&I(n),Ye(p,h)}}}function Kt(e){let t,l;function r(...n){return e[60](e[87],...n)}return t=new Gl({props:{selected:e[0].pallette,name:e[87].name,color:e[87].colors}}),t.$on("click",r),{c(){ye(t.$$.fragment)},m(n,o){ve(t,n,o),l=!0},p(n,o){e=n;const a={};o[0]&1&&(a.selected=e[0].pallette),t.$set(a)},i(n){l||(E(t.$$.fragment,n),l=!0)},o(n){L(t.$$.fragment,n),l=!1},d(n){ze(t,n)}}}function Vt(e){let t,l,r;function n(a){e[61](a,e[84])}let o={text:e[84].color,bgcolor:e[84].on?e[84].color:"white"};return e[84].on!==void 0&&(o.checked=e[84].on),t=new Pe({props:o}),re.push(()=>Oe(t,"checked",n)),{c(){ye(t.$$.fragment)},m(a,c){ve(t,a,c),r=!0},p(a,c){e=a;const i={};c[0]&1&&(i.text=e[84].color),c[0]&1&&(i.bgcolor=e[84].on?e[84].color:"white"),!l&&c[0]&1&&(l=!0,i.checked=e[84].on,Ne(()=>l=!1)),t.$set(i)},i(a){r||(E(t.$$.fragment,a),r=!0)},o(a){L(t.$$.fragment,a),r=!1},d(a){ze(t,a)}}}function Qt(e){let t,l,r,n,o,a,c,i,s,p,k,h=e[0].dithering=="pattern"&&Xt(e),g=e[0].dithering=="fs"&&$t(e);return{c(){t=m("code"),l=J(e[15]),r=C(),n=m("input"),a=C(),h&&h.c(),c=C(),g&&g.c(),i=Ct(),d(n,"type","range"),d(n,"min","-1"),d(n,"max",o=e[1].total_pixels),d(n,"step","1")},m(u,b){B(u,t,b),f(t,l),B(u,r,b),B(u,n,b),me(n,e[0].debug_range),B(u,a,b),h&&h.m(u,b),B(u,c,b),g&&g.m(u,b),B(u,i,b),s=!0,p||(k=[M(n,"change",e[62]),M(n,"input",e[62])],p=!0)},p(u,b){(!s||b[0]&32768)&&Ce(l,u[15]),(!s||b[0]&2&&o!==(o=u[1].total_pixels))&&d(n,"max",o),b[0]&1&&me(n,u[0].debug_range),u[0].dithering=="pattern"?h?h.p(u,b):(h=Xt(u),h.c(),h.m(c.parentNode,c)):h&&(h.d(1),h=null),u[0].dithering=="fs"?g?(g.p(u,b),b[0]&1&&E(g,1)):(g=$t(u),g.c(),E(g,1),g.m(i.parentNode,i)):g&&(Me(),L(g,1,1,()=>{g=null}),Fe())},i(u){s||(E(g),s=!0)},o(u){L(g),s=!1},d(u){u&&I(t),u&&I(r),u&&I(n),u&&I(a),h&&h.d(u),u&&I(c),g&&g.d(u),u&&I(i),p=!1,Ie(k)}}}function Xt(e){let t,l=e[0].matrix,r=[];for(let n=0;n<l.length;n+=1)r[n]=Zt(St(e,l,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=Ct()},m(n,o){for(let a=0;a<r.length;a+=1)r[a].m(n,o);B(n,t,o)},p(n,o){if(o[0]&1){l=n[0].matrix;let a;for(a=0;a<l.length;a+=1){const c=St(n,l,a);r[a]?r[a].p(c,o):(r[a]=Zt(c),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=l.length}},d(n){Ye(r,n),n&&I(t)}}}function Yt(e){let t,l,r=e[81]+"",n,o,a;function c(){e[63].call(t,e[82],e[83])}return{c(){t=m("input"),l=C(),n=J(r),d(t,"type","range"),d(t,"step","0.01"),d(t,"max","1.0"),d(t,"min","0.0")},m(i,s){B(i,t,s),me(t,e[81]),B(i,l,s),B(i,n,s),o||(a=[M(t,"change",c),M(t,"input",c)],o=!0)},p(i,s){e=i,s[0]&1&&me(t,e[81]),s[0]&1&&r!==(r=e[81]+"")&&Ce(n,r)},d(i){i&&I(t),i&&I(l),i&&I(n),o=!1,Ie(a)}}}function Zt(e){let t,l,r=e[78],n=[];for(let o=0;o<r.length;o+=1)n[o]=Yt(Nt(e,r,o));return{c(){t=m("div");for(let o=0;o<n.length;o+=1)n[o].c();l=C(),d(t,"class","flex")},m(o,a){B(o,t,a);for(let c=0;c<n.length;c+=1)n[c].m(t,null);f(t,l)},p(o,a){if(a[0]&1){r=o[78];let c;for(c=0;c<r.length;c+=1){const i=Nt(o,r,c);n[c]?n[c].p(i,a):(n[c]=Yt(i),n[c].c(),n[c].m(t,l))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){o&&I(t),Ye(n,o)}}}function $t(e){let t,l,r;function n(a){e[64](a)}let o={text:"Cap"};return e[0].cap!==void 0&&(o.checked=e[0].cap),t=new Pe({props:o}),re.push(()=>Oe(t,"checked",n)),{c(){ye(t.$$.fragment)},m(a,c){ve(t,a,c),r=!0},p(a,c){const i={};!l&&c[0]&1&&(l=!0,i.checked=a[0].cap,Ne(()=>l=!1)),t.$set(i)},i(a){r||(E(t.$$.fragment,a),r=!0)},o(a){L(t.$$.fragment,a),r=!1},d(a){ze(t,a)}}}function xt(e){let t;return{c(){t=m("div"),t.textContent="Drop Image Here",X(t,"width","100%"),X(t,"height","100%"),X(t,"border","1px solid black"),X(t,"background","#ccc"),X(t,"text-align","center")},m(l,r){B(l,t,r)},d(l){l&&I(t)}}}function Wl(e){let t,l,r;return{c(){t=m("canvas"),d(t,"id","rubiks_canvas"),d(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),d(t,"height",r=e[1].resizedheight*e[0].rubiks_scale),d(t,"class","svelte-7lre2h"),F(t,"shown",e[3]&&e[0].show_rubiks),F(t,"pixelated",e[0].pixelated)},m(n,o){B(n,t,o),e[70](t)},p(n,o){o[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&d(t,"width",l),o[0]&3&&r!==(r=n[1].resizedheight*n[0].rubiks_scale)&&d(t,"height",r),o[0]&9&&F(t,"shown",n[3]&&n[0].show_rubiks),o[0]&1&&F(t,"pixelated",n[0].pixelated)},d(n){n&&I(t),e[70](null)}}}function Hl(e){let t,l,r;return{c(){t=m("canvas"),X(t,"position","absolute"),X(t,"top",e[4]/2-e[1].resizedheight*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_y*e[2]/e[1].mockupwidth+"px"),X(t,"left",e[2]/2-e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_x*e[2]/e[1].mockupwidth+"px"),X(t,"width",e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth+"px"),d(t,"id","rubiks_canvas"),d(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),d(t,"height",r=e[1].resizedheight*e[0].rubiks_scale),d(t,"class","svelte-7lre2h"),F(t,"shown",e[3]&&e[0].show_rubiks),F(t,"pixelated",e[0].pixelated)},m(n,o){B(n,t,o),e[69](t)},p(n,o){o[0]&23&&X(t,"top",n[4]/2-n[1].resizedheight*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_y*n[2]/n[1].mockupwidth+"px"),o[0]&7&&X(t,"left",n[2]/2-n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_x*n[2]/n[1].mockupwidth+"px"),o[0]&7&&X(t,"width",n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth+"px"),o[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&d(t,"width",l),o[0]&3&&r!==(r=n[1].resizedheight*n[0].rubiks_scale)&&d(t,"height",r),o[0]&9&&F(t,"shown",n[3]&&n[0].show_rubiks),o[0]&1&&F(t,"pixelated",n[0].pixelated)},d(n){n&&I(t),e[69](null)}}}function el(e){let t;return{c(){t=m("div"),t.textContent="Drop to load image",d(t,"class","rounded-lg border-solid border-2 p-8 text-white text-center m-auto w-fit")},m(l,r){B(l,t,r)},d(l){l&&I(t)}}}function tl(e){let t,l=e[1].resizedwidth+"",r,n,o=e[1].resizedheight+"",a,c,i=e[1].resizedwidth*e[1].resizedheight+"",s,p,k=e[1].resizedheight*e[1].resizedwidth/9+"",h;return{c(){t=J("Image Size: "),r=J(l),n=J(" x "),a=J(o),c=J(" = "),s=J(i),p=J(`\r
      | Total Rubiks: `),h=J(k)},m(g,u){B(g,t,u),B(g,r,u),B(g,n,u),B(g,a,u),B(g,c,u),B(g,s,u),B(g,p,u),B(g,h,u)},p(g,u){u[0]&2&&l!==(l=g[1].resizedwidth+"")&&Ce(r,l),u[0]&2&&o!==(o=g[1].resizedheight+"")&&Ce(a,o),u[0]&2&&i!==(i=g[1].resizedwidth*g[1].resizedheight+"")&&Ce(s,i),u[0]&2&&k!==(k=g[1].resizedheight*g[1].resizedwidth/9+"")&&Ce(h,k)},d(g){g&&I(t),g&&I(r),g&&I(n),g&&I(a),g&&I(c),g&&I(s),g&&I(p),g&&I(h)}}}function Jl(e){let t,l,r,n,o,a,c,i,s,p,k,h,g,u,b,Y,j,D,A,G,S,ae,Z,oe,$,U,z,K,se,N,T,v,q,Te,De,be,je,Ue,Ge,ce,We,He,tt,Se,ue,Je,Ke,lt,nt,it,rt,V,Ze,ot;function pt(w){e[37](w)}let st={text:"debug"};e[1].show_debug!==void 0&&(st.checked=e[1].show_debug),S=new Pe({props:st}),re.push(()=>Oe(S,"checked",pt));let x=e[1].current=="img"&&Ft(e),ee=e[1].current=="rubiks"&&At(e),_e=e[1].current=="mockup"&&Lt(e),te=(e[1].current=="screen_capture"||e[0].live_capture)&&qt(e),le=e[1].current=="processing"&&jt(e),ne=e[1].current=="pallette"&&Jt(e),ie=e[1].show_debug&&Qt(e),ke=!e[3]&&xt();function at(w,O){return w[0].has_mockup?Hl:Wl}let Ve=at(e),Re=Ve(e),we=!e[3]&&e[1].hovering&&el(),pe=e[1].resizedheight&&e[1].resizedwidth&&tl(e);return{c(){t=m("main"),l=m("div"),r=m("div"),n=m("div"),o=m("button"),o.textContent="Output\xA0Image",a=C(),c=m("button"),c.textContent="Pallette",i=C(),s=m("button"),s.textContent="Processing",p=C(),k=m("button"),k.textContent="Rubiks",h=C(),g=m("button"),g.textContent="Mock\xA0Up",u=C(),b=m("button"),b.textContent="Screen\xA0Cap",Y=C(),j=m("button"),j.textContent="Capture",D=C(),A=m("div"),G=C(),ye(S.$$.fragment),Z=C(),x&&x.c(),oe=C(),ee&&ee.c(),$=C(),_e&&_e.c(),U=C(),te&&te.c(),z=C(),le&&le.c(),K=C(),ne&&ne.c(),se=C(),ie&&ie.c(),N=C(),T=m("div"),v=m("div"),ke&&ke.c(),q=C(),Te=m("div"),De=m("div"),be=m("canvas"),Ge=C(),ce=m("canvas"),tt=C(),Se=m("div"),ue=m("canvas"),nt=C(),Re.c(),it=C(),we&&we.c(),rt=C(),pe&&pe.c(),d(o,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),F(o,"bg-gray-400",e[1].current=="img"),d(c,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),F(c,"bg-gray-400",e[1].current=="pallette"),d(s,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),F(s,"bg-gray-400",e[1].current=="processing"),d(k,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),F(k,"bg-gray-400",e[1].current=="rubiks"),d(g,"class","hidden h-10 p-2 rounded-lg border-solid border-2 text-center"),F(g,"bg-gray-400",e[1].current=="mockup"),d(b,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),F(b,"bg-gray-400",e[1].current=="screen_capture"||e[0].live_capture),d(j,"class","hidden h-10 p-2 rounded-lg border-solid border-2 text-center"),d(A,"class","spacer svelte-7lre2h"),d(n,"class","flex"),d(r,"class","bg-white text-black p-2"),d(be,"class","small svelte-7lre2h"),d(be,"id","canvas"),d(be,"width",je=e[1].canvaswidth),d(be,"height",Ue=e[1].canvasheight),F(be,"shown",e[3]),F(be,"pixelated",e[0].pixelated),d(ce,"id","output_canvas"),d(ce,"width",We=e[1].resizedwidth),d(ce,"height",He=e[1].resizedheight),X(ce,"border","4px solid red"),d(ce,"class","svelte-7lre2h"),F(ce,"small",e[0].show_rubiks),F(ce,"shown",e[3]),F(ce,"pixelated",e[0].pixelated),X(ue,"position","absolute"),d(ue,"id","bgcanvas"),d(ue,"width",Je=e[1].mockupwidth),d(ue,"height",Ke=e[1].mockupheight),d(ue,"class","svelte-7lre2h"),_t(()=>e[68].call(ue)),F(ue,"shown",e[0].has_mockup),X(Se,"position","relative"),d(Se,"id","canvas_wrapper"),d(De,"class","flex-col"),d(Te,"class","flex"),d(v,"ondragover","return false"),d(v,"id","drop_zone"),d(v,"class","bg-white h-full"),d(T,"class","bg-green-800 grow justify-center"),d(l,"class","flex flex-col bg-blue-800 h-screen")},m(w,O){B(w,t,O),f(t,l),f(l,r),f(r,n),f(n,o),f(n,a),f(n,c),f(n,i),f(n,s),f(n,p),f(n,k),f(n,h),f(n,g),f(n,u),f(n,b),f(n,Y),f(n,j),f(n,D),f(n,A),f(n,G),ve(S,n,null),f(l,Z),x&&x.m(l,null),f(l,oe),ee&&ee.m(l,null),f(l,$),_e&&_e.m(l,null),f(l,U),te&&te.m(l,null),f(l,z),le&&le.m(l,null),f(l,K),ne&&ne.m(l,null),f(l,se),ie&&ie.m(l,null),f(l,N),f(l,T),f(T,v),ke&&ke.m(v,null),f(v,q),f(v,Te),f(Te,De),f(De,be),e[65](be),f(De,Ge),f(De,ce),e[66](ce),f(De,tt),f(De,Se),f(Se,ue),e[67](ue),lt=zl(ue,e[68].bind(ue)),f(Se,nt),Re.m(Se,null),f(v,it),we&&we.m(v,null),f(l,rt),pe&&pe.m(l,null),V=!0,Ze||(ot=[M(o,"click",e[30]),M(c,"click",e[31]),M(s,"click",e[32]),M(k,"click",e[33]),M(g,"click",e[34]),M(b,"click",e[35]),M(j,"click",e[36]),M(v,"drop",e[20]),M(v,"dragenter",e[21]),M(v,"dragleave",e[22])],Ze=!0)},p(w,O){(!V||O[0]&2)&&F(o,"bg-gray-400",w[1].current=="img"),(!V||O[0]&2)&&F(c,"bg-gray-400",w[1].current=="pallette"),(!V||O[0]&2)&&F(s,"bg-gray-400",w[1].current=="processing"),(!V||O[0]&2)&&F(k,"bg-gray-400",w[1].current=="rubiks"),(!V||O[0]&2)&&F(g,"bg-gray-400",w[1].current=="mockup"),(!V||O[0]&3)&&F(b,"bg-gray-400",w[1].current=="screen_capture"||w[0].live_capture);const ct={};!ae&&O[0]&2&&(ae=!0,ct.checked=w[1].show_debug,Ne(()=>ae=!1)),S.$set(ct),w[1].current=="img"?x?(x.p(w,O),O[0]&2&&E(x,1)):(x=Ft(w),x.c(),E(x,1),x.m(l,oe)):x&&(Me(),L(x,1,1,()=>{x=null}),Fe()),w[1].current=="rubiks"?ee?(ee.p(w,O),O[0]&2&&E(ee,1)):(ee=At(w),ee.c(),E(ee,1),ee.m(l,$)):ee&&(Me(),L(ee,1,1,()=>{ee=null}),Fe()),w[1].current=="mockup"?_e?_e.p(w,O):(_e=Lt(w),_e.c(),_e.m(l,U)):_e&&(_e.d(1),_e=null),w[1].current=="screen_capture"||w[0].live_capture?te?(te.p(w,O),O[0]&3&&E(te,1)):(te=qt(w),te.c(),E(te,1),te.m(l,z)):te&&(Me(),L(te,1,1,()=>{te=null}),Fe()),w[1].current=="processing"?le?(le.p(w,O),O[0]&2&&E(le,1)):(le=jt(w),le.c(),E(le,1),le.m(l,K)):le&&(Me(),L(le,1,1,()=>{le=null}),Fe()),w[1].current=="pallette"?ne?(ne.p(w,O),O[0]&2&&E(ne,1)):(ne=Jt(w),ne.c(),E(ne,1),ne.m(l,se)):ne&&(Me(),L(ne,1,1,()=>{ne=null}),Fe()),w[1].show_debug?ie?(ie.p(w,O),O[0]&2&&E(ie,1)):(ie=Qt(w),ie.c(),E(ie,1),ie.m(l,N)):ie&&(Me(),L(ie,1,1,()=>{ie=null}),Fe()),w[3]?ke&&(ke.d(1),ke=null):ke||(ke=xt(),ke.c(),ke.m(v,q)),(!V||O[0]&2&&je!==(je=w[1].canvaswidth))&&d(be,"width",je),(!V||O[0]&2&&Ue!==(Ue=w[1].canvasheight))&&d(be,"height",Ue),(!V||O[0]&8)&&F(be,"shown",w[3]),(!V||O[0]&1)&&F(be,"pixelated",w[0].pixelated),(!V||O[0]&2&&We!==(We=w[1].resizedwidth))&&d(ce,"width",We),(!V||O[0]&2&&He!==(He=w[1].resizedheight))&&d(ce,"height",He),(!V||O[0]&1)&&F(ce,"small",w[0].show_rubiks),(!V||O[0]&8)&&F(ce,"shown",w[3]),(!V||O[0]&1)&&F(ce,"pixelated",w[0].pixelated),(!V||O[0]&2&&Je!==(Je=w[1].mockupwidth))&&d(ue,"width",Je),(!V||O[0]&2&&Ke!==(Ke=w[1].mockupheight))&&d(ue,"height",Ke),(!V||O[0]&1)&&F(ue,"shown",w[0].has_mockup),Ve===(Ve=at(w))&&Re?Re.p(w,O):(Re.d(1),Re=Ve(w),Re&&(Re.c(),Re.m(Se,null))),!w[3]&&w[1].hovering?we||(we=el(),we.c(),we.m(v,null)):we&&(we.d(1),we=null),w[1].resizedheight&&w[1].resizedwidth?pe?pe.p(w,O):(pe=tl(w),pe.c(),pe.m(l,null)):pe&&(pe.d(1),pe=null)},i(w){V||(E(S.$$.fragment,w),E(x),E(ee),E(te),E(le),E(ne),E(ie),V=!0)},o(w){L(S.$$.fragment,w),L(x),L(ee),L(te),L(le),L(ne),L(ie),V=!1},d(w){w&&I(t),ze(S),x&&x.d(),ee&&ee.d(),_e&&_e.d(),te&&te.d(),le&&le.d(),ne&&ne.d(),ie&&ie.d(),ke&&ke.d(),e[65](null),e[66](null),e[67](null),lt(),Re.d(),we&&we.d(),pe&&pe.d(),Ze=!1,Ie(ot)}}}function Kl(e,t,l){let r,n,o=!1,a=[{name:"rbk",colors:"#013082,#BB2328,#01B351,#FE8F25,#F5FF42,#ECF3F6"},{name:"rbkng",colors:"#013082,#BB2328,#FE8F25,#F5FF42,#ECF3F6"},{name:"b&w",colors:"#000,#fff"},{name:"gray",colors:"#000,#666,#fff"},{name:"grayscale",colors:"#000,#111,#222,#333,#444,#555,#666,#777,#888,#999,#aaa,#bbb,#ccc,#ddd,#eee,#fff"},{name:"rgb",colors:"#000,#f00,#0f0,#00f,#fff"},{name:"cmyk",colors:"#000,#0ff,#f0f,#ff0,#fff"}],c=[[[0/4,2/4],[3/4,1/4]],[[0/16,8/16,2/16,10/16],[12/16,4/16,14/16,6/16],[3/16,11/16,1/16,9/16],[15/16,7/16,13/16,5/16]]],i={loadedfile:"",cache:!0,cap:!1,pixelated:!0,has_mockup:!1,mockup_pixel_size:1,mockup_x:0,mockup_y:0,width:0,height:0,dithering:"pattern",max_width:600,show_rubiks:!0,show_grid:!1,rubiks_scale:8,gray_scale_input:!1,gray_scale_nearest_pixel:!1,grid_size:2,pallette:a[0].colors,individual_pallette_colors:[],debug_range:-1,matrix:c[0],live_capture:!1},s={current:"",hovering:!1,mockup_hovering:!1,mockupheight:100,mockupwidth:100,show_debug:!1,resizedwidth:0,resizedheight:0,total_pixels:0,canvaswidth:100,canvasheight:100},p,k,h,g,u,b,Y,j,D,A="",G={},S;async function ae(_){let P=null;try{P=await navigator.mediaDevices.getDisplayMedia(_),l(12,S.srcObject=P,S)}catch(fe){console.error(`Error: ${fe}`)}let y=()=>{q&&(i.live_capture&&q(),setTimeout(y,1e3/15))};y()}let Z=async function(){if(b){let _=b.getContext("2d");await Xe();let P=300,y=P*S.videoHeight/S.videoWidth;l(9,Y=P),l(10,j=y),_.drawImage(S,0,0,P,y),je(b)}},oe=function(_){_.preventDefault();let P=_;if(P.dataTransfer.items)if(P.dataTransfer.items.length==1){let y=P.dataTransfer.items[0];if(y.kind==="file"){const fe=y.getAsFile();be(fe)}else console.log("kind is not file, but: "+y.kind)}else l(15,n="Error: can only load one file");l(1,s.hovering=!1,s)},$=function(){console.log("drag enter"),l(1,s.hovering=!0,s)},U=function(){l(1,s.hovering=!1,s)},z=function(_){_.preventDefault();let P=_;if(P.dataTransfer.items)if(P.dataTransfer.items.length==1){let y=P.dataTransfer.items[0];if(y.kind==="file"){const fe=y.getAsFile();l(0,i.has_mockup=!0,i),Te(fe)}else console.log("kind is not file, but: "+y.kind)}else l(15,n="Error: can only load one file");l(1,s.mockup_hovering=!1,s)},K=function(){console.log("drag enter"),l(1,s.mockup_hovering=!0,s)},se=function(){l(1,s.mockup_hovering=!1,s)},N,T,v,q=null,Te=function(_){let P=g.getContext("2d"),y=v.getContext("2d");T=new Image,T.onload=async function(){await Xe(),l(1,s.mockupheight=T.height,s),l(1,s.mockupwidth=T.width,s),await Xe(),P.drawImage(T,0,0,T.width,T.height),y.drawImage(T,0,0,200,200*T.height/T.width)},T.src=URL.createObjectURL(_)},De=function(){l(0,i.has_mockup=!1,i),T.src=null,v.getContext("2d").clearRect(0,0,v.width,v.height)},be=function(_){l(0,i.loadedfile=_.name,i);let P=h.getContext("2d");N=new Image,N.onload=async function(){l(1,s.canvasheight=N.height,s),l(1,s.canvaswidth=N.width,s),l(0,i.width=Math.min(99,s.canvaswidth),i),l(0,i.max_width=Math.min(s.canvaswidth,999),i),l(3,o=!0),G={},await Xe(),P.drawImage(N,0,0,N.width,N.height)},N.src=URL.createObjectURL(_)},je=function(_){let P=h.getContext("2d");N=new Image,N.onload=async function(){l(1,s.canvasheight=N.height,s),l(1,s.canvaswidth=N.width,s),l(3,o=!0),G={},await Xe(),P.drawImage(N,0,0,N.width,N.height)},N.src=_.toDataURL("image/png")},Ue=function(_){l(0,i.pallette=_,i),l(0,i.individual_pallette_colors=[],i),_.split(",").forEach(P=>{i.individual_pallette_colors.push({color:P,on:!0})})},Ge=function(_){s.current==_?l(1,s.current="",s):l(1,s.current=_,s)};Cl(async()=>{if(!i.width){console.log("no width, ending here");return}if(!o){console.log("no image loaded, ending here");return}if(!N){console.log("originalImage is empty","ending here");return}let _=s.canvasheight/s.canvaswidth*i.width;if(l(0,i.height=_,i),l(1,s.resizedwidth=parseInt(i.width/3)*3,s),l(1,s.resizedheight=parseInt(_/3)*3,s),l(1,s.total_pixels=s.resizedheight*s.resizedwidth,s),await Xe(),_<1){console.log("height is less than 1","ending here");return}if(A=R.hashCode(JSON.stringify(r)),i.cache&&A&&G[A]){console.log("found",r.loadedfile,A,"from cache");let P=u.getContext("2d"),y=G[A].data,fe=new ImageData(y.data,y.width,y.height);P.putImageData(fe,0,0)}else{console.log("GENERATING IMAGE",JSON.stringify(r),A);let P=u.getContext("2d");P.drawImage(N,0,0,s.resizedwidth,s.resizedheight);let y=P.getImageData(0,0,s.resizedwidth,s.resizedheight);if(i.gray_scale_input)for(let W=0,de=0;W<y.height;W++)for(let Q=0;Q<y.width;Q++,de+=4){let Qe=R.getPixelDataRGB(y,Q,W),Ee=Math.round((Qe.r+Qe.g+Qe.b)/3);R.setPixelDataRaw(y,de,Ee),R.setPixelDataRaw(y,de+1,Ee),R.setPixelDataRaw(y,de+2,Ee)}let fe=i.pallette;i.individual_pallette_colors.length&&(fe=i.individual_pallette_colors.filter(W=>W.on).map(W=>W.color).join(","));let Be=fe.split(",").length,ut=fe.split(",");ut.forEach((W,de)=>{ut[de]=R.hexToRgb(W)});for(let W=0,de=0;W<y.height;W++)for(let Q=0;Q<y.width;Q++,de+=4){let Qe=R.getPixelDataRGB(y,Q,W),Ee=R.nearestPixel2(Qe,ut,i.gray_scale_nearest_pixel);if(i.dithering=="")R.setPixelDataRaw(y,de,Ee.r),R.setPixelDataRaw(y,de+1,Ee.g),R.setPixelDataRaw(y,de+2,Ee.b);else if(i.dithering=="fs"){R.setPixelDataRaw(y,de,Ee.r),R.setPixelDataRaw(y,de+1,Ee.g),R.setPixelDataRaw(y,de+2,Ee.b);let H=R.pixelDiff(Qe,Ee);if(Q<y.width-1){let ge=R.getPixelDataRGB(y,Q+1,W);i.cap?R.setPixelDataRGB(y,Q+1,W,{r:R.clamp(0,255,ge.r+H.r*7/16),g:R.clamp(0,255,ge.g+H.g*7/16),b:R.clamp(0,255,ge.b+H.b*7/16)}):R.setPixelDataRGB(y,Q+1,W,{r:ge.r+H.r*7/16,g:ge.g+H.g*7/16,b:ge.b+H.b*7/16})}if(W<y.height-1){if(Q>0){let he=R.getPixelDataRGB(y,Q-1,W+1);i.cap?R.setPixelDataRGB(y,Q-1,W+1,{r:R.clamp(0,255,he.r+H.r*3/16),g:R.clamp(0,255,he.g+H.g*3/16),b:R.clamp(0,255,he.b+H.b*3/16)}):R.setPixelDataRGB(y,Q-1,W+1,{r:he.r+H.r*3/16,g:he.g+H.g*3/16,b:he.b+H.b*3/16})}let ge=R.getPixelDataRGB(y,Q,W+1);if(i.cap?R.setPixelDataRGB(y,Q,W+1,{r:R.clamp(0,255,ge.r+H.r*5/16),g:R.clamp(0,255,ge.g+H.g*5/16),b:R.clamp(0,255,ge.b+H.b*5/16)}):R.setPixelDataRGB(y,Q,W+1,{r:ge.r+H.r*5/16,g:ge.g+H.g*5/16,b:ge.b+H.b*5/16}),Q<y.width-1){let he=R.getPixelDataRGB(y,Q+1,W+1);i.cap?R.setPixelDataRGB(y,Q+1,W+1,{r:R.clamp(0,255,he.r+H.r*1/16),g:R.clamp(0,255,he.g+H.g*1/16),b:R.clamp(0,255,he.b+H.b*1/16)}):R.setPixelDataRGB(y,Q+1,W+1,{r:he.r+H.r*1/16,g:he.g+H.g*1/16,b:he.b+H.b*1/16})}}}else if(i.dithering=="pattern"){let H=R.getPixelDataRGB(y,Q,W),ge=255/Be*(i.matrix[Q%i.matrix[0].length][W%i.matrix.length]-.5),he=R.nearestPixel2({r:H.r+ge,g:H.g+ge,b:H.b+ge},ut,i.gray_scale_nearest_pixel);R.setPixelDataRaw(y,de,he.r),R.setPixelDataRaw(y,de+1,he.g),R.setPixelDataRaw(y,de+2,he.b)}}if(P.putImageData(y,0,0),i.cache){let W=new ImageData(new Uint8ClampedArray(y.data),y.width,y.height);console.log("adding",A,"to cache"),G[A]={data:W,params:Object.assign({},r),config:Object.assign({},i)}}}if(i.show_rubiks){let P=D.getContext("2d"),fe=u.getContext("2d").getImageData(0,0,s.resizedwidth,s.resizedheight);if(P.imageSmoothingEnabled=!1,P.drawImage(u,0,0,s.resizedwidth*i.rubiks_scale,s.resizedheight*i.rubiks_scale),i.show_grid&&i.grid_size>0){P.lineWidth=i.grid_size,P.strokeStyle="#000000";for(let Be=0;Be<fe.height;Be++)P.beginPath(),P.moveTo(0,Be*i.rubiks_scale),P.lineTo(fe.width*i.rubiks_scale,Be*i.rubiks_scale),P.stroke();for(let Be=0;Be<fe.width;Be++)P.beginPath(),P.moveTo(Be*i.rubiks_scale,0),P.lineTo(Be*i.rubiks_scale,fe.height*i.rubiks_scale),P.stroke()}}});const ce=()=>{Ge("img")},We=()=>{Ge("pallette")},He=()=>{Ge("processing")},tt=()=>{Ge("rubiks")},Se=()=>{Ge("mockup")},ue=()=>{Ge("screen_capture")},Je=()=>{Z()};function Ke(_){e.$$.not_equal(s.show_debug,_)&&(s.show_debug=_,l(1,s))}function lt(){i.width=Ae(this.value),l(0,i)}function nt(_){e.$$.not_equal(i.pixelated,_)&&(i.pixelated=_,l(0,i))}function it(_){e.$$.not_equal(i.cache,_)&&(i.cache=_,l(0,i))}function rt(_){e.$$.not_equal(i.show_rubiks,_)&&(i.show_rubiks=_,l(0,i))}function V(_){e.$$.not_equal(i.show_grid,_)&&(i.show_grid=_,l(0,i))}function Ze(){i.rubiks_scale=Ae(this.value),l(0,i)}function ot(){i.grid_size=Ae(this.value),l(0,i)}function pt(_){re[_?"unshift":"push"](()=>{v=_,l(13,v)})}function st(){i.mockup_pixel_size=Ae(this.value),l(0,i)}function x(){i.mockup_x=Ae(this.value),l(0,i)}function ee(){i.mockup_y=Ae(this.value),l(0,i)}const _e=()=>{l(14,q=Z),ae()},te=()=>{Z()};function le(_){e.$$.not_equal(i.live_capture,_)&&(i.live_capture=_,l(0,i))}function ne(_){re[_?"unshift":"push"](()=>{S=_,l(12,S)})}function ie(_){re[_?"unshift":"push"](()=>{b=_,l(8,b)})}function ke(_){e.$$.not_equal(i.gray_scale_input,_)&&(i.gray_scale_input=_,l(0,i))}function at(_){e.$$.not_equal(i.gray_scale_nearest_pixel,_)&&(i.gray_scale_nearest_pixel=_,l(0,i))}const Ve=()=>l(0,i.dithering="",i),Re=()=>l(0,i.dithering="pattern",i),we=_=>{l(0,i.matrix=_,i)},pe=()=>l(0,i.dithering="fs",i),w=(_,P,y)=>{Ue(_.colors)};function O(_,P){e.$$.not_equal(P.on,_)&&(P.on=_,l(0,i))}function ct(){i.debug_range=Ae(this.value),l(0,i)}function ul(_,P){_[P]=Ae(this.value),l(0,i)}function fl(_){e.$$.not_equal(i.cap,_)&&(i.cap=_,l(0,i))}function dl(_){re[_?"unshift":"push"](()=>{h=_,l(5,h)})}function gl(_){re[_?"unshift":"push"](()=>{u=_,l(7,u)})}function hl(_){re[_?"unshift":"push"](()=>{g=_,l(6,g)})}function _l(){k=this.clientHeight,p=this.clientWidth,l(4,k),l(2,p)}function pl(_){re[_?"unshift":"push"](()=>{D=_,l(11,D)})}function ml(_){re[_?"unshift":"push"](()=>{D=_,l(11,D)})}return e.$$.update=()=>{e.$$.dirty[0]&1&&l(29,r={loadedfile:i.loadedfile,width:i.width,height:i.height,dithering:i.dithering,gray_scale_input:i.gray_scale_input,gray_scale_nearest_pixel:i.gray_scale_nearest_pixel,pallette:i.pallette,individual_pallette_colors:i.individual_pallette_colors,matrix:i.matrix}),e.$$.dirty[0]&536870919&&l(15,n=("UI = "+JSON.stringify(s)+`
params: `+JSON.stringify(r)+`
CONFIG:`+JSON.stringify(i)+"CLIENT WIDTH:"+p).replaceAll(",",", "))},[i,s,p,o,k,h,g,u,b,Y,j,D,S,v,q,n,a,c,ae,Z,oe,$,U,z,K,se,De,Ue,Ge,r,ce,We,He,tt,Se,ue,Je,Ke,lt,nt,it,rt,V,Ze,ot,pt,st,x,ee,_e,te,le,ne,ie,ke,at,Ve,Re,we,pe,w,O,ct,ul,fl,dl,gl,hl,_l,pl,ml]}class Vl extends Pt{constructor(t){super(),Dt(this,t,Kl,Jl,yt,{},null,[-1,-1,-1])}}new Vl({target:document.getElementById("app")});
