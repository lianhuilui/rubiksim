(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function l(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=l(n);fetch(n.href,o)}})();function Le(){}function $t(e){return e()}function It(){return Object.create(null)}function Ce(e){e.forEach($t)}function _l(e){return typeof e=="function"}function vt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function pl(e){return Object.keys(e).length===0}function d(e,t){e.appendChild(t)}function E(e,t,l){e.insertBefore(t,l||null)}function C(e){e.parentNode.removeChild(e)}function Qe(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function m(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function P(){return q(" ")}function zt(){return q("")}function O(e,t,l,r){return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)}function f(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Me(e){return e===""?null:+e}function ml(e){return Array.from(e.childNodes)}function be(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ke(e,t){e.value=t==null?"":t}function me(e,t,l,r){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,r?"important":"")}let ct;function bl(){if(ct===void 0){ct=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ct=!0}}return ct}function kl(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=m("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const n=bl();let o;return n?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=O(window,"message",a=>{a.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{o=O(r.contentWindow,"resize",t)}),d(e,r),()=>{(n||o&&r.contentWindow)&&o(),C(r)}}function M(e,t,l){e.classList[l?"add":"remove"](t)}let $e;function Ze(e){$e=e}function wl(){if(!$e)throw new Error("Function called outside component initialization");return $e}function vl(e){wl().$$.after_update.push(e)}function xt(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(r=>r.call(this,t))}const Ye=[],re=[],ft=[],bt=[],el=Promise.resolve();let kt=!1;function tl(){kt||(kt=!0,el.then(ll))}function Ve(){return tl(),el}function gt(e){ft.push(e)}function Se(e){bt.push(e)}const _t=new Set;let ut=0;function ll(){const e=$e;do{for(;ut<Ye.length;){const t=Ye[ut];ut++,Ze(t),zl(t.$$)}for(Ze(null),Ye.length=0,ut=0;re.length;)re.pop()();for(let t=0;t<ft.length;t+=1){const l=ft[t];_t.has(l)||(_t.add(l),l())}ft.length=0}while(Ye.length);for(;bt.length;)bt.pop()();kt=!1,_t.clear(),Ze(e)}function zl(e){if(e.fragment!==null){e.update(),Ce(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(gt)}}const dt=new Set;let Ae;function Ne(){Ae={r:0,c:[],p:Ae}}function Oe(){Ae.r||Ce(Ae.c),Ae=Ae.p}function S(e,t){e&&e.i&&(dt.delete(e),e.i(t))}function U(e,t,l,r){if(e&&e.o){if(dt.has(e))return;dt.add(e),Ae.c.push(()=>{dt.delete(e),r&&(l&&e.d(1),r())}),e.o(t)}else r&&r()}function Te(e,t,l){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=l,l(e.$$.ctx[r]))}function ye(e){e&&e.c()}function ve(e,t,l,r){const{fragment:n,on_mount:o,on_destroy:a,after_update:c}=e.$$;n&&n.m(t,l),r||gt(()=>{const i=o.map($t).filter(_l);a?a.push(...i):Ce(i),e.$$.on_mount=[]}),c.forEach(gt)}function ze(e,t){const l=e.$$;l.fragment!==null&&(Ce(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function yl(e,t){e.$$.dirty[0]===-1&&(Ye.push(e),tl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function yt(e,t,l,r,n,o,a,c=[-1]){const i=$e;Ze(e);const s=e.$$={fragment:null,ctx:null,props:o,update:Le,not_equal:n,bound:It(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:It(),dirty:c,skip_bound:!1,root:t.target||i.$$.root};a&&a(s.root);let p=!1;if(s.ctx=l?l(e,t.props||{},(b,g,..._)=>{const u=_.length?_[0]:g;return s.ctx&&n(s.ctx[b],s.ctx[b]=u)&&(!s.skip_bound&&s.bound[b]&&s.bound[b](u),p&&yl(e,b)),g}):[],s.update(),p=!0,Ce(s.before_update),s.fragment=r?r(s.ctx):!1,t.target){if(t.hydrate){const b=ml(t.target);s.fragment&&s.fragment.l(b),b.forEach(C)}else s.fragment&&s.fragment.c();t.intro&&S(e.$$.fragment),ve(e,t.target,t.anchor,t.customElement),ll()}Ze(i)}class Dt{$destroy(){ze(this,1),this.$destroy=Le}$on(t,l){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(l),()=>{const n=r.indexOf(l);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!pl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Dl(e){let t,l,r,n,o,a;return{c(){t=m("div"),l=q(e[1]),f(t,"style",r=e[0]&&e[2]?"background-color: "+e[2]+";":""),f(t,"class",n="h-10 p-2 "+(e[0]?e[3]:"")+" rounded-lg "+(e[0]?"border-solid":"border-none")+" border-2 text-center svelte-mesu7o")},m(c,i){E(c,t,i),d(t,l),o||(a=[O(t,"click",e[4]),O(t,"click",e[5])],o=!0)},p(c,[i]){i&2&&be(l,c[1]),i&5&&r!==(r=c[0]&&c[2]?"background-color: "+c[2]+";":"")&&f(t,"style",r),i&9&&n!==(n="h-10 p-2 "+(c[0]?c[3]:"")+" rounded-lg "+(c[0]?"border-solid":"border-none")+" border-2 text-center svelte-mesu7o")&&f(t,"class",n)},i:Le,o:Le,d(c){c&&C(t),o=!1,Ce(a)}}}function Pl(e,t,l){let{checked:r=!1}=t,{text:n="O"}=t,{bgcolor:o=""}=t,{toggleClass:a=o?"":"bg-green-600"}=t,c=()=>{console.log("toggle"),l(0,r=!r)};function i(s){xt.call(this,e,s)}return e.$$set=s=>{"checked"in s&&l(0,r=s.checked),"text"in s&&l(1,n=s.text),"bgcolor"in s&&l(2,o=s.bgcolor),"toggleClass"in s&&l(3,a=s.toggleClass)},[r,n,o,a,c,i]}class Pe extends Dt{constructor(t){super(),yt(this,t,Pl,Dl,vt,{checked:0,text:1,bgcolor:2,toggleClass:3})}}function Rt(e,t,l){const r=e.slice();return r[5]=t[l],r}function Et(e){let t,l;return{c(){t=m("span"),l=q("\xA0"),me(t,"background-color",e[5])},m(r,n){E(r,t,n),d(t,l)},p:Le,d(r){r&&C(t)}}}function Cl(e){let t,l,r,n,o,a,c=e[3],i=[];for(let s=0;s<c.length;s+=1)i[s]=Et(Rt(e,c,s));return{c(){t=m("button"),l=q(e[2]),r=P(),n=m("div");for(let s=0;s<i.length;s+=1)i[s].c();f(n,"class","svelte-63dooi"),f(t,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),M(t,"bg-green-600",e[1]==e[0])},m(s,p){E(s,t,p),d(t,l),d(t,r),d(t,n);for(let b=0;b<i.length;b+=1)i[b].m(n,null);o||(a=O(t,"click",e[4]),o=!0)},p(s,[p]){if(p&4&&be(l,s[2]),p&8){c=s[3];let b;for(b=0;b<c.length;b+=1){const g=Rt(s,c,b);i[b]?i[b].p(g,p):(i[b]=Et(g),i[b].c(),i[b].m(n,null))}for(;b<i.length;b+=1)i[b].d(1);i.length=c.length}p&3&&M(t,"bg-green-600",s[1]==s[0])},i:Le,o:Le,d(s){s&&C(t),Qe(i,s),o=!1,a()}}}function Il(e,t,l){let{color:r=""}=t,{selected:n=""}=t,{name:o="default"}=t,a=r.split(",");function c(i){xt.call(this,e,i)}return e.$$set=i=>{"color"in i&&l(0,r=i.color),"selected"in i&&l(1,n=i.selected),"name"in i&&l(2,o=i.name)},[r,n,o,a,c]}class Rl extends Dt{constructor(t){super(),yt(this,t,Il,Cl,vt,{color:0,selected:1,name:2})}}const wt=(e,t)=>({r:e.r-t.r,g:e.g-t.g,b:e.b-t.b}),El=(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}),Bl=(e,t,l)=>Math.max(e,Math.min(t,l));let pt={};const nl=e=>{if(pt[e])return pt[e];{if(e.length==4){let[o,a,c,i]=e.split("");e="#"+a+a+c+c+i+i}let t=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16),n={r:t,g:l,b:r};return pt[e]=n,n}},Pt=(e,t,l)=>{let r=wt(l?rl(e):e,t),n=Math.abs(r.r),o=Math.abs(r.g),a=Math.abs(r.b);return n*n+a*a+o*o};let mt={};const Gl=(e,t,l)=>{let r;mt[t]?r=mt[t]:(r=t.split(","),mt[t]=r);let n=r[0],o=null;return r.forEach((a,c)=>{let i=nl(a),s=Pt(i,e,l);(o==null||o>s)&&(o=s,n=i)}),n},Sl=(e,t,l)=>{let r=t[0],n=null;return t.forEach((o,a)=>{let c=Pt(o,e,l);(n==null||n>c)&&(n=c,r=o)}),r},il=e=>Math.floor((e.r+e.g+e.b)/3),Tl=e=>"#"+e.r.toString(16).padStart(2,"0")+e.g.toString(16).padStart(2,"0")+e.b.toString(16).padStart(2,"0"),rl=e=>{let t=il(e);return{r:t,g:t,b:t}};function Nl(e){let t=0;for(let l=0,r=e.length;l<r;l++){let n=e.charCodeAt(l);t=(t<<5)-t+n,t|=0}return t}const Ct=(e,t,l)=>(t*l+e)*4;let Ol=function(e,t,l,r){let n=e.width,o=Ct(t,l,n);e.data[o]=r.r,e.data[o+1]=r.g,e.data[o+2]=r.b},Ml=function(e,t,l){e.data[t]=l},Fl=function(e,t,l){let r=e.width,n=Ct(t,l,r);return{r:e.data[n],g:e.data[n+1],b:e.data[n+2]}};const G={getPixelDataRGB:Fl,setPixelDataRGB:Ol,setPixelDataRaw:Ml,calc_i:Ct,hashCode:Nl,Rgb2Gray:rl,RgbGrayValue:il,RgbToHex:Tl,nearestPixel:Gl,nearestPixel2:Sl,clamp:Bl,pixelAdd:El,pixelDiff:wt,hexToRgb:nl,calculatePixelDifference:Pt};function Bt(e,t,l){const r=e.slice();return r[77]=t[l],r}function Gt(e,t,l){const r=e.slice();return r[80]=t[l],r[81]=t,r[82]=l,r}function St(e,t,l){const r=e.slice();return r[83]=t[l],r[84]=t,r[85]=l,r}function Tt(e,t,l){const r=e.slice();return r[86]=t[l],r}function Nt(e,t,l){const r=e.slice();return r[89]=t[l],r}function Ot(e){let t,l,r,n,o,a,c,i,s,p=e[0].width+"",b,g,_,u,k,K,v,w,F,R,A,oe;function Y(y){e[38](y)}let se={text:"Pixelated"};e[0].pixelated!==void 0&&(se.checked=e[0].pixelated),k=new Pe({props:se}),re.push(()=>Te(k,"checked",Y));function Z(y){e[39](y)}let j={text:"Cache"};return e[0].cache!==void 0&&(j.checked=e[0].cache),w=new Pe({props:j}),re.push(()=>Te(w,"checked",Z)),{c(){t=m("div"),l=m("div"),r=m("div"),n=m("span"),n.textContent="Width",o=P(),a=m("input"),i=P(),s=m("span"),b=q(p),g=P(),_=m("div"),u=m("div"),ye(k.$$.fragment),v=P(),ye(w.$$.fragment),f(n,"class","svelte-7lre2h"),me(a,"flex","1"),f(a,"type","range"),f(a,"min","3"),f(a,"max",c=e[0].max_width),f(a,"step","3"),f(a,"class","svelte-7lre2h"),f(s,"class","svelte-7lre2h"),f(r,"class","flex slider-wrapper svelte-7lre2h"),f(u,"class","d-block"),f(_,"class","flex"),f(l,"class","flex flex-col"),f(t,"class","bg-white text-black p-2")},m(y,H){E(y,t,H),d(t,l),d(l,r),d(r,n),d(r,o),d(r,a),ke(a,e[0].width),d(r,i),d(r,s),d(s,b),d(l,g),d(l,_),d(_,u),ve(k,u,null),d(u,v),ve(w,u,null),R=!0,A||(oe=[O(a,"change",e[37]),O(a,"input",e[37])],A=!0)},p(y,H){(!R||H[0]&1&&c!==(c=y[0].max_width))&&f(a,"max",c),H[0]&1&&ke(a,y[0].width),(!R||H[0]&1)&&p!==(p=y[0].width+"")&&be(b,p);const X={};!K&&H[0]&1&&(K=!0,X.checked=y[0].pixelated,Se(()=>K=!1)),k.$set(X);const B={};!F&&H[0]&1&&(F=!0,B.checked=y[0].cache,Se(()=>F=!1)),w.$set(B)},i(y){R||(S(k.$$.fragment,y),S(w.$$.fragment,y),R=!0)},o(y){U(k.$$.fragment,y),U(w.$$.fragment,y),R=!1},d(y){y&&C(t),ze(k),ze(w),A=!1,Ce(oe)}}}function Mt(e){let t,l,r,n,o,a,c,i,s,p,b,g,_,u,k=e[0].rubiks_scale+"",K,v,w,F,R,A,oe,Y=e[0].grid_size+"",se,Z,j,y;function H(T){e[40](T)}let X={text:"rubiks"};e[0].show_rubiks!==void 0&&(X.checked=e[0].show_rubiks),n=new Pe({props:X}),re.push(()=>Te(n,"checked",H));function B(T){e[41](T)}let L={text:"Show Grid"};return e[0].show_grid!==void 0&&(L.checked=e[0].show_grid),c=new Pe({props:L}),re.push(()=>Te(c,"checked",B)),{c(){t=m("div"),l=m("div"),r=m("div"),ye(n.$$.fragment),a=P(),ye(c.$$.fragment),s=P(),p=m("div"),b=q(`Scale\r
            `),g=m("input"),_=P(),u=m("span"),K=q(k),v=P(),w=m("span"),w.textContent="\xA0",F=q(`\r
            Grid Size\r
            `),R=m("input"),A=P(),oe=m("span"),se=q(Y),f(r,"class","flex"),f(g,"type","range"),f(g,"max","40"),me(w,"margin-left","10px"),f(R,"type","range"),f(R,"max","10"),f(p,"class","flex"),f(l,"class","flex flex-col"),f(t,"class","bg-white text-black p-2")},m(T,$){E(T,t,$),d(t,l),d(l,r),ve(n,r,null),d(r,a),ve(c,r,null),d(l,s),d(l,p),d(p,b),d(p,g),ke(g,e[0].rubiks_scale),d(p,_),d(p,u),d(u,K),d(p,v),d(p,w),d(p,F),d(p,R),ke(R,e[0].grid_size),d(p,A),d(p,oe),d(oe,se),Z=!0,j||(y=[O(g,"change",e[42]),O(g,"input",e[42]),O(R,"change",e[43]),O(R,"input",e[43])],j=!0)},p(T,$){const De={};!o&&$[0]&1&&(o=!0,De.checked=T[0].show_rubiks,Se(()=>o=!1)),n.$set(De);const ae={};!i&&$[0]&1&&(i=!0,ae.checked=T[0].show_grid,Se(()=>i=!1)),c.$set(ae),$[0]&1&&ke(g,T[0].rubiks_scale),(!Z||$[0]&1)&&k!==(k=T[0].rubiks_scale+"")&&be(K,k),$[0]&1&&ke(R,T[0].grid_size),(!Z||$[0]&1)&&Y!==(Y=T[0].grid_size+"")&&be(se,Y)},i(T){Z||(S(n.$$.fragment,T),S(c.$$.fragment,T),Z=!0)},o(T){U(n.$$.fragment,T),U(c.$$.fragment,T),Z=!1},d(T){T&&C(t),ze(n),ze(c),j=!1,Ce(y)}}}function Ft(e){let t,l,r,n,o,a,c,i,s=e[0].mockup_pixel_size+"",p,b,g,_,u,k,K,v=e[0].mockup_x+"",w,F,R,A,oe,Y=e[0].mockup_y+"",se,Z,j;function y(B,L){return B[1].mockup_hovering?Al:Ll}let H=y(e),X=H(e);return{c(){t=m("div"),l=m("div"),X.c(),r=P(),n=m("canvas"),o=q(`\r
\r
        Mock Up Pixel\r
        `),a=m("input"),c=P(),i=m("span"),p=q(s),b=P(),g=m("br"),_=q(`\r
        Mock Up Position\r
        `),u=m("input"),k=P(),K=m("span"),w=q(v),F=P(),R=m("input"),A=P(),oe=m("span"),se=q(Y),me(n,"width","auto"),f(n,"class","svelte-7lre2h"),me(l,"height","auto"),f(l,"ondragover","return false"),f(l,"id","mockup_drop_zone"),f(l,"class","bg-red-500 h-full p-4"),f(a,"type","range"),f(a,"min","1"),f(a,"max","25"),f(u,"type","range"),f(u,"min","-500"),f(u,"max","500"),f(R,"type","range"),f(R,"min","-500"),f(R,"max","500"),f(t,"class","bg-white text-black p-2")},m(B,L){E(B,t,L),d(t,l),X.m(l,null),d(l,r),d(l,n),e[44](n),d(t,o),d(t,a),ke(a,e[0].mockup_pixel_size),d(t,c),d(t,i),d(i,p),d(t,b),d(t,g),d(t,_),d(t,u),ke(u,e[0].mockup_x),d(t,k),d(t,K),d(K,w),d(t,F),d(t,R),ke(R,e[0].mockup_y),d(t,A),d(t,oe),d(oe,se),Z||(j=[O(l,"drop",e[23]),O(l,"dragenter",e[24]),O(l,"dragleave",e[25]),O(a,"change",e[45]),O(a,"input",e[45]),O(u,"change",e[46]),O(u,"input",e[46]),O(R,"change",e[47]),O(R,"input",e[47])],Z=!0)},p(B,L){H!==(H=y(B))&&(X.d(1),X=H(B),X&&(X.c(),X.m(l,r))),L[0]&1&&ke(a,B[0].mockup_pixel_size),L[0]&1&&s!==(s=B[0].mockup_pixel_size+"")&&be(p,s),L[0]&1&&ke(u,B[0].mockup_x),L[0]&1&&v!==(v=B[0].mockup_x+"")&&be(w,v),L[0]&1&&ke(R,B[0].mockup_y),L[0]&1&&Y!==(Y=B[0].mockup_y+"")&&be(se,Y)},d(B){B&&C(t),X.d(),e[44](null),Z=!1,Ce(j)}}}function Al(e){let t;return{c(){t=q("Release to load file")},m(l,r){E(l,t,r)},d(l){l&&C(t)}}}function Ll(e){let t;return{c(){t=q("Drop MockUp Image here")},m(l,r){E(l,t,r)},d(l){l&&C(t)}}}function At(e){let t,l,r,n,o,a,c,i,s,p,b,g,_,u,k;function K(w){e[50](w)}let v={text:"Live Capture"};return e[0].live_capture!==void 0&&(v.checked=e[0].live_capture),a=new Pe({props:v}),re.push(()=>Te(a,"checked",K)),{c(){t=m("div"),l=m("button"),l.textContent="Start Capture",r=P(),n=m("button"),n.textContent="Take Screenshot",o=P(),ye(a.$$.fragment),i=P(),s=m("div"),p=m("video"),b=P(),g=m("canvas"),f(l,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),f(n,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),f(t,"class","flex"),me(p,"width","10%"),p.autoplay=!0,me(g,"width","10%"),f(g,"width",e[9]),f(g,"height",e[10]),f(g,"class","svelte-7lre2h"),f(s,"class","flex")},m(w,F){E(w,t,F),d(t,l),d(t,r),d(t,n),d(t,o),ve(a,t,null),E(w,i,F),E(w,s,F),d(s,p),e[51](p),d(s,b),d(s,g),e[52](g),_=!0,u||(k=[O(l,"click",e[48]),O(n,"click",e[49])],u=!0)},p(w,F){const R={};!c&&F[0]&1&&(c=!0,R.checked=w[0].live_capture,Se(()=>c=!1)),a.$set(R),(!_||F[0]&512)&&f(g,"width",w[9]),(!_||F[0]&1024)&&f(g,"height",w[10])},i(w){_||(S(a.$$.fragment,w),_=!0)},o(w){U(a.$$.fragment,w),_=!1},d(w){w&&C(t),ze(a),w&&C(i),w&&C(s),e[51](null),e[52](null),u=!1,Ce(k)}}}function Lt(e){let t,l,r,n,o,a,c,i,s,p,b,g,_,u,k,K,v,w,F,R,A;function oe(y){e[53](y)}let Y={text:"Gray"};e[0].gray_scale_input!==void 0&&(Y.checked=e[0].gray_scale_input),o=new Pe({props:Y}),re.push(()=>Te(o,"checked",oe));function se(y){e[54](y)}let Z={text:"Nearest Gray Pixel"};e[0].gray_scale_nearest_pixel!==void 0&&(Z.checked=e[0].gray_scale_nearest_pixel),b=new Pe({props:Z}),re.push(()=>Te(b,"checked",se)),k=new Pe({props:{text:"No Dithering",checked:e[0].dithering==""}}),k.$on("click",e[55]),v=new Pe({props:{text:"Patterned Dithering",checked:e[0].dithering=="pattern"}}),v.$on("click",e[56]);let j=e[0].dithering=="pattern"&&Ut(e);return R=new Pe({props:{text:"Floyd Steinberg",checked:e[0].dithering=="fs"}}),R.$on("click",e[58]),{c(){t=m("div"),l=m("div"),r=m("span"),r.textContent="Input Image:",n=P(),ye(o.$$.fragment),c=P(),i=m("div"),s=m("span"),s.textContent="Nearest Pixel:",p=P(),ye(b.$$.fragment),_=P(),u=m("div"),ye(k.$$.fragment),K=P(),ye(v.$$.fragment),w=P(),j&&j.c(),F=P(),ye(R.$$.fragment),f(r,"class","p-2"),f(l,"class","flex"),f(s,"class","p-2"),f(i,"class","flex"),f(u,"class","flex"),f(t,"class","bg-white text-black p-2")},m(y,H){E(y,t,H),d(t,l),d(l,r),d(l,n),ve(o,l,null),d(t,c),d(t,i),d(i,s),d(i,p),ve(b,i,null),d(t,_),d(t,u),ve(k,u,null),d(u,K),ve(v,u,null),d(u,w),j&&j.m(u,null),d(u,F),ve(R,u,null),A=!0},p(y,H){const X={};!a&&H[0]&1&&(a=!0,X.checked=y[0].gray_scale_input,Se(()=>a=!1)),o.$set(X);const B={};!g&&H[0]&1&&(g=!0,B.checked=y[0].gray_scale_nearest_pixel,Se(()=>g=!1)),b.$set(B);const L={};H[0]&1&&(L.checked=y[0].dithering==""),k.$set(L);const T={};H[0]&1&&(T.checked=y[0].dithering=="pattern"),v.$set(T),y[0].dithering=="pattern"?j?j.p(y,H):(j=Ut(y),j.c(),j.m(u,F)):j&&(j.d(1),j=null);const $={};H[0]&1&&($.checked=y[0].dithering=="fs"),R.$set($)},i(y){A||(S(o.$$.fragment,y),S(b.$$.fragment,y),S(k.$$.fragment,y),S(v.$$.fragment,y),S(R.$$.fragment,y),A=!0)},o(y){U(o.$$.fragment,y),U(b.$$.fragment,y),U(k.$$.fragment,y),U(v.$$.fragment,y),U(R.$$.fragment,y),A=!1},d(y){y&&C(t),ze(o),ze(b),ze(k),ze(v),j&&j.d(),ze(R)}}}function Ut(e){let t,l,r,n=e[17],o=[];for(let a=0;a<n.length;a+=1)o[a]=qt(Nt(e,n,a));return{c(){t=m("span"),t.textContent="Matrix:",l=P();for(let a=0;a<o.length;a+=1)o[a].c();r=zt(),f(t,"class","h-10 p-2")},m(a,c){E(a,t,c),E(a,l,c);for(let i=0;i<o.length;i+=1)o[i].m(a,c);E(a,r,c)},p(a,c){if(c[0]&131073){n=a[17];let i;for(i=0;i<n.length;i+=1){const s=Nt(a,n,i);o[i]?o[i].p(s,c):(o[i]=qt(s),o[i].c(),o[i].m(r.parentNode,r))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(a){a&&C(t),a&&C(l),Qe(o,a),a&&C(r)}}}function qt(e){let t,l=e[89].length+"",r,n,o,a;function c(){return e[57](e[89])}return{c(){t=m("button"),r=q(l),n=P(),f(t,"class","h-10 p-2 rounded-lg border-solid border-2"),M(t,"bg-green-600",e[0].matrix==e[89])},m(i,s){E(i,t,s),d(t,r),d(t,n),o||(a=O(t,"click",c),o=!0)},p(i,s){e=i,s[0]&131073&&M(t,"bg-green-600",e[0].matrix==e[89])},d(i){i&&C(t),o=!1,a()}}}function jt(e){let t,l,r,n,o,a=e[16],c=[];for(let g=0;g<a.length;g+=1)c[g]=Wt(Tt(e,a,g));const i=g=>U(c[g],1,1,()=>{c[g]=null});let s=e[0].individual_pallette_colors,p=[];for(let g=0;g<s.length;g+=1)p[g]=Ht(St(e,s,g));const b=g=>U(p[g],1,1,()=>{p[g]=null});return{c(){t=m("div"),l=m("div");for(let g=0;g<c.length;g+=1)c[g].c();r=P(),n=m("div");for(let g=0;g<p.length;g+=1)p[g].c();f(l,"class","flex"),f(t,"class","bg-white text-black p-2"),f(n,"class","flex")},m(g,_){E(g,t,_),d(t,l);for(let u=0;u<c.length;u+=1)c[u].m(l,null);E(g,r,_),E(g,n,_);for(let u=0;u<p.length;u+=1)p[u].m(n,null);o=!0},p(g,_){if(_[0]&67174401){a=g[16];let u;for(u=0;u<a.length;u+=1){const k=Tt(g,a,u);c[u]?(c[u].p(k,_),S(c[u],1)):(c[u]=Wt(k),c[u].c(),S(c[u],1),c[u].m(l,null))}for(Ne(),u=a.length;u<c.length;u+=1)i(u);Oe()}if(_[0]&1){s=g[0].individual_pallette_colors;let u;for(u=0;u<s.length;u+=1){const k=St(g,s,u);p[u]?(p[u].p(k,_),S(p[u],1)):(p[u]=Ht(k),p[u].c(),S(p[u],1),p[u].m(n,null))}for(Ne(),u=s.length;u<p.length;u+=1)b(u);Oe()}},i(g){if(!o){for(let _=0;_<a.length;_+=1)S(c[_]);for(let _=0;_<s.length;_+=1)S(p[_]);o=!0}},o(g){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)U(c[_]);p=p.filter(Boolean);for(let _=0;_<p.length;_+=1)U(p[_]);o=!1},d(g){g&&C(t),Qe(c,g),g&&C(r),g&&C(n),Qe(p,g)}}}function Wt(e){let t,l;function r(...n){return e[59](e[86],...n)}return t=new Rl({props:{selected:e[0].pallette,name:e[86].name,color:e[86].colors}}),t.$on("click",r),{c(){ye(t.$$.fragment)},m(n,o){ve(t,n,o),l=!0},p(n,o){e=n;const a={};o[0]&1&&(a.selected=e[0].pallette),t.$set(a)},i(n){l||(S(t.$$.fragment,n),l=!0)},o(n){U(t.$$.fragment,n),l=!1},d(n){ze(t,n)}}}function Ht(e){let t,l,r;function n(a){e[60](a,e[83])}let o={text:e[83].color,bgcolor:e[83].on?e[83].color:"white"};return e[83].on!==void 0&&(o.checked=e[83].on),t=new Pe({props:o}),re.push(()=>Te(t,"checked",n)),{c(){ye(t.$$.fragment)},m(a,c){ve(t,a,c),r=!0},p(a,c){e=a;const i={};c[0]&1&&(i.text=e[83].color),c[0]&1&&(i.bgcolor=e[83].on?e[83].color:"white"),!l&&c[0]&1&&(l=!0,i.checked=e[83].on,Se(()=>l=!1)),t.$set(i)},i(a){r||(S(t.$$.fragment,a),r=!0)},o(a){U(t.$$.fragment,a),r=!1},d(a){ze(t,a)}}}function Jt(e){let t,l,r,n,o,a,c,i,s,p,b,g=e[0].dithering=="pattern"&&Kt(e),_=e[0].dithering=="fs"&&Xt(e);return{c(){t=m("code"),l=q(e[15]),r=P(),n=m("input"),a=P(),g&&g.c(),c=P(),_&&_.c(),i=zt(),f(n,"type","range"),f(n,"min","-1"),f(n,"max",o=e[1].total_pixels),f(n,"step","1")},m(u,k){E(u,t,k),d(t,l),E(u,r,k),E(u,n,k),ke(n,e[0].debug_range),E(u,a,k),g&&g.m(u,k),E(u,c,k),_&&_.m(u,k),E(u,i,k),s=!0,p||(b=[O(n,"change",e[61]),O(n,"input",e[61])],p=!0)},p(u,k){(!s||k[0]&32768)&&be(l,u[15]),(!s||k[0]&2&&o!==(o=u[1].total_pixels))&&f(n,"max",o),k[0]&1&&ke(n,u[0].debug_range),u[0].dithering=="pattern"?g?g.p(u,k):(g=Kt(u),g.c(),g.m(c.parentNode,c)):g&&(g.d(1),g=null),u[0].dithering=="fs"?_?(_.p(u,k),k[0]&1&&S(_,1)):(_=Xt(u),_.c(),S(_,1),_.m(i.parentNode,i)):_&&(Ne(),U(_,1,1,()=>{_=null}),Oe())},i(u){s||(S(_),s=!0)},o(u){U(_),s=!1},d(u){u&&C(t),u&&C(r),u&&C(n),u&&C(a),g&&g.d(u),u&&C(c),_&&_.d(u),u&&C(i),p=!1,Ce(b)}}}function Kt(e){let t,l=e[0].matrix,r=[];for(let n=0;n<l.length;n+=1)r[n]=Qt(Bt(e,l,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=zt()},m(n,o){for(let a=0;a<r.length;a+=1)r[a].m(n,o);E(n,t,o)},p(n,o){if(o[0]&1){l=n[0].matrix;let a;for(a=0;a<l.length;a+=1){const c=Bt(n,l,a);r[a]?r[a].p(c,o):(r[a]=Qt(c),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=l.length}},d(n){Qe(r,n),n&&C(t)}}}function Vt(e){let t,l,r=e[80]+"",n,o,a;function c(){e[62].call(t,e[81],e[82])}return{c(){t=m("input"),l=P(),n=q(r),f(t,"type","range"),f(t,"step","0.01"),f(t,"max","1.0"),f(t,"min","0.0")},m(i,s){E(i,t,s),ke(t,e[80]),E(i,l,s),E(i,n,s),o||(a=[O(t,"change",c),O(t,"input",c)],o=!0)},p(i,s){e=i,s[0]&1&&ke(t,e[80]),s[0]&1&&r!==(r=e[80]+"")&&be(n,r)},d(i){i&&C(t),i&&C(l),i&&C(n),o=!1,Ce(a)}}}function Qt(e){let t,l,r=e[77],n=[];for(let o=0;o<r.length;o+=1)n[o]=Vt(Gt(e,r,o));return{c(){t=m("div");for(let o=0;o<n.length;o+=1)n[o].c();l=P(),f(t,"class","flex")},m(o,a){E(o,t,a);for(let c=0;c<n.length;c+=1)n[c].m(t,null);d(t,l)},p(o,a){if(a[0]&1){r=o[77];let c;for(c=0;c<r.length;c+=1){const i=Gt(o,r,c);n[c]?n[c].p(i,a):(n[c]=Vt(i),n[c].c(),n[c].m(t,l))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){o&&C(t),Qe(n,o)}}}function Xt(e){let t,l,r;function n(a){e[63](a)}let o={text:"Cap"};return e[0].cap!==void 0&&(o.checked=e[0].cap),t=new Pe({props:o}),re.push(()=>Te(t,"checked",n)),{c(){ye(t.$$.fragment)},m(a,c){ve(t,a,c),r=!0},p(a,c){const i={};!l&&c[0]&1&&(l=!0,i.checked=a[0].cap,Se(()=>l=!1)),t.$set(i)},i(a){r||(S(t.$$.fragment,a),r=!0)},o(a){U(t.$$.fragment,a),r=!1},d(a){ze(t,a)}}}function Ul(e){let t,l,r;return{c(){t=m("canvas"),f(t,"id","rubiks_canvas"),f(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),f(t,"height",r=e[1].resizedheight*e[0].rubiks_scale),f(t,"class","svelte-7lre2h"),M(t,"shown",e[3]&&e[0].show_rubiks),M(t,"pixelated",e[0].pixelated)},m(n,o){E(n,t,o),e[69](t)},p(n,o){o[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&f(t,"width",l),o[0]&3&&r!==(r=n[1].resizedheight*n[0].rubiks_scale)&&f(t,"height",r),o[0]&9&&M(t,"shown",n[3]&&n[0].show_rubiks),o[0]&1&&M(t,"pixelated",n[0].pixelated)},d(n){n&&C(t),e[69](null)}}}function ql(e){let t,l,r;return{c(){t=m("canvas"),me(t,"position","absolute"),me(t,"top",e[4]/2-e[1].resizedheight*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_y*e[2]/e[1].mockupwidth+"px"),me(t,"left",e[2]/2-e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_x*e[2]/e[1].mockupwidth+"px"),me(t,"width",e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth+"px"),f(t,"id","rubiks_canvas"),f(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),f(t,"height",r=e[1].resizedheight*e[0].rubiks_scale),f(t,"class","svelte-7lre2h"),M(t,"shown",e[3]&&e[0].show_rubiks),M(t,"pixelated",e[0].pixelated)},m(n,o){E(n,t,o),e[68](t)},p(n,o){o[0]&23&&me(t,"top",n[4]/2-n[1].resizedheight*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_y*n[2]/n[1].mockupwidth+"px"),o[0]&7&&me(t,"left",n[2]/2-n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_x*n[2]/n[1].mockupwidth+"px"),o[0]&7&&me(t,"width",n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth+"px"),o[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&f(t,"width",l),o[0]&3&&r!==(r=n[1].resizedheight*n[0].rubiks_scale)&&f(t,"height",r),o[0]&9&&M(t,"shown",n[3]&&n[0].show_rubiks),o[0]&1&&M(t,"pixelated",n[0].pixelated)},d(n){n&&C(t),e[68](null)}}}function Yt(e){let t;return{c(){t=m("div"),t.textContent="Drop to load image",f(t,"class","rounded-lg border-solid border-2 p-8 text-white text-center m-auto w-fit")},m(l,r){E(l,t,r)},d(l){l&&C(t)}}}function Zt(e){let t,l=e[1].resizedwidth+"",r,n,o=e[1].resizedheight+"",a,c,i=e[1].resizedwidth*e[1].resizedheight+"",s,p,b=e[1].resizedheight*e[1].resizedwidth/9+"",g,_,u,k,K;return{c(){t=q("Image Size: "),r=q(l),n=q(" x "),a=q(o),c=q(" = "),s=q(i),p=q(`\r
      | Total Rubiks: `),g=q(b),_=q(`\r
\r
      WIDTH: `),u=q(e[2]),k=q(`\r
      HEIGHT: `),K=q(e[4])},m(v,w){E(v,t,w),E(v,r,w),E(v,n,w),E(v,a,w),E(v,c,w),E(v,s,w),E(v,p,w),E(v,g,w),E(v,_,w),E(v,u,w),E(v,k,w),E(v,K,w)},p(v,w){w[0]&2&&l!==(l=v[1].resizedwidth+"")&&be(r,l),w[0]&2&&o!==(o=v[1].resizedheight+"")&&be(a,o),w[0]&2&&i!==(i=v[1].resizedwidth*v[1].resizedheight+"")&&be(s,i),w[0]&2&&b!==(b=v[1].resizedheight*v[1].resizedwidth/9+"")&&be(g,b),w[0]&4&&be(u,v[2]),w[0]&16&&be(K,v[4])},d(v){v&&C(t),v&&C(r),v&&C(n),v&&C(a),v&&C(c),v&&C(s),v&&C(p),v&&C(g),v&&C(_),v&&C(u),v&&C(k),v&&C(K)}}}function jl(e){let t,l,r,n,o,a,c,i,s,p,b,g,_,u,k,K,v,w,F,R,A,oe,Y,se,Z,j,y,H,X,B,L,T,$,De,ae,Ue,Fe,Be,ce,qe,je,xe,Ge,ue,We,He,et,tt,lt,nt,V,Xe,it;function ht(z){e[36](z)}let rt={text:"debug"};e[1].show_debug!==void 0&&(rt.checked=e[1].show_debug),A=new Pe({props:rt}),re.push(()=>Te(A,"checked",ht));let x=e[1].current=="img"&&Ot(e),ee=e[1].current=="rubiks"&&Mt(e),_e=e[1].current=="mockup"&&Ft(e),te=(e[1].current=="screen_capture"||e[0].live_capture)&&At(e),le=e[1].current=="processing"&&Lt(e),ne=e[1].current=="pallette"&&jt(e),ie=e[1].show_debug&&Jt(e);function ot(z,N){return z[0].has_mockup?ql:Ul}let Je=ot(e),Ie=Je(e),we=!e[3]&&e[1].hovering&&Yt(),pe=e[1].resizedheight&&e[1].resizedwidth&&Zt(e);return{c(){t=m("main"),l=m("div"),r=m("div"),n=m("div"),o=m("button"),o.textContent="Output Image",a=P(),c=m("button"),c.textContent="Pallette",i=P(),s=m("button"),s.textContent="Processing",p=P(),b=m("button"),b.textContent="Rubiks",g=P(),_=m("button"),_.textContent="Mock Up",u=P(),k=m("button"),k.textContent="ScreenCapture",K=P(),v=m("button"),v.textContent="Capture",w=P(),F=m("div"),R=P(),ye(A.$$.fragment),Y=P(),x&&x.c(),se=P(),ee&&ee.c(),Z=P(),_e&&_e.c(),j=P(),te&&te.c(),y=P(),le&&le.c(),H=P(),ne&&ne.c(),X=P(),ie&&ie.c(),B=P(),L=m("div"),T=m("div"),$=m("div"),De=m("div"),ae=m("canvas"),Be=P(),ce=m("canvas"),xe=P(),Ge=m("div"),ue=m("canvas"),tt=P(),Ie.c(),lt=P(),we&&we.c(),nt=P(),pe&&pe.c(),f(o,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),M(o,"bg-gray-400",e[1].current=="img"),f(c,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),M(c,"bg-gray-400",e[1].current=="pallette"),f(s,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),M(s,"bg-gray-400",e[1].current=="processing"),f(b,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),M(b,"bg-gray-400",e[1].current=="rubiks"),f(_,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),M(_,"bg-gray-400",e[1].current=="mockup"),f(k,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),M(k,"bg-gray-400",e[1].current=="screen_capture"||e[0].live_capture),f(v,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),f(F,"class","spacer svelte-7lre2h"),f(n,"class","flex"),f(r,"class","bg-white text-black p-2"),f(ae,"class","small svelte-7lre2h"),f(ae,"id","canvas"),f(ae,"width",Ue=e[1].canvaswidth),f(ae,"height",Fe=e[1].canvasheight),M(ae,"shown",e[3]),M(ae,"pixelated",e[0].pixelated),f(ce,"id","output_canvas"),f(ce,"width",qe=e[1].resizedwidth),f(ce,"height",je=e[1].resizedheight),f(ce,"class","svelte-7lre2h"),M(ce,"small",e[0].show_rubiks),M(ce,"shown",e[3]),M(ce,"pixelated",e[0].pixelated),me(ue,"position","absolute"),f(ue,"id","bgcanvas"),f(ue,"width",We=e[1].mockupwidth),f(ue,"height",He=e[1].mockupheight),f(ue,"class","svelte-7lre2h"),gt(()=>e[67].call(ue)),M(ue,"shown",e[0].has_mockup),me(Ge,"position","relative"),f(Ge,"id","canvas_wrapper"),f(De,"class","flex-col"),f($,"class","flex"),f(T,"ondragover","return false"),f(T,"id","drop_zone"),f(T,"class","bg-white h-full"),f(L,"class","bg-green-800 grow justify-center"),f(l,"class","flex flex-col bg-blue-800 h-screen")},m(z,N){E(z,t,N),d(t,l),d(l,r),d(r,n),d(n,o),d(n,a),d(n,c),d(n,i),d(n,s),d(n,p),d(n,b),d(n,g),d(n,_),d(n,u),d(n,k),d(n,K),d(n,v),d(n,w),d(n,F),d(n,R),ve(A,n,null),d(l,Y),x&&x.m(l,null),d(l,se),ee&&ee.m(l,null),d(l,Z),_e&&_e.m(l,null),d(l,j),te&&te.m(l,null),d(l,y),le&&le.m(l,null),d(l,H),ne&&ne.m(l,null),d(l,X),ie&&ie.m(l,null),d(l,B),d(l,L),d(L,T),d(T,$),d($,De),d(De,ae),e[64](ae),d(De,Be),d(De,ce),e[65](ce),d(De,xe),d(De,Ge),d(Ge,ue),e[66](ue),et=kl(ue,e[67].bind(ue)),d(Ge,tt),Ie.m(Ge,null),d(T,lt),we&&we.m(T,null),d(l,nt),pe&&pe.m(l,null),V=!0,Xe||(it=[O(o,"click",e[29]),O(c,"click",e[30]),O(s,"click",e[31]),O(b,"click",e[32]),O(_,"click",e[33]),O(k,"click",e[34]),O(v,"click",e[35]),O(T,"drop",e[20]),O(T,"dragenter",e[21]),O(T,"dragleave",e[22])],Xe=!0)},p(z,N){(!V||N[0]&2)&&M(o,"bg-gray-400",z[1].current=="img"),(!V||N[0]&2)&&M(c,"bg-gray-400",z[1].current=="pallette"),(!V||N[0]&2)&&M(s,"bg-gray-400",z[1].current=="processing"),(!V||N[0]&2)&&M(b,"bg-gray-400",z[1].current=="rubiks"),(!V||N[0]&2)&&M(_,"bg-gray-400",z[1].current=="mockup"),(!V||N[0]&3)&&M(k,"bg-gray-400",z[1].current=="screen_capture"||z[0].live_capture);const st={};!oe&&N[0]&2&&(oe=!0,st.checked=z[1].show_debug,Se(()=>oe=!1)),A.$set(st),z[1].current=="img"?x?(x.p(z,N),N[0]&2&&S(x,1)):(x=Ot(z),x.c(),S(x,1),x.m(l,se)):x&&(Ne(),U(x,1,1,()=>{x=null}),Oe()),z[1].current=="rubiks"?ee?(ee.p(z,N),N[0]&2&&S(ee,1)):(ee=Mt(z),ee.c(),S(ee,1),ee.m(l,Z)):ee&&(Ne(),U(ee,1,1,()=>{ee=null}),Oe()),z[1].current=="mockup"?_e?_e.p(z,N):(_e=Ft(z),_e.c(),_e.m(l,j)):_e&&(_e.d(1),_e=null),z[1].current=="screen_capture"||z[0].live_capture?te?(te.p(z,N),N[0]&3&&S(te,1)):(te=At(z),te.c(),S(te,1),te.m(l,y)):te&&(Ne(),U(te,1,1,()=>{te=null}),Oe()),z[1].current=="processing"?le?(le.p(z,N),N[0]&2&&S(le,1)):(le=Lt(z),le.c(),S(le,1),le.m(l,H)):le&&(Ne(),U(le,1,1,()=>{le=null}),Oe()),z[1].current=="pallette"?ne?(ne.p(z,N),N[0]&2&&S(ne,1)):(ne=jt(z),ne.c(),S(ne,1),ne.m(l,X)):ne&&(Ne(),U(ne,1,1,()=>{ne=null}),Oe()),z[1].show_debug?ie?(ie.p(z,N),N[0]&2&&S(ie,1)):(ie=Jt(z),ie.c(),S(ie,1),ie.m(l,B)):ie&&(Ne(),U(ie,1,1,()=>{ie=null}),Oe()),(!V||N[0]&2&&Ue!==(Ue=z[1].canvaswidth))&&f(ae,"width",Ue),(!V||N[0]&2&&Fe!==(Fe=z[1].canvasheight))&&f(ae,"height",Fe),(!V||N[0]&8)&&M(ae,"shown",z[3]),(!V||N[0]&1)&&M(ae,"pixelated",z[0].pixelated),(!V||N[0]&2&&qe!==(qe=z[1].resizedwidth))&&f(ce,"width",qe),(!V||N[0]&2&&je!==(je=z[1].resizedheight))&&f(ce,"height",je),(!V||N[0]&1)&&M(ce,"small",z[0].show_rubiks),(!V||N[0]&8)&&M(ce,"shown",z[3]),(!V||N[0]&1)&&M(ce,"pixelated",z[0].pixelated),(!V||N[0]&2&&We!==(We=z[1].mockupwidth))&&f(ue,"width",We),(!V||N[0]&2&&He!==(He=z[1].mockupheight))&&f(ue,"height",He),(!V||N[0]&1)&&M(ue,"shown",z[0].has_mockup),Je===(Je=ot(z))&&Ie?Ie.p(z,N):(Ie.d(1),Ie=Je(z),Ie&&(Ie.c(),Ie.m(Ge,null))),!z[3]&&z[1].hovering?we||(we=Yt(),we.c(),we.m(T,null)):we&&(we.d(1),we=null),z[1].resizedheight&&z[1].resizedwidth?pe?pe.p(z,N):(pe=Zt(z),pe.c(),pe.m(l,null)):pe&&(pe.d(1),pe=null)},i(z){V||(S(A.$$.fragment,z),S(x),S(ee),S(te),S(le),S(ne),S(ie),V=!0)},o(z){U(A.$$.fragment,z),U(x),U(ee),U(te),U(le),U(ne),U(ie),V=!1},d(z){z&&C(t),ze(A),x&&x.d(),ee&&ee.d(),_e&&_e.d(),te&&te.d(),le&&le.d(),ne&&ne.d(),ie&&ie.d(),e[64](null),e[65](null),e[66](null),et(),Ie.d(),we&&we.d(),pe&&pe.d(),Xe=!1,Ce(it)}}}function Wl(e,t,l){let r,n,o=!1,a=[{name:"rbk",colors:"#013082,#BB2328,#01B351,#FE8F25,#F5FF42,#ECF3F6"},{name:"rbkng",colors:"#013082,#BB2328,#FE8F25,#F5FF42,#ECF3F6"},{name:"b&w",colors:"#000,#fff"},{name:"gray",colors:"#000,#666,#fff"},{name:"grayscale",colors:"#000,#111,#222,#333,#444,#555,#666,#777,#888,#999,#aaa,#bbb,#ccc,#ddd,#eee,#fff"},{name:"rgb",colors:"#000,#f00,#0f0,#00f,#fff"},{name:"cmyk",colors:"#000,#0ff,#f0f,#ff0,#fff"}],c=[[[0/4,2/4],[3/4,1/4]],[[0/16,8/16,2/16,10/16],[12/16,4/16,14/16,6/16],[3/16,11/16,1/16,9/16],[15/16,7/16,13/16,5/16]]],i={loadedfile:"",cache:!0,cap:!1,pixelated:!0,has_mockup:!1,mockup_pixel_size:1,mockup_x:0,mockup_y:0,width:0,height:0,dithering:"pattern",max_width:600,show_rubiks:!0,show_grid:!1,rubiks_scale:8,gray_scale_input:!1,gray_scale_nearest_pixel:!1,grid_size:2,pallette:a[0].colors,individual_pallette_colors:[],debug_range:-1,matrix:c[0],live_capture:!1},s={current:"mockup",hovering:!1,mockup_hovering:!1,mockupheight:100,mockupwidth:100,show_debug:!1,resizedwidth:0,resizedheight:0,total_pixels:0,canvaswidth:100,canvasheight:100},p,b,g,_,u,k,K,v,w,F="",R={},A;async function oe(h){let I=null;try{I=await navigator.mediaDevices.getDisplayMedia(h),l(12,A.srcObject=I,A)}catch(fe){console.error(`Error: ${fe}`)}let D=()=>{$&&(i.live_capture&&$(),setTimeout(D,1e3/15))};D()}let Y=async function(){if(k){console.log("videocanvas is not null");let h=k.getContext("2d");console.log(A.videoWidth,A.videoHeight),await Ve();let I=300,D=I*A.videoHeight/A.videoWidth;l(9,K=I),l(10,v=D),h.drawImage(A,0,0,I,D),Ue(k)}else console.log("videocanvas is null")},se=function(h){h.preventDefault();let I=h;if(I.dataTransfer.items)if(I.dataTransfer.items.length==1){let D=I.dataTransfer.items[0];if(D.kind==="file"){const fe=D.getAsFile();ae(fe)}else console.log("kind is not file, but: "+D.kind)}else l(15,n="Error: can only load one file");l(1,s.hovering=!1,s)},Z=function(){console.log("drag enter"),l(1,s.hovering=!0,s)},j=function(){l(1,s.hovering=!1,s)},y=function(h){h.preventDefault();let I=h;if(I.dataTransfer.items)if(I.dataTransfer.items.length==1){let D=I.dataTransfer.items[0];if(D.kind==="file"){const fe=D.getAsFile();l(0,i.has_mockup=!0,i),De(fe)}else console.log("kind is not file, but: "+D.kind)}else l(15,n="Error: can only load one file");l(1,s.mockup_hovering=!1,s)},H=function(){console.log("drag enter"),l(1,s.mockup_hovering=!0,s)},X=function(){l(1,s.mockup_hovering=!1,s)},B,L,T,$=null,De=function(h){let I=_.getContext("2d"),D=T.getContext("2d");L=new Image,L.onload=async function(){await Ve(),l(1,s.mockupheight=L.height,s),l(1,s.mockupwidth=L.width,s),await Ve(),I.drawImage(L,0,0,L.width,L.height),D.drawImage(L,0,0,200,200*L.height/L.width)},L.src=URL.createObjectURL(h)},ae=function(h){l(0,i.loadedfile=h.name,i);let I=g.getContext("2d");B=new Image,B.onload=async function(){l(1,s.canvasheight=B.height,s),l(1,s.canvaswidth=B.width,s),l(0,i.width=Math.min(99,s.canvaswidth),i),l(0,i.max_width=Math.min(s.canvaswidth,999),i),l(3,o=!0),R={},await Ve(),I.drawImage(B,0,0,B.width,B.height)},B.src=URL.createObjectURL(h)},Ue=function(h){let I=g.getContext("2d");B=new Image,B.onload=async function(){l(1,s.canvasheight=B.height,s),l(1,s.canvaswidth=B.width,s),l(3,o=!0),R={},await Ve(),I.drawImage(B,0,0,B.width,B.height)},B.src=h.toDataURL("image/png")},Fe=function(h){l(0,i.pallette=h,i),l(0,i.individual_pallette_colors=[],i),h.split(",").forEach(I=>{i.individual_pallette_colors.push({color:I,on:!0})})},Be=function(h){s.current==h?l(1,s.current="",s):l(1,s.current=h,s)};vl(async()=>{if(!i.width){console.log("no width, ending here");return}if(!o){console.log("no image loaded, ending here");return}if(!B){console.log("originalImage is empty","ending here");return}let h=s.canvasheight/s.canvaswidth*i.width;if(l(0,i.height=h,i),l(1,s.resizedwidth=parseInt(i.width/3)*3,s),l(1,s.resizedheight=parseInt(h/3)*3,s),l(1,s.total_pixels=s.resizedheight*s.resizedwidth,s),await Ve(),h<1){console.log("height is less than 1","ending here");return}if(F=G.hashCode(JSON.stringify(r)),i.cache&&F&&R[F]){console.log("found",r.loadedfile,F,"from cache");let I=u.getContext("2d"),D=R[F].data,fe=new ImageData(D.data,D.width,D.height);I.putImageData(fe,0,0)}else{console.log("GENERATING IMAGE",JSON.stringify(r),F);let I=u.getContext("2d");I.drawImage(B,0,0,s.resizedwidth,s.resizedheight);let D=I.getImageData(0,0,s.resizedwidth,s.resizedheight);if(i.gray_scale_input)for(let W=0,de=0;W<D.height;W++)for(let Q=0;Q<D.width;Q++,de+=4){let Ke=G.getPixelDataRGB(D,Q,W),Ee=Math.round((Ke.r+Ke.g+Ke.b)/3);G.setPixelDataRaw(D,de,Ee),G.setPixelDataRaw(D,de+1,Ee),G.setPixelDataRaw(D,de+2,Ee)}let fe=i.pallette;i.individual_pallette_colors.length&&(fe=i.individual_pallette_colors.filter(W=>W.on).map(W=>W.color).join(","));let Re=fe.split(",").length,at=fe.split(",");at.forEach((W,de)=>{at[de]=G.hexToRgb(W)});for(let W=0,de=0;W<D.height;W++)for(let Q=0;Q<D.width;Q++,de+=4){let Ke=G.getPixelDataRGB(D,Q,W),Ee=G.nearestPixel2(Ke,at,i.gray_scale_nearest_pixel);if(i.dithering=="")G.setPixelDataRaw(D,de,Ee.r),G.setPixelDataRaw(D,de+1,Ee.g),G.setPixelDataRaw(D,de+2,Ee.b);else if(i.dithering=="fs"){G.setPixelDataRaw(D,de,Ee.r),G.setPixelDataRaw(D,de+1,Ee.g),G.setPixelDataRaw(D,de+2,Ee.b);let J=G.pixelDiff(Ke,Ee);if(Q<D.width-1){let ge=G.getPixelDataRGB(D,Q+1,W);i.cap?G.setPixelDataRGB(D,Q+1,W,{r:G.clamp(0,255,ge.r+J.r*7/16),g:G.clamp(0,255,ge.g+J.g*7/16),b:G.clamp(0,255,ge.b+J.b*7/16)}):G.setPixelDataRGB(D,Q+1,W,{r:ge.r+J.r*7/16,g:ge.g+J.g*7/16,b:ge.b+J.b*7/16})}if(W<D.height-1){if(Q>0){let he=G.getPixelDataRGB(D,Q-1,W+1);i.cap?G.setPixelDataRGB(D,Q-1,W+1,{r:G.clamp(0,255,he.r+J.r*3/16),g:G.clamp(0,255,he.g+J.g*3/16),b:G.clamp(0,255,he.b+J.b*3/16)}):G.setPixelDataRGB(D,Q-1,W+1,{r:he.r+J.r*3/16,g:he.g+J.g*3/16,b:he.b+J.b*3/16})}let ge=G.getPixelDataRGB(D,Q,W+1);if(i.cap?G.setPixelDataRGB(D,Q,W+1,{r:G.clamp(0,255,ge.r+J.r*5/16),g:G.clamp(0,255,ge.g+J.g*5/16),b:G.clamp(0,255,ge.b+J.b*5/16)}):G.setPixelDataRGB(D,Q,W+1,{r:ge.r+J.r*5/16,g:ge.g+J.g*5/16,b:ge.b+J.b*5/16}),Q<D.width-1){let he=G.getPixelDataRGB(D,Q+1,W+1);i.cap?G.setPixelDataRGB(D,Q+1,W+1,{r:G.clamp(0,255,he.r+J.r*1/16),g:G.clamp(0,255,he.g+J.g*1/16),b:G.clamp(0,255,he.b+J.b*1/16)}):G.setPixelDataRGB(D,Q+1,W+1,{r:he.r+J.r*1/16,g:he.g+J.g*1/16,b:he.b+J.b*1/16})}}}else if(i.dithering=="pattern"){let J=G.getPixelDataRGB(D,Q,W),ge=255/Re*(i.matrix[Q%i.matrix[0].length][W%i.matrix.length]-.5),he=G.nearestPixel2({r:J.r+ge,g:J.g+ge,b:J.b+ge},at,i.gray_scale_nearest_pixel);G.setPixelDataRaw(D,de,he.r),G.setPixelDataRaw(D,de+1,he.g),G.setPixelDataRaw(D,de+2,he.b)}}if(I.putImageData(D,0,0),i.cache){let W=new ImageData(new Uint8ClampedArray(D.data),D.width,D.height);console.log("adding",F,"to cache"),R[F]={data:W,params:Object.assign({},r),config:Object.assign({},i)}}}if(i.show_rubiks){let I=w.getContext("2d"),fe=u.getContext("2d").getImageData(0,0,s.resizedwidth,s.resizedheight);if(I.imageSmoothingEnabled=!1,I.drawImage(u,0,0,s.resizedwidth*i.rubiks_scale,s.resizedheight*i.rubiks_scale),i.show_grid&&i.grid_size>0){I.lineWidth=i.grid_size,I.strokeStyle="#000000";for(let Re=0;Re<fe.height;Re++)I.beginPath(),I.moveTo(0,Re*i.rubiks_scale),I.lineTo(fe.width*i.rubiks_scale,Re*i.rubiks_scale),I.stroke();for(let Re=0;Re<fe.width;Re++)I.beginPath(),I.moveTo(Re*i.rubiks_scale,0),I.lineTo(Re*i.rubiks_scale,fe.height*i.rubiks_scale),I.stroke()}}});const ce=()=>{Be("img")},qe=()=>{Be("pallette")},je=()=>{Be("processing")},xe=()=>{Be("rubiks")},Ge=()=>{Be("mockup")},ue=()=>{Be("screen_capture")},We=()=>{Y()};function He(h){e.$$.not_equal(s.show_debug,h)&&(s.show_debug=h,l(1,s))}function et(){i.width=Me(this.value),l(0,i)}function tt(h){e.$$.not_equal(i.pixelated,h)&&(i.pixelated=h,l(0,i))}function lt(h){e.$$.not_equal(i.cache,h)&&(i.cache=h,l(0,i))}function nt(h){e.$$.not_equal(i.show_rubiks,h)&&(i.show_rubiks=h,l(0,i))}function V(h){e.$$.not_equal(i.show_grid,h)&&(i.show_grid=h,l(0,i))}function Xe(){i.rubiks_scale=Me(this.value),l(0,i)}function it(){i.grid_size=Me(this.value),l(0,i)}function ht(h){re[h?"unshift":"push"](()=>{T=h,l(13,T)})}function rt(){i.mockup_pixel_size=Me(this.value),l(0,i)}function x(){i.mockup_x=Me(this.value),l(0,i)}function ee(){i.mockup_y=Me(this.value),l(0,i)}const _e=()=>{l(14,$=Y),oe()},te=()=>{Y()};function le(h){e.$$.not_equal(i.live_capture,h)&&(i.live_capture=h,l(0,i))}function ne(h){re[h?"unshift":"push"](()=>{A=h,l(12,A)})}function ie(h){re[h?"unshift":"push"](()=>{k=h,l(8,k)})}function ot(h){e.$$.not_equal(i.gray_scale_input,h)&&(i.gray_scale_input=h,l(0,i))}function Je(h){e.$$.not_equal(i.gray_scale_nearest_pixel,h)&&(i.gray_scale_nearest_pixel=h,l(0,i))}const Ie=()=>l(0,i.dithering="",i),we=()=>l(0,i.dithering="pattern",i),pe=h=>{l(0,i.matrix=h,i)},z=()=>l(0,i.dithering="fs",i),N=(h,I,D)=>{Fe(h.colors)};function st(h,I){e.$$.not_equal(I.on,h)&&(I.on=h,l(0,i))}function ol(){i.debug_range=Me(this.value),l(0,i)}function sl(h,I){h[I]=Me(this.value),l(0,i)}function al(h){e.$$.not_equal(i.cap,h)&&(i.cap=h,l(0,i))}function cl(h){re[h?"unshift":"push"](()=>{g=h,l(5,g)})}function ul(h){re[h?"unshift":"push"](()=>{u=h,l(7,u)})}function fl(h){re[h?"unshift":"push"](()=>{_=h,l(6,_)})}function dl(){b=this.clientHeight,p=this.clientWidth,l(4,b),l(2,p)}function gl(h){re[h?"unshift":"push"](()=>{w=h,l(11,w)})}function hl(h){re[h?"unshift":"push"](()=>{w=h,l(11,w)})}return e.$$.update=()=>{e.$$.dirty[0]&1&&l(28,r={loadedfile:i.loadedfile,width:i.width,height:i.height,dithering:i.dithering,gray_scale_input:i.gray_scale_input,gray_scale_nearest_pixel:i.gray_scale_nearest_pixel,pallette:i.pallette,individual_pallette_colors:i.individual_pallette_colors,matrix:i.matrix}),e.$$.dirty[0]&268435463&&l(15,n=("UI = "+JSON.stringify(s)+`
params: `+JSON.stringify(r)+`
CONFIG:`+JSON.stringify(i)+"CLIENT WIDTH:"+p).replaceAll(",",", "))},[i,s,p,o,b,g,_,u,k,K,v,w,A,T,$,n,a,c,oe,Y,se,Z,j,y,H,X,Fe,Be,r,ce,qe,je,xe,Ge,ue,We,He,et,tt,lt,nt,V,Xe,it,ht,rt,x,ee,_e,te,le,ne,ie,ot,Je,Ie,we,pe,z,N,st,ol,sl,al,cl,ul,fl,dl,gl,hl]}class Hl extends Dt{constructor(t){super(),yt(this,t,Wl,jl,vt,{},null,[-1,-1,-1])}}new Hl({target:document.getElementById("app")});
