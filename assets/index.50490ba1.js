(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function l(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=l(n);fetch(n.href,r)}})();function rt(){}function Ul(e,t){for(const l in t)e[l]=t[l];return e}function vl(e){return e()}function Ut(){return Object.create(null)}function Xe(e){e.forEach(vl)}function Vl(e){return typeof e=="function"}function At(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Jl(e){return Object.keys(e).length===0}function Kl(e,t,l,i){if(e){const n=zl(e,t,l,i);return e[0](n)}}function zl(e,t,l,i){return e[1]&&i?Ul(l.ctx.slice(),e[1](i(t))):l.ctx}function Yl(e,t,l,i){if(e[2]&&i){const n=e[2](i(l));if(t.dirty===void 0)return n;if(typeof n=="object"){const r=[],a=Math.max(t.dirty.length,n.length);for(let d=0;d<a;d+=1)r[d]=t.dirty[d]|n[d];return r}return t.dirty|n}return t.dirty}function Ql(e,t,l,i,n,r){if(n){const a=zl(t,l,i,r);e.p(a,n)}}function Xl(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let i=0;i<l;i++)t[i]=-1;return t}return-1}function Vt(e){return e==null?"":e}function s(e,t){e.appendChild(t)}function q(e,t,l){e.insertBefore(t,l||null)}function O(e){e.parentNode.removeChild(e)}function _t(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function g(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function b(){return M(" ")}function yl(){return M("")}function G(e,t,l,i){return e.addEventListener(t,l,i),()=>e.removeEventListener(t,l,i)}function c(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function We(e){return e===""?null:+e}function Zl(e){return Array.from(e.childNodes)}function pe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function fe(e,t){e.value=t==null?"":t}function he(e,t,l,i){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,i?"important":"")}let Rt;function $l(){if(Rt===void 0){Rt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Rt=!0}}return Rt}function xl(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=g("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const n=$l();let r;return n?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=G(window,"message",a=>{a.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=G(i.contentWindow,"resize",t)}),s(e,i),()=>{(n||r&&i.contentWindow)&&r(),O(i)}}function S(e,t,l){e.classList[l?"add":"remove"](t)}let bt;function mt(e){bt=e}function Cl(){if(!bt)throw new Error("Function called outside component initialization");return bt}function en(e){Cl().$$.on_mount.push(e)}function tn(e){Cl().$$.after_update.push(e)}function Pl(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(i=>i.call(this,t))}const pt=[],be=[],Gt=[],Ft=[],Dl=Promise.resolve();let Nt=!1;function Rl(){Nt||(Nt=!0,Dl.then(Il))}function ot(){return Rl(),Dl}function Et(e){Gt.push(e)}function nt(e){Ft.push(e)}const Mt=new Set;let It=0;function Il(){const e=bt;do{for(;It<pt.length;){const t=pt[It];It++,mt(t),ln(t.$$)}for(mt(null),pt.length=0,It=0;be.length;)be.pop()();for(let t=0;t<Gt.length;t+=1){const l=Gt[t];Mt.has(l)||(Mt.add(l),l())}Gt.length=0}while(pt.length);for(;Ft.length;)Ft.pop()();Nt=!1,Mt.clear(),mt(e)}function ln(e){if(e.fragment!==null){e.update(),Xe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Et)}}const Bt=new Set;let ct;function tt(){ct={r:0,c:[],p:ct}}function lt(){ct.r||Xe(ct.c),ct=ct.p}function L(e,t){e&&e.i&&(Bt.delete(e),e.i(t))}function K(e,t,l,i){if(e&&e.o){if(Bt.has(e))return;Bt.add(e),ct.c.push(()=>{Bt.delete(e),i&&(l&&e.d(1),i())}),e.o(t)}else i&&i()}function it(e,t,l){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=l,l(e.$$.ctx[i]))}function He(e){e&&e.c()}function Oe(e,t,l,i){const{fragment:n,on_mount:r,on_destroy:a,after_update:d}=e.$$;n&&n.m(t,l),i||Et(()=>{const f=r.map(vl).filter(Vl);a?a.push(...f):Xe(f),e.$$.on_mount=[]}),d.forEach(Et)}function Ae(e,t){const l=e.$$;l.fragment!==null&&(Xe(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function nn(e,t){e.$$.dirty[0]===-1&&(pt.push(e),Rl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qt(e,t,l,i,n,r,a,d=[-1]){const f=bt;mt(e);const o=e.$$={fragment:null,ctx:null,props:r,update:rt,not_equal:n,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Ut(),dirty:d,skip_bound:!1,root:t.target||f.$$.root};a&&a(o.root);let u=!1;if(o.ctx=l?l(e,t.props||{},(p,z,...k)=>{const m=k.length?k[0]:z;return o.ctx&&n(o.ctx[p],o.ctx[p]=m)&&(!o.skip_bound&&o.bound[p]&&o.bound[p](m),u&&nn(e,p)),z}):[],o.update(),u=!0,Xe(o.before_update),o.fragment=i?i(o.ctx):!1,t.target){if(t.hydrate){const p=Zl(t.target);o.fragment&&o.fragment.l(p),p.forEach(O)}else o.fragment&&o.fragment.c();t.intro&&L(e.$$.fragment),Oe(e,t.target,t.anchor,t.customElement),Il()}mt(f)}class Wt{$destroy(){Ae(this,1),this.$destroy=rt}$on(t,l){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(l),()=>{const n=i.indexOf(l);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!Jl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function on(e){let t;return{c(){t=g("input"),c(t,"type","radio"),t.checked=e[0]},m(l,i){q(l,t,i)},p(l,i){i&1&&(t.checked=l[0])},d(l){l&&O(t)}}}function rn(e){let t;return{c(){t=g("input"),c(t,"type","checkbox"),t.checked=e[0]},m(l,i){q(l,t,i)},p(l,i){i&1&&(t.checked=l[0])},d(l){l&&O(t)}}}function sn(e){let t,l,i,n,r,a,d,f,o;const u=e[7].default,p=Kl(u,e,e[6],null);function z(w,C){if(w[3]=="checkbox")return rn;if(w[3]=="radio")return on}let k=z(e),m=k&&k(e);return{c(){t=g("div"),p&&p.c(),l=b(),m&&m.c(),i=b(),n=M(e[1]),c(t,"class",r="p-2 "+(e[0]?e[2]:"")+" rounded-lg border-solid border-[1px] svelte-1t1l2hh"),c(t,"style",a=e[4]?`background-color: ${e[4]}`:"")},m(w,C){q(w,t,C),p&&p.m(t,null),s(t,l),m&&m.m(t,null),s(t,i),s(t,n),d=!0,f||(o=[G(t,"click",e[5]),G(t,"click",e[8])],f=!0)},p(w,[C]){p&&p.p&&(!d||C&64)&&Ql(p,u,w,w[6],d?Yl(u,w[6],C,null):Xl(w[6]),null),k===(k=z(w))&&m?m.p(w,C):(m&&m.d(1),m=k&&k(w),m&&(m.c(),m.m(t,i))),(!d||C&2)&&pe(n,w[1]),(!d||C&5&&r!==(r="p-2 "+(w[0]?w[2]:"")+" rounded-lg border-solid border-[1px] svelte-1t1l2hh"))&&c(t,"class",r),(!d||C&16&&a!==(a=w[4]?`background-color: ${w[4]}`:""))&&c(t,"style",a)},i(w){d||(L(p,w),d=!0)},o(w){K(p,w),d=!1},d(w){w&&O(t),p&&p.d(w),m&&m.d(),f=!1,Xe(o)}}}function an(e,t,l){let{$$slots:i={},$$scope:n}=t,{checked:r=!1}=t,{text:a="O"}=t,{toggleClass:d="bg-gray-200"}=t,{type:f="checkbox"}=t,{bgcolor:o=""}=t,u=()=>{l(0,r=!r)};function p(z){Pl.call(this,e,z)}return e.$$set=z=>{"checked"in z&&l(0,r=z.checked),"text"in z&&l(1,a=z.text),"toggleClass"in z&&l(2,d=z.toggleClass),"type"in z&&l(3,f=z.type),"bgcolor"in z&&l(4,o=z.bgcolor),"$$scope"in z&&l(6,n=z.$$scope)},[r,a,d,f,o,u,n,i,p]}class Je extends Wt{constructor(t){super(),qt(this,t,an,sn,At,{checked:0,text:1,toggleClass:2,type:3,bgcolor:4})}}function Jt(e,t,l){const i=e.slice();return i[3]=t[l],i}function Kt(e){let t;return{c(){t=g("div"),he(t,"background-color",e[3].color),c(t,"class","grow h-4")},m(l,i){q(l,t,i)},p(l,i){i&2&&he(t,"background-color",l[3].color)},d(l){l&&O(t)}}}function cn(e){let t,l,i,n,r=e[1],a=[];for(let d=0;d<r.length;d+=1)a[d]=Kt(Jt(e,r,d));return{c(){t=g("button"),l=g("div");for(let d=0;d<a.length;d+=1)a[d].c();c(l,"class","flex border-[1px] border-black w-12"),c(t,"class","p-2 rounded-lg border-solid border-2 text-center"),S(t,"bg-gray-400",e[0])},m(d,f){q(d,t,f),s(t,l);for(let o=0;o<a.length;o+=1)a[o].m(l,null);i||(n=G(t,"click",e[2]),i=!0)},p(d,[f]){if(f&2){r=d[1];let o;for(o=0;o<r.length;o+=1){const u=Jt(d,r,o);a[o]?a[o].p(u,f):(a[o]=Kt(u),a[o].c(),a[o].m(l,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}f&1&&S(t,"bg-gray-400",d[0])},i:rt,o:rt,d(d){d&&O(t),_t(a,d),i=!1,n()}}}function un(e,t,l){let{selected:i=""}=t,{colors:n}=t;function r(a){Pl.call(this,e,a)}return e.$$set=a=>{"selected"in a&&l(0,i=a.selected),"colors"in a&&l(1,n=a.colors)},[i,n,r]}class fn extends Wt{constructor(t){super(),qt(this,t,un,cn,At,{selected:0,colors:1})}}const Ot=(e,t)=>({r:e.r-t.r,g:e.g-t.g,b:e.b-t.b}),dn=(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}),gn=(e,t,l)=>Math.max(e,Math.min(t,l));let St={};const Gl=e=>{if(typeof e!="string")throw Error("wrong type in hexToRgb");if(St[e])return St[e];{if(e.length==4){let[r,a,d,f]=e.split("");e="#"+a+a+d+d+f+f}let t=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16),n={r:t,g:l,b:i};return St[e]=n,n}},Ht=(e,t,l)=>{let i=Ot(l?El(e):e,t),n=Math.abs(i.r),r=Math.abs(i.g),a=Math.abs(i.b);return n*n+a*a+r*r};let Lt={};const _n=(e,t,l)=>{let i;Lt[t]?i=Lt[t]:(i=t,Lt[t]=i);let n=i[0],r=null;return i.forEach((a,d)=>{let f=Gl(a),o=Ht(f,e,l);(r==null||r>o)&&(r=o,n=f)}),n},hn=(e,t,l)=>{let i=t[0],n=null;return t.forEach((r,a)=>{let d=Ht(r,e,l);(n==null||n>d)&&(n=d,i=r)}),i},Bl=e=>Math.floor((e.r+e.g+e.b)/3),Yt=e=>"#"+e.r.toString(16).padStart(2,"0")+e.g.toString(16).padStart(2,"0")+e.b.toString(16).padStart(2,"0"),El=e=>{let t=Bl(e);return{r:t,g:t,b:t}};function pn(e){let t=0;for(let l=0,i=e.length;l<i;l++){let n=e.charCodeAt(l);t=(t<<5)-t+n,t|=0}return t}const jt=(e,t,l)=>(t*l+e)*4;let mn=function(e,t,l,i){let n=e.width,r=jt(t,l,n);e.data[r]=i.r,e.data[r+1]=i.g,e.data[r+2]=i.b},bn=function(e,t,l){e.data[t]=l},kn=function(e,t,l){let i=e.width,n=jt(t,l,i);return{r:e.data[n],g:e.data[n+1],b:e.data[n+2]}};const wn=(e,t,l,i,n,r)=>{let a=t.getContext("2d"),f=e.getContext("2d").getImageData(0,0,n,r);a.putImageData(f,0,0)};function vn(e,t,l){for(var i=e.createImageData(t.width*l,t.height*l),n=0;n<t.height;n++)for(var r=0;r<t.width;r++)for(var a=[t.data[(n*t.width+r)*4+0],t.data[(n*t.width+r)*4+1],t.data[(n*t.width+r)*4+2],t.data[(n*t.width+r)*4+3]],d=0;d<l;d++)for(var f=n*l+d,o=0;o<l;o++)for(var u=r*l+o,p=0;p<4;p++)i.data[(f*i.width+u)*4+p]=a[p];return i}const zn=(e,t,l,i,n,r="#000000")=>{e.lineWidth=t,e.strokeStyle=r;for(let a=0;a<n+1;a++)e.beginPath(),e.moveTo(0,a*l),e.lineTo(i*l,a*l),e.stroke();for(let a=0;a<i+1;a++)e.beginPath(),e.moveTo(a*l,0),e.lineTo(a*l,n*l),e.stroke()},T={cloneSubset:wn,getPixelDataRGB:kn,setPixelDataRGB:mn,setPixelDataRaw:bn,calc_i:jt,hashCode:pn,Rgb2Gray:El,RgbGrayValue:Bl,RgbToHex:Yt,nearestPixel:_n,nearestPixel2:hn,clamp:gn,pixelAdd:dn,pixelDiff:Ot,hexToRgb:Gl,RgbToHex:Yt,calculatePixelDifference:Ht,drawGrid:zn,scaleImageData:vn};function Qt(e,t,l){const i=e.slice();return i[97]=t[l],i}function Xt(e,t,l){const i=e.slice();return i[100]=t[l],i[101]=t,i[102]=l,i}function Zt(e,t,l){const i=e.slice();return i[103]=t[l],i[104]=t,i[105]=l,i}function $t(e,t,l){const i=e.slice();return i[106]=t[l],i}function xt(e,t,l){const i=e.slice();return i[109]=t[l],i}function el(e){let t,l,i,n,r,a,d,f,o,u,p;function z(m){e[45](m)}let k={text:"Live"};return e[0].live_capture!==void 0&&(k.checked=e[0].live_capture),r=new Je({props:k}),be.push(()=>it(r,"checked",z)),{c(){t=g("video"),l=b(),i=g("button"),i.innerHTML='<i class="fa fa-camera"></i>',n=b(),He(r.$$.fragment),d=b(),f=g("canvas"),he(t,"max-height","40px"),he(t,"border","1px solid black"),t.autoplay=!0,c(i,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),he(f,"width","auto"),he(f,"max-height","40px"),he(f,"border","1px solid black"),c(f,"width",e[11]),c(f,"height",e[12]),c(f,"class","svelte-1w6kap6")},m(m,w){q(m,t,w),e[43](t),q(m,l,w),q(m,i,w),q(m,n,w),Oe(r,m,w),q(m,d,w),q(m,f,w),e[46](f),o=!0,u||(p=G(i,"click",e[44]),u=!0)},p(m,w){const C={};!a&&w[0]&1&&(a=!0,C.checked=m[0].live_capture,nt(()=>a=!1)),r.$set(C),(!o||w[0]&2048)&&c(f,"width",m[11]),(!o||w[0]&4096)&&c(f,"height",m[12])},i(m){o||(L(r.$$.fragment,m),o=!0)},o(m){K(r.$$.fragment,m),o=!1},d(m){m&&O(t),e[43](null),m&&O(l),m&&O(i),m&&O(n),Ae(r,m),m&&O(d),m&&O(f),e[46](null),u=!1,p()}}}function tl(e){let t,l,i,n,r,a=!1;return{c(){t=g("div"),l=g("div"),i=g("div"),n=g("div"),c(n,"class","d-block"),c(i,"class","flex"),c(l,"class","flex flex-col"),c(t,"class","text-black p-2")},m(d,f){q(d,t,f),s(t,l),s(l,i),s(i,n),r=!0},p(d,f){},i(d){r||(L(a),r=!0)},o(d){K(a),r=!1},d(d){d&&O(t)}}}function ll(e){let t,l,i,n,r,a,d,f,o,u,p,z,k,m,w,C,Y,X=e[1].resizedwidth+"",$,V,A=e[1].resizedheight+"",B,W,re=e[1].resizedwidth*e[1].resizedheight+"",D,J,h,y,P=e[1].resizedheight*e[1].resizedwidth/9+"",R,x,H,ne,le,j,de,oe=e[0].rubiks_scale+"",ee,Ee,me,ce,F,Z,Ie,qe=e[0].grid_size+"",Q,N,je,Ke,$e=!1;function st(se){e[51](se)}let _e={text:"Show Grid"};return e[0].show_grid!==void 0&&(_e.checked=e[0].show_grid),d=new Je({props:_e}),be.push(()=>it(d,"checked",st)),{c(){t=g("div"),l=g("h2"),l.textContent="Dimension",i=b(),n=g("div"),r=g("div"),a=b(),He(d.$$.fragment),o=b(),u=g("div"),p=g("span"),p.textContent="Width",z=b(),k=g("input"),w=b(),C=g("span"),Y=M("Resolution: "),$=M(X),V=M(" x "),B=M(A),W=M(" = "),D=M(re),J=b(),h=g("br"),y=M(`\r
                Cubes Needed: `),R=M(P),x=b(),H=g("div"),ne=M(`Scale\r
                `),le=g("input"),j=b(),de=g("span"),ee=M(oe),Ee=b(),me=g("span"),me.textContent="\xA0",ce=M(`\r
                Grid Size\r
                `),F=g("input"),Z=b(),Ie=g("span"),Q=M(qe),c(l,"class","svelte-1w6kap6"),c(r,"class","flex"),c(p,"class","p-2 svelte-1w6kap6"),he(k,"width","200px"),c(k,"type","range"),c(k,"min","3"),c(k,"max",m=e[0].max_width),c(k,"step","3"),c(k,"class","svelte-1w6kap6"),c(u,"class","flex slider-wrapper svelte-1w6kap6"),c(le,"type","range"),c(le,"max","40"),he(me,"margin-left","10px"),c(F,"type","range"),c(F,"max","10"),c(H,"class","flex"),he(H,"display","none"),c(n,"class","flex flex-col"),c(t,"class","text-black p-2")},m(se,ke){q(se,t,ke),s(t,l),s(t,i),s(t,n),s(n,r),s(r,a),Oe(d,r,null),s(n,o),s(n,u),s(u,p),s(u,z),s(u,k),fe(k,e[0].width),s(n,w),s(n,C),s(C,Y),s(C,$),s(C,V),s(C,B),s(C,W),s(C,D),s(C,J),s(C,h),s(C,y),s(C,R),s(n,x),s(n,H),s(H,ne),s(H,le),fe(le,e[0].rubiks_scale),s(H,j),s(H,de),s(de,ee),s(H,Ee),s(H,me),s(H,ce),s(H,F),fe(F,e[0].grid_size),s(H,Z),s(H,Ie),s(Ie,Q),N=!0,je||(Ke=[G(k,"change",e[52]),G(k,"input",e[52]),G(le,"change",e[53]),G(le,"input",e[53]),G(F,"change",e[54]),G(F,"input",e[54])],je=!0)},p(se,ke){const at={};!f&&ke[0]&1&&(f=!0,at.checked=se[0].show_grid,nt(()=>f=!1)),d.$set(at),(!N||ke[0]&1&&m!==(m=se[0].max_width))&&c(k,"max",m),ke[0]&1&&fe(k,se[0].width),(!N||ke[0]&2)&&X!==(X=se[1].resizedwidth+"")&&pe($,X),(!N||ke[0]&2)&&A!==(A=se[1].resizedheight+"")&&pe(B,A),(!N||ke[0]&2)&&re!==(re=se[1].resizedwidth*se[1].resizedheight+"")&&pe(D,re),(!N||ke[0]&2)&&P!==(P=se[1].resizedheight*se[1].resizedwidth/9+"")&&pe(R,P),ke[0]&1&&fe(le,se[0].rubiks_scale),(!N||ke[0]&1)&&oe!==(oe=se[0].rubiks_scale+"")&&pe(ee,oe),ke[0]&1&&fe(F,se[0].grid_size),(!N||ke[0]&1)&&qe!==(qe=se[0].grid_size+"")&&pe(Q,qe)},i(se){N||(L($e),L(d.$$.fragment,se),N=!0)},o(se){K($e),K(d.$$.fragment,se),N=!1},d(se){se&&O(t),Ae(d),je=!1,Xe(Ke)}}}function nl(e){let t,l,i,n,r,a,d,f,o,u,p,z,k,m,w,C=e[0].mockup_pixel_size+"",Y,X,$,V,A,B,W,re,D,J=e[0].mockup_x+"",h,y,P,R,x,H,ne,le=e[0].mockup_y+"",j,de,oe;function ee(F,Z){return F[1].mockup_hovering?yn:Cn}let Ee=ee(e),me=Ee(e),ce=e[0].has_mockup&&il(e);return{c(){t=g("div"),l=g("div"),i=g("h2"),i.textContent="Mock Up",n=b(),r=g("i"),r.textContent=`This should be an image of the wall where you'll place your\r
                rubik's cube art.`,a=b(),d=g("br"),f=b(),me.c(),o=b(),u=g("canvas"),p=b(),ce&&ce.c(),z=M(`\r
\r
            Pixel Size\r
            `),k=g("input"),m=b(),w=g("span"),Y=M(C),X=b(),$=g("br"),V=M(`\r
            Position\r
            `),A=g("br"),B=b(),W=g("input"),re=b(),D=g("span"),h=M(J),y=b(),P=g("br"),R=b(),x=g("input"),H=b(),ne=g("span"),j=M(le),c(i,"class","svelte-1w6kap6"),he(u,"width","auto"),c(u,"class","svelte-1w6kap6"),he(l,"height","auto"),c(l,"ondragover","return false"),c(l,"id","mockup_drop_zone"),c(l,"class","bg-green-200 h-full p-4"),c(k,"type","range"),c(k,"step","0.1"),c(k,"min","1"),c(k,"max","25"),c(W,"type","range"),c(W,"min","-500"),c(W,"max","500"),c(x,"type","range"),c(x,"min","-500"),c(x,"max","500"),c(t,"class","text-black p-2")},m(F,Z){q(F,t,Z),s(t,l),s(l,i),s(l,n),s(l,r),s(l,a),s(l,d),s(l,f),me.m(l,null),s(l,o),s(l,u),e[55](u),s(l,p),ce&&ce.m(l,null),s(t,z),s(t,k),fe(k,e[0].mockup_pixel_size),s(t,m),s(t,w),s(w,Y),s(t,X),s(t,$),s(t,V),s(t,A),s(t,B),s(t,W),fe(W,e[0].mockup_x),s(t,re),s(t,D),s(D,h),s(t,y),s(t,P),s(t,R),s(t,x),fe(x,e[0].mockup_y),s(t,H),s(t,ne),s(ne,j),de||(oe=[G(l,"drop",e[27]),G(l,"dragenter",e[28]),G(l,"dragleave",e[29]),G(k,"change",e[56]),G(k,"input",e[56]),G(W,"change",e[57]),G(W,"input",e[57]),G(x,"change",e[58]),G(x,"input",e[58])],de=!0)},p(F,Z){Ee!==(Ee=ee(F))&&(me.d(1),me=Ee(F),me&&(me.c(),me.m(l,o))),F[0].has_mockup?ce?ce.p(F,Z):(ce=il(F),ce.c(),ce.m(l,null)):ce&&(ce.d(1),ce=null),Z[0]&1&&fe(k,F[0].mockup_pixel_size),Z[0]&1&&C!==(C=F[0].mockup_pixel_size+"")&&pe(Y,C),Z[0]&1&&fe(W,F[0].mockup_x),Z[0]&1&&J!==(J=F[0].mockup_x+"")&&pe(h,J),Z[0]&1&&fe(x,F[0].mockup_y),Z[0]&1&&le!==(le=F[0].mockup_y+"")&&pe(j,le)},d(F){F&&O(t),me.d(),e[55](null),ce&&ce.d(),de=!1,Xe(oe)}}}function yn(e){let t;return{c(){t=M("Release to load file")},m(l,i){q(l,t,i)},d(l){l&&O(t)}}}function Cn(e){let t;return{c(){t=M("Drop Background Image here.")},m(l,i){q(l,t,i)},d(l){l&&O(t)}}}function il(e){let t,l,i;return{c(){t=g("button"),t.textContent="Remove mockup",c(t,"class","p-2 border-[1px] border-black")},m(n,r){q(n,t,r),l||(i=G(t,"click",e[30]),l=!0)},p:rt,d(n){n&&O(t),l=!1,i()}}}function ol(e){let t,l,i,n,r,a,d,f,o,u,p,z,k,m,w,C,Y,X,$,V,A;function B(h){e[59](h)}let W={text:"Make Input Image Gray First"};e[0].gray_scale_input!==void 0&&(W.checked=e[0].gray_scale_input),r=new Je({props:W}),be.push(()=>it(r,"checked",B));function re(h){e[60](h)}let D={text:"Use Gray Value To Calculate Nearest Pixel"};e[0].gray_scale_nearest_pixel!==void 0&&(D.checked=e[0].gray_scale_nearest_pixel),o=new Je({props:D}),be.push(()=>it(o,"checked",re)),w=new Je({props:{text:"None",type:"radio",checked:e[0].dithering==""}}),w.$on("click",e[61]),Y=new Je({props:{text:"Floyd Steinberg",type:"radio",checked:e[0].dithering=="fs"}}),Y.$on("click",e[62]),$=new Je({props:{text:"Patterned",type:"radio",checked:e[0].dithering=="pattern"}}),$.$on("click",e[63]);let J=e[0].dithering=="pattern"&&rl(e);return{c(){t=g("div"),l=g("h2"),l.textContent="Processing Options",i=b(),n=g("div"),He(r.$$.fragment),d=b(),f=g("div"),He(o.$$.fragment),p=b(),z=g("div"),k=g("span"),k.textContent="Dithering:",m=b(),He(w.$$.fragment),C=b(),He(Y.$$.fragment),X=b(),He($.$$.fragment),V=b(),J&&J.c(),c(l,"class","svelte-1w6kap6"),c(n,"class","flex"),c(f,"class","flex"),c(k,"class","p-2"),c(z,"class","flex"),c(t,"class","text-black p-2")},m(h,y){q(h,t,y),s(t,l),s(t,i),s(t,n),Oe(r,n,null),s(t,d),s(t,f),Oe(o,f,null),s(t,p),s(t,z),s(z,k),s(z,m),Oe(w,z,null),s(z,C),Oe(Y,z,null),s(z,X),Oe($,z,null),s(t,V),J&&J.m(t,null),A=!0},p(h,y){const P={};!a&&y[0]&1&&(a=!0,P.checked=h[0].gray_scale_input,nt(()=>a=!1)),r.$set(P);const R={};!u&&y[0]&1&&(u=!0,R.checked=h[0].gray_scale_nearest_pixel,nt(()=>u=!1)),o.$set(R);const x={};y[0]&1&&(x.checked=h[0].dithering==""),w.$set(x);const H={};y[0]&1&&(H.checked=h[0].dithering=="fs"),Y.$set(H);const ne={};y[0]&1&&(ne.checked=h[0].dithering=="pattern"),$.$set(ne),h[0].dithering=="pattern"?J?J.p(h,y):(J=rl(h),J.c(),J.m(t,null)):J&&(J.d(1),J=null)},i(h){A||(L(r.$$.fragment,h),L(o.$$.fragment,h),L(w.$$.fragment,h),L(Y.$$.fragment,h),L($.$$.fragment,h),A=!0)},o(h){K(r.$$.fragment,h),K(o.$$.fragment,h),K(w.$$.fragment,h),K(Y.$$.fragment,h),K($.$$.fragment,h),A=!1},d(h){h&&O(t),Ae(r),Ae(o),Ae(w),Ae(Y),Ae($),J&&J.d()}}}function rl(e){let t,l,i,n=e[20],r=[];for(let a=0;a<n.length;a+=1)r[a]=sl(xt(e,n,a));return{c(){t=g("div"),l=g("span"),l.textContent="Pattern Matrix Size:",i=b();for(let a=0;a<r.length;a+=1)r[a].c();c(l,"class","h-10 p-2")},m(a,d){q(a,t,d),s(t,l),s(t,i);for(let f=0;f<r.length;f+=1)r[f].m(t,null)},p(a,d){if(d[0]&1048577){n=a[20];let f;for(f=0;f<n.length;f+=1){const o=xt(a,n,f);r[f]?r[f].p(o,d):(r[f]=sl(o),r[f].c(),r[f].m(t,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=n.length}},d(a){a&&O(t),_t(r,a)}}}function sl(e){let t,l=e[109].length+"",i,n,r,a;function d(){return e[64](e[109])}return{c(){t=g("button"),i=M(l),n=b(),c(t,"class","h-10 p-2 rounded-lg border-solid border-2"),S(t,"bg-gray-200",e[0].matrix==e[109])},m(f,o){q(f,t,o),s(t,i),s(t,n),r||(a=G(t,"click",d),r=!0)},p(f,o){e=f,o[0]&1048577&&S(t,"bg-gray-200",e[0].matrix==e[109])},d(f){f&&O(t),r=!1,a()}}}function al(e){let t,l,i,n=e[0].pallette.name+"",r,a,d,f,o,u,p,z,k,m,w,C,Y,X;function $(h){e[65](h)}let V={text:"Make Colors Editable"};e[1].allow_edit_colors!==void 0&&(V.checked=e[1].allow_edit_colors),f=new Je({props:V}),be.push(()=>it(f,"checked",$));let A=e[4],B=[];for(let h=0;h<A.length;h+=1)B[h]=cl($t(e,A,h));const W=h=>K(B[h],1,1,()=>{B[h]=null});let re=e[0].pallette.colors,D=[];for(let h=0;h<re.length;h+=1)D[h]=ul(Zt(e,re,h));const J=h=>K(D[h],1,1,()=>{D[h]=null});return{c(){t=g("div"),l=g("h2"),i=M("Pallette - "),r=M(n),a=b(),d=g("div"),He(f.$$.fragment),u=b(),p=g("button"),p.textContent="Reset Pallettes",z=b(),k=g("div");for(let h=0;h<B.length;h+=1)B[h].c();m=b(),w=g("div");for(let h=0;h<D.length;h+=1)D[h].c();c(l,"class","svelte-1w6kap6"),c(p,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(d,"class","w-fit"),c(k,"class","flex"),c(t,"class","text-black p-2"),c(w,"class","flex px-2")},m(h,y){q(h,t,y),s(t,l),s(l,i),s(l,r),s(t,a),s(t,d),Oe(f,d,null),s(d,u),s(d,p),s(t,z),s(t,k);for(let P=0;P<B.length;P+=1)B[P].m(k,null);q(h,m,y),q(h,w,y);for(let P=0;P<D.length;P+=1)D[P].m(w,null);C=!0,Y||(X=G(p,"click",e[19]),Y=!0)},p(h,y){(!C||y[0]&1)&&n!==(n=h[0].pallette.name+"")&&pe(r,n);const P={};if(!o&&y[0]&2&&(o=!0,P.checked=h[1].allow_edit_colors,nt(()=>o=!1)),f.$set(P),y[0]&17|y[1]&1){A=h[4];let R;for(R=0;R<A.length;R+=1){const x=$t(h,A,R);B[R]?(B[R].p(x,y),L(B[R],1)):(B[R]=cl(x),B[R].c(),L(B[R],1),B[R].m(k,null))}for(tt(),R=A.length;R<B.length;R+=1)W(R);lt()}if(y[0]&3){re=h[0].pallette.colors;let R;for(R=0;R<re.length;R+=1){const x=Zt(h,re,R);D[R]?(D[R].p(x,y),L(D[R],1)):(D[R]=ul(x),D[R].c(),L(D[R],1),D[R].m(w,null))}for(tt(),R=re.length;R<D.length;R+=1)J(R);lt()}},i(h){if(!C){L(f.$$.fragment,h);for(let y=0;y<A.length;y+=1)L(B[y]);for(let y=0;y<re.length;y+=1)L(D[y]);C=!0}},o(h){K(f.$$.fragment,h),B=B.filter(Boolean);for(let y=0;y<B.length;y+=1)K(B[y]);D=D.filter(Boolean);for(let y=0;y<D.length;y+=1)K(D[y]);C=!1},d(h){h&&O(t),Ae(f),_t(B,h),h&&O(m),h&&O(w),_t(D,h),Y=!1,X()}}}function cl(e){let t,l;function i(...n){return e[66](e[106],...n)}return t=new fn({props:{selected:e[0].pallette==e[106],colors:e[106].colors}}),t.$on("click",i),{c(){He(t.$$.fragment)},m(n,r){Oe(t,n,r),l=!0},p(n,r){e=n;const a={};r[0]&17&&(a.selected=e[0].pallette==e[106]),r[0]&16&&(a.colors=e[106].colors),t.$set(a)},i(n){l||(L(t.$$.fragment,n),l=!0)},o(n){K(t.$$.fragment,n),l=!1},d(n){Ae(t,n)}}}function ul(e){let t,l,i,n,r,a,d,f,o;function u(k){e[67](k,e[103])}let p={text:"",toggleClass:"",bgcolor:e[103].color};e[103].on!==void 0&&(p.checked=e[103].on),l=new Je({props:p}),be.push(()=>it(l,"checked",u));function z(){e[68].call(r,e[104],e[105])}return{c(){t=g("div"),He(l.$$.fragment),n=b(),r=g("input"),a=b(),c(r,"type","color"),c(r,"name",""),c(r,"id",""),S(r,"hidden",!e[1].allow_edit_colors),c(t,"style","")},m(k,m){q(k,t,m),Oe(l,t,null),s(t,n),s(t,r),fe(r,e[103].color),s(t,a),d=!0,f||(o=G(r,"input",z),f=!0)},p(k,m){e=k;const w={};m[0]&1&&(w.bgcolor=e[103].color),!i&&m[0]&1&&(i=!0,w.checked=e[103].on,nt(()=>i=!1)),l.$set(w),m[0]&1&&fe(r,e[103].color),(!d||m[0]&2)&&S(r,"hidden",!e[1].allow_edit_colors)},i(k){d||(L(l.$$.fragment,k),d=!0)},o(k){K(l.$$.fragment,k),d=!1},d(k){k&&O(t),Ae(l),f=!1,o()}}}function fl(e){let t,l,i,n,r,a,d,f,o=e[0].dithering=="pattern"&&dl(e),u=e[0].dithering=="fs"&&!1;return{c(){t=g("div"),l=g("pre"),i=M(e[18]),n=b(),r=b(),o&&o.c(),a=b(),u&&u.c(),d=yl(),c(l,"class","svelte-1w6kap6"),c(t,"class","fixed h-full overflow-scroll bg-white right-0 shadow-lg")},m(p,z){q(p,t,z),s(t,l),s(l,i),s(t,n),q(p,r,z),o&&o.m(p,z),q(p,a,z),u&&u.m(p,z),q(p,d,z),f=!0},p(p,z){(!f||z[0]&262144)&&pe(i,p[18]),p[0].dithering=="pattern"?o?o.p(p,z):(o=dl(p),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null),p[0].dithering=="fs",u&&(tt(),K(u,1,1,()=>{u=null}),lt())},i(p){f||(L(u),f=!0)},o(p){K(u),f=!1},d(p){p&&O(t),p&&O(r),o&&o.d(p),p&&O(a),u&&u.d(p),p&&O(d)}}}function dl(e){let t,l,i,n=e[0].matrix,r=[];for(let a=0;a<n.length;a+=1)r[a]=_l(Qt(e,n,a));return{c(){t=M(`Matrix Vectors\r
            `),l=g("div");for(let a=0;a<r.length;a+=1)r[a].c();c(l,"class",i=Vt(`grid grid-cols-${e[0].matrix[0].length} w-fit`)+" svelte-1w6kap6")},m(a,d){q(a,t,d),q(a,l,d);for(let f=0;f<r.length;f+=1)r[f].m(l,null)},p(a,d){if(d[0]&1){n=a[0].matrix;let f;for(f=0;f<n.length;f+=1){const o=Qt(a,n,f);r[f]?r[f].p(o,d):(r[f]=_l(o),r[f].c(),r[f].m(l,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=n.length}d[0]&1&&i!==(i=Vt(`grid grid-cols-${a[0].matrix[0].length} w-fit`)+" svelte-1w6kap6")&&c(l,"class",i)},d(a){a&&O(t),a&&O(l),_t(r,a)}}}function gl(e){let t,l,i,n=e[100]+"",r,a,d,f;function o(){e[70].call(l,e[101],e[102])}return{c(){t=g("div"),l=g("input"),i=b(),r=M(n),a=b(),c(l,"type","range"),c(l,"step","0.01"),c(l,"max","1.0"),c(l,"min","0.0"),c(t,"class","p-2 svelte-1w6kap6")},m(u,p){q(u,t,p),s(t,l),fe(l,e[100]),s(t,i),s(t,r),s(t,a),d||(f=[G(l,"change",o),G(l,"input",o)],d=!0)},p(u,p){e=u,p[0]&1&&fe(l,e[100]),p[0]&1&&n!==(n=e[100]+"")&&pe(r,n)},d(u){u&&O(t),d=!1,Xe(f)}}}function _l(e){let t,l=e[97],i=[];for(let n=0;n<l.length;n+=1)i[n]=gl(Xt(e,l,n));return{c(){for(let n=0;n<i.length;n+=1)i[n].c();t=yl()},m(n,r){for(let a=0;a<i.length;a+=1)i[a].m(n,r);q(n,t,r)},p(n,r){if(r[0]&1){l=n[97];let a;for(a=0;a<l.length;a+=1){const d=Xt(n,l,a);i[a]?i[a].p(d,r):(i[a]=gl(d),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=l.length}},d(n){_t(i,n),n&&O(t)}}}function hl(e){let t,l,i,n,r,a,d,f,o,u=e[0].zoom_range.x+"",p,z,k,m,w,C=e[0].zoom_range.y+"",Y,X,$,V,A=e[1].select_pos.x+"",B,W,re=e[1].select_pos.y+"",D,J,h,y,P,R,x,H,ne,le,j,de,oe,ee,Ee;function me(Q){e[74](Q)}let ce={text:"Show Instructional Cubes?"};e[1].show_steps!==void 0&&(ce.checked=e[1].show_steps),P=new Je({props:ce}),be.push(()=>it(P,"checked",me));function F(Q){e[75](Q)}let Z={text:"Use arrow keys to move"};e[1].enable_arrows!==void 0&&(Z.checked=e[1].enable_arrows),H=new Je({props:Z}),be.push(()=>it(H,"checked",F));function Ie(Q){e[76](Q)}let qe={text:"Full-Width Rubiks"};return e[1].show_zoomed!==void 0&&(qe.checked=e[1].show_zoomed),j=new Je({props:qe}),be.push(()=>it(j,"checked",Ie)),{c(){t=g("div"),l=g("h2"),l.textContent="Ready to Cube?",i=b(),n=g("div"),r=g("div"),a=M(`Rows and columns of cubes to show.\r
                `),d=g("div"),f=g("input"),o=b(),p=M(u),z=b(),k=g("div"),m=g("input"),w=b(),Y=M(C),X=b(),$=g("span"),V=M("Cursor: ("),B=M(A),W=M(", "),D=M(re),J=M(")"),h=b(),y=g("span"),He(P.$$.fragment),x=b(),He(H.$$.fragment),le=b(),He(j.$$.fragment),c(l,"class","svelte-1w6kap6"),c(f,"type","range"),c(f,"min","1"),c(f,"max","36"),c(m,"type","range"),c(m,"min","1"),c(m,"max","36"),c(r,"class","flex flex-col"),c(y,"class","w-fit"),c(n,"class","flex flex-col gap-2"),c(t,"class","p-2")},m(Q,N){q(Q,t,N),s(t,l),s(t,i),s(t,n),s(n,r),s(r,a),s(r,d),s(d,f),fe(f,e[0].zoom_range.x),s(d,o),s(d,p),s(r,z),s(r,k),s(k,m),fe(m,e[0].zoom_range.y),s(k,w),s(k,Y),s(n,X),s(n,$),s($,V),s($,B),s($,W),s($,D),s($,J),s(n,h),s(n,y),Oe(P,y,null),s(y,x),Oe(H,y,null),s(y,le),Oe(j,y,null),oe=!0,ee||(Ee=[G(f,"change",e[72]),G(f,"input",e[72]),G(m,"change",e[73]),G(m,"input",e[73])],ee=!0)},p(Q,N){N[0]&1&&fe(f,Q[0].zoom_range.x),(!oe||N[0]&1)&&u!==(u=Q[0].zoom_range.x+"")&&pe(p,u),N[0]&1&&fe(m,Q[0].zoom_range.y),(!oe||N[0]&1)&&C!==(C=Q[0].zoom_range.y+"")&&pe(Y,C),(!oe||N[0]&2)&&A!==(A=Q[1].select_pos.x+"")&&pe(B,A),(!oe||N[0]&2)&&re!==(re=Q[1].select_pos.y+"")&&pe(D,re);const je={};!R&&N[0]&2&&(R=!0,je.checked=Q[1].show_steps,nt(()=>R=!1)),P.$set(je);const Ke={};!ne&&N[0]&2&&(ne=!0,Ke.checked=Q[1].enable_arrows,nt(()=>ne=!1)),H.$set(Ke);const $e={};!de&&N[0]&2&&(de=!0,$e.checked=Q[1].show_zoomed,nt(()=>de=!1)),j.$set($e)},i(Q){oe||(L(P.$$.fragment,Q),L(H.$$.fragment,Q),L(j.$$.fragment,Q),oe=!0)},o(Q){K(P.$$.fragment,Q),K(H.$$.fragment,Q),K(j.$$.fragment,Q),oe=!1},d(Q){Q&&O(t),Ae(P),Ae(H),Ae(j),ee=!1,Xe(Ee)}}}function pl(e){let t;return{c(){t=g("div"),t.textContent="Drop Image Here to Load",c(t,"class","h-full w-full flex justify-center items-center bg-gray-300")},m(l,i){q(l,t,i)},d(l){l&&O(t)}}}function ml(e){let t,l,i,n,r,a,d,f=e[0].screenCapturePadding.left+"",o,u,p,z,k,m,w=e[0].screenCapturePadding.right+"",C,Y,X,$,V,A,B=e[0].screenCapturePadding.top+"",W,re,D,J,h,y,P=e[0].screenCapturePadding.bottom+"",R,x,H;return{c(){t=g("div"),l=g("span"),l.textContent="Crop Screen Capture",i=b(),n=g("span"),r=M(`Left\r
                `),a=g("input"),d=b(),o=M(f),u=b(),p=g("span"),z=M(`Right\r
                `),k=g("input"),m=b(),C=M(w),Y=b(),X=g("span"),$=M(`Top\r
                `),V=g("input"),A=b(),W=M(B),re=b(),D=g("span"),J=M(`Bottom\r
                `),h=g("input"),y=b(),R=M(P),c(a,"type","range"),c(a,"min","0"),c(a,"max","100"),c(k,"type","range"),c(k,"min","0"),c(k,"max","100"),c(V,"type","range"),c(V,"min","0"),c(V,"max","100"),c(h,"type","range"),c(h,"min","0"),c(h,"max","100"),c(t,"class","flex flex-col")},m(ne,le){q(ne,t,le),s(t,l),s(t,i),s(t,n),s(n,r),s(n,a),fe(a,e[0].screenCapturePadding.left),s(n,d),s(n,o),s(t,u),s(t,p),s(p,z),s(p,k),fe(k,e[0].screenCapturePadding.right),s(p,m),s(p,C),s(t,Y),s(t,X),s(X,$),s(X,V),fe(V,e[0].screenCapturePadding.top),s(X,A),s(X,W),s(t,re),s(t,D),s(D,J),s(D,h),fe(h,e[0].screenCapturePadding.bottom),s(D,y),s(D,R),x||(H=[G(a,"change",e[77]),G(a,"input",e[77]),G(k,"change",e[78]),G(k,"input",e[78]),G(V,"change",e[79]),G(V,"input",e[79]),G(h,"change",e[80]),G(h,"input",e[80])],x=!0)},p(ne,le){le[0]&1&&fe(a,ne[0].screenCapturePadding.left),le[0]&1&&f!==(f=ne[0].screenCapturePadding.left+"")&&pe(o,f),le[0]&1&&fe(k,ne[0].screenCapturePadding.right),le[0]&1&&w!==(w=ne[0].screenCapturePadding.right+"")&&pe(C,w),le[0]&1&&fe(V,ne[0].screenCapturePadding.top),le[0]&1&&B!==(B=ne[0].screenCapturePadding.top+"")&&pe(W,B),le[0]&1&&fe(h,ne[0].screenCapturePadding.bottom),le[0]&1&&P!==(P=ne[0].screenCapturePadding.bottom+"")&&pe(R,P)},d(ne){ne&&O(t),x=!1,Xe(H)}}}function bl(e){let t,l,i=e[1].select_pos.x+1+"",n,r,a=e[1].select_pos.y+1+"",d;return{c(){t=g("div"),l=M("Column "),n=M(i),r=M(", Row "),d=M(a),c(t,"class","min-w-[20px]")},m(f,o){q(f,t,o),s(t,l),s(t,n),s(t,r),s(t,d)},p(f,o){o[0]&2&&i!==(i=f[1].select_pos.x+1+"")&&pe(n,i),o[0]&2&&a!==(a=f[1].select_pos.y+1+"")&&pe(d,a)},d(f){f&&O(t)}}}function Pn(e){let t,l,i;return{c(){t=g("canvas"),c(t,"id","rubiks_canvas"),c(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),c(t,"height",i=e[1].resizedheight*e[0].rubiks_scale),c(t,"class","svelte-1w6kap6"),S(t,"shown",e[3]&&e[0].show_rubiks),S(t,"pixelated",e[0].pixelated)},m(n,r){q(n,t,r),e[86](t)},p(n,r){r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&c(t,"width",l),r[0]&3&&i!==(i=n[1].resizedheight*n[0].rubiks_scale)&&c(t,"height",i),r[0]&9&&S(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&S(t,"pixelated",n[0].pixelated)},d(n){n&&O(t),e[86](null)}}}function Dn(e){let t,l,i;return{c(){t=g("canvas"),he(t,"position","absolute"),he(t,"top",e[5]/2-e[1].resizedheight*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_y*e[2]/e[1].mockupwidth+"px"),he(t,"left",e[2]/2-e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_x*e[2]/e[1].mockupwidth+"px"),he(t,"width",e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth+"px"),c(t,"id","rubiks_canvas"),c(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),c(t,"height",i=e[1].resizedheight*e[0].rubiks_scale),c(t,"class","svelte-1w6kap6"),S(t,"shown",e[3]&&e[0].show_rubiks),S(t,"pixelated",e[0].pixelated)},m(n,r){q(n,t,r),e[85](t)},p(n,r){r[0]&39&&he(t,"top",n[5]/2-n[1].resizedheight*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_y*n[2]/n[1].mockupwidth+"px"),r[0]&7&&he(t,"left",n[2]/2-n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_x*n[2]/n[1].mockupwidth+"px"),r[0]&7&&he(t,"width",n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth+"px"),r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&c(t,"width",l),r[0]&3&&i!==(i=n[1].resizedheight*n[0].rubiks_scale)&&c(t,"height",i),r[0]&9&&S(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&S(t,"pixelated",n[0].pixelated)},d(n){n&&O(t),e[85](null)}}}function kl(e){let t;return{c(){t=g("div"),t.textContent="Drop to load image",c(t,"class","rounded-lg border-solid border-2 p-8 text-white text-center m-auto w-fit")},m(l,i){q(l,t,i)},d(l){l&&O(t)}}}function wl(e){return{c:rt,m:rt,d:rt}}function Rn(e){let t,l,i,n,r,a,d,f,o,u,p,z,k,m,w,C,Y,X,$,V,A,B,W,re,D,J,h,y,P,R,x,H,ne,le,j,de,oe,ee,Ee,me,ce,F,Z,Ie,qe,Q,N,je,Ke,$e,st,_e,se,ke,at,Ue,Ve,ut,ft,kt,wt,vt,zt,ae,ht,yt,we=e[15]&&el(e);function Tt(v){e[47](v)}let Ct={text:"Debug"};e[1].show_debug!==void 0&&(Ct.checked=e[1].show_debug),D=new Je({props:Ct}),be.push(()=>it(D,"checked",Tt));let ve=e[1].current=="img"&&tl(),ze=e[1].current=="rubiks"&&ll(e),Te=e[1].current=="mockup"&&nl(e),ye=e[1].current=="processing"&&ol(e),Ce=e[1].current=="pallette"&&al(e),Pe=e[1].show_debug&&fl(e),De=e[1].current=="arrows"&&hl(e),Le=!e[3]&&pl(),Me=e[15]&&ml(e),Se=e[1].show_steps&&bl(e);function Pt(v,E){return v[0].has_mockup?Dn:Pn}let dt=Pt(e),Ye=dt(e),Fe=!e[3]&&e[1].hovering&&kl(),Ne=e[1].resizedheight&&e[1].resizedwidth&&wl();return{c(){t=g("main"),l=g("div"),i=g("div"),n=g("div"),r=b(),a=g("button"),a.innerHTML='<i class="fa-fw fa fa-folder-open"></i>',d=b(),f=g("button"),f.innerHTML='<i class="fa-fw fa fa-expand"></i>',o=b(),u=g("button"),u.innerHTML='<i class="fa-fw fa fa-palette"></i>',p=b(),z=g("button"),z.innerHTML='<i class="fa-fw fa fa-cog"></i>',k=b(),m=g("button"),m.innerHTML='<i class="fa fa-image"></i>',w=b(),C=g("button"),C.innerHTML='<i class="fa-fw fa fa-play"></i>',Y=b(),X=g("button"),X.innerHTML='<i class="fa-fw fa fa-desktop"></i>',$=b(),V=g("button"),V.textContent="Capture",A=b(),we&&we.c(),B=b(),W=g("div"),re=b(),He(D.$$.fragment),h=b(),y=g("div"),P=g("div"),ve&&ve.c(),R=b(),ze&&ze.c(),x=b(),Te&&Te.c(),H=b(),ye&&ye.c(),ne=b(),Ce&&Ce.c(),le=b(),Pe&&Pe.c(),j=b(),De&&De.c(),de=b(),oe=g("div"),ee=g("div"),Le&&Le.c(),Ee=b(),Me&&Me.c(),me=b(),ce=g("div"),F=g("div"),Z=g("canvas"),Q=b(),N=g("canvas"),$e=b(),Se&&Se.c(),st=b(),_e=g("canvas"),at=b(),Ue=g("div"),Ve=g("canvas"),kt=b(),Ye.c(),vt=b(),Fe&&Fe.c(),zt=b(),Ne&&Ne.c(),c(a,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(a,"title","Open File"),c(f,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(f,"title","Dimensions"),S(f,"bg-gray-400",e[1].current=="rubiks"),c(u,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(u,"title","Colors"),S(u,"bg-gray-400",e[1].current=="pallette"),c(z,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(z,"title","Image Processing"),S(z,"bg-gray-400",e[1].current=="processing"),c(m,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(m,"bg-gray-400",e[1].current=="mockup"),c(C,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),S(C,"bg-gray-400",e[1].current=="arrows"),c(X,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),c(X,"title","Screen Capture"),S(X,"bg-gray-400",e[15]),c(V,"class","hidden h-10 p-2 rounded-lg border-solid border-2 text-center"),c(W,"class","spacer svelte-1w6kap6"),c(n,"class","flex"),c(i,"class","bg-white text-black p-2"),c(P,"class","bg-white shadow-md absolute z-10 pb-2"),he(Z,"display","none"),c(Z,"class","small svelte-1w6kap6"),c(Z,"id","canvas"),c(Z,"width",Ie=e[1].canvaswidth),c(Z,"height",qe=e[1].canvasheight),S(Z,"shown",e[3]),S(Z,"pixelated",e[0].pixelated),c(N,"id","output_canvas"),c(N,"width",je=e[1].resizedwidth),c(N,"height",Ke=e[1].resizedheight),he(N,"border","4px solid red"),c(N,"class","svelte-1w6kap6"),S(N,"small",e[0].show_rubiks),S(N,"shown",e[3]),S(N,"pixelated",e[0].pixelated),he(_e,"image-rendering","pixelated"),c(_e,"id","preview"),c(_e,"class","border-red-500 border-4 svelte-1w6kap6"),c(_e,"width",se=e[0].zoom_range.x*3*Number(e[0].rubiks_scale)),c(_e,"height",ke=e[0].zoom_range.y*3*Number(e[0].rubiks_scale)),S(_e,"w-full",e[1].show_zoomed),S(_e,"fixed",!e[1].show_steps),S(_e,"top-[-100vh]",!e[1].show_steps),S(_e,"relative",e[1].show_steps),c(Ve,"id","bgcanvas"),c(Ve,"width",ut=e[1].mockupwidth),c(Ve,"height",ft=e[1].mockupheight),c(Ve,"class","svelte-1w6kap6"),S(Ve,"shown",e[0].has_mockup),he(Ue,"position","relative"),c(Ue,"id","canvas_wrapper"),Et(()=>e[87].call(Ue)),c(F,"class","flex-col"),c(ce,"class","flex"),c(ee,"ondragover","return false"),c(ee,"id","drop_zone"),c(ee,"class","h-full"),c(oe,"class","h-full grow justify-center"),c(oe,"style",""),c(y,"class","main relative h-full"),c(y,"style",""),c(l,"class","flex flex-col h-screen")},m(v,E){q(v,t,E),s(t,l),s(l,i),s(i,n),s(n,r),s(n,a),s(n,d),s(n,f),s(n,o),s(n,u),s(n,p),s(n,z),s(n,k),s(n,m),s(n,w),s(n,C),s(n,Y),s(n,X),s(n,$),s(n,V),s(n,A),we&&we.m(n,null),s(n,B),s(n,W),s(n,re),Oe(D,n,null),s(l,h),s(l,y),s(y,P),ve&&ve.m(P,null),s(P,R),ze&&ze.m(P,null),s(P,x),Te&&Te.m(P,null),s(P,H),ye&&ye.m(P,null),s(P,ne),Ce&&Ce.m(P,null),s(P,le),Pe&&Pe.m(P,null),s(P,j),De&&De.m(P,null),s(y,de),s(y,oe),s(oe,ee),Le&&Le.m(ee,null),s(ee,Ee),Me&&Me.m(ee,null),s(ee,me),s(ee,ce),s(ce,F),s(F,Z),e[81](Z),s(F,Q),s(F,N),e[82](N),s(F,$e),Se&&Se.m(F,null),s(F,st),s(F,_e),e[83](_e),s(F,at),s(F,Ue),s(Ue,Ve),e[84](Ve),s(Ue,kt),Ye.m(Ue,null),wt=xl(Ue,e[87].bind(Ue)),s(ee,vt),Fe&&Fe.m(ee,null),s(l,zt),Ne&&Ne.m(l,null),ae=!0,ht||(yt=[G(a,"click",e[35]),G(f,"click",e[36]),G(u,"click",e[37]),G(z,"click",e[38]),G(m,"click",e[39]),G(C,"click",e[40]),G(X,"click",e[41]),G(V,"click",e[42]),G(ee,"drop",e[23]),G(ee,"dragenter",e[25]),G(ee,"dragleave",e[26]),G(oe,"click",e[88])],ht=!0)},p(v,E){(!ae||E[0]&2)&&S(f,"bg-gray-400",v[1].current=="rubiks"),(!ae||E[0]&2)&&S(u,"bg-gray-400",v[1].current=="pallette"),(!ae||E[0]&2)&&S(z,"bg-gray-400",v[1].current=="processing"),(!ae||E[0]&2)&&S(m,"bg-gray-400",v[1].current=="mockup"),(!ae||E[0]&2)&&S(C,"bg-gray-400",v[1].current=="arrows"),(!ae||E[0]&32768)&&S(X,"bg-gray-400",v[15]),v[15]?we?(we.p(v,E),E[0]&32768&&L(we,1)):(we=el(v),we.c(),L(we,1),we.m(n,B)):we&&(tt(),K(we,1,1,()=>{we=null}),lt());const Dt={};!J&&E[0]&2&&(J=!0,Dt.checked=v[1].show_debug,nt(()=>J=!1)),D.$set(Dt),v[1].current=="img"?ve?(ve.p(v,E),E[0]&2&&L(ve,1)):(ve=tl(),ve.c(),L(ve,1),ve.m(P,R)):ve&&(tt(),K(ve,1,1,()=>{ve=null}),lt()),v[1].current=="rubiks"?ze?(ze.p(v,E),E[0]&2&&L(ze,1)):(ze=ll(v),ze.c(),L(ze,1),ze.m(P,x)):ze&&(tt(),K(ze,1,1,()=>{ze=null}),lt()),v[1].current=="mockup"?Te?Te.p(v,E):(Te=nl(v),Te.c(),Te.m(P,H)):Te&&(Te.d(1),Te=null),v[1].current=="processing"?ye?(ye.p(v,E),E[0]&2&&L(ye,1)):(ye=ol(v),ye.c(),L(ye,1),ye.m(P,ne)):ye&&(tt(),K(ye,1,1,()=>{ye=null}),lt()),v[1].current=="pallette"?Ce?(Ce.p(v,E),E[0]&2&&L(Ce,1)):(Ce=al(v),Ce.c(),L(Ce,1),Ce.m(P,le)):Ce&&(tt(),K(Ce,1,1,()=>{Ce=null}),lt()),v[1].show_debug?Pe?(Pe.p(v,E),E[0]&2&&L(Pe,1)):(Pe=fl(v),Pe.c(),L(Pe,1),Pe.m(P,j)):Pe&&(tt(),K(Pe,1,1,()=>{Pe=null}),lt()),v[1].current=="arrows"?De?(De.p(v,E),E[0]&2&&L(De,1)):(De=hl(v),De.c(),L(De,1),De.m(P,null)):De&&(tt(),K(De,1,1,()=>{De=null}),lt()),v[3]?Le&&(Le.d(1),Le=null):Le||(Le=pl(),Le.c(),Le.m(ee,Ee)),v[15]?Me?Me.p(v,E):(Me=ml(v),Me.c(),Me.m(ee,me)):Me&&(Me.d(1),Me=null),(!ae||E[0]&2&&Ie!==(Ie=v[1].canvaswidth))&&c(Z,"width",Ie),(!ae||E[0]&2&&qe!==(qe=v[1].canvasheight))&&c(Z,"height",qe),(!ae||E[0]&8)&&S(Z,"shown",v[3]),(!ae||E[0]&1)&&S(Z,"pixelated",v[0].pixelated),(!ae||E[0]&2&&je!==(je=v[1].resizedwidth))&&c(N,"width",je),(!ae||E[0]&2&&Ke!==(Ke=v[1].resizedheight))&&c(N,"height",Ke),(!ae||E[0]&1)&&S(N,"small",v[0].show_rubiks),(!ae||E[0]&8)&&S(N,"shown",v[3]),(!ae||E[0]&1)&&S(N,"pixelated",v[0].pixelated),v[1].show_steps?Se?Se.p(v,E):(Se=bl(v),Se.c(),Se.m(F,st)):Se&&(Se.d(1),Se=null),(!ae||E[0]&1&&se!==(se=v[0].zoom_range.x*3*Number(v[0].rubiks_scale)))&&c(_e,"width",se),(!ae||E[0]&1&&ke!==(ke=v[0].zoom_range.y*3*Number(v[0].rubiks_scale)))&&c(_e,"height",ke),(!ae||E[0]&2)&&S(_e,"w-full",v[1].show_zoomed),(!ae||E[0]&2)&&S(_e,"fixed",!v[1].show_steps),(!ae||E[0]&2)&&S(_e,"top-[-100vh]",!v[1].show_steps),(!ae||E[0]&2)&&S(_e,"relative",v[1].show_steps),(!ae||E[0]&2&&ut!==(ut=v[1].mockupwidth))&&c(Ve,"width",ut),(!ae||E[0]&2&&ft!==(ft=v[1].mockupheight))&&c(Ve,"height",ft),(!ae||E[0]&1)&&S(Ve,"shown",v[0].has_mockup),dt===(dt=Pt(v))&&Ye?Ye.p(v,E):(Ye.d(1),Ye=dt(v),Ye&&(Ye.c(),Ye.m(Ue,null))),!v[3]&&v[1].hovering?Fe||(Fe=kl(),Fe.c(),Fe.m(ee,null)):Fe&&(Fe.d(1),Fe=null),v[1].resizedheight&&v[1].resizedwidth?Ne||(Ne=wl(),Ne.c(),Ne.m(l,null)):Ne&&(Ne.d(1),Ne=null)},i(v){ae||(L(we),L(D.$$.fragment,v),L(ve),L(ze),L(ye),L(Ce),L(Pe),L(De),ae=!0)},o(v){K(we),K(D.$$.fragment,v),K(ve),K(ze),K(ye),K(Ce),K(Pe),K(De),ae=!1},d(v){v&&O(t),we&&we.d(),Ae(D),ve&&ve.d(),ze&&ze.d(),Te&&Te.d(),ye&&ye.d(),Ce&&Ce.d(),Pe&&Pe.d(),De&&De.d(),Le&&Le.d(),Me&&Me.d(),e[81](null),e[82](null),Se&&Se.d(),e[83](null),e[84](null),Ye.d(),wt(),Fe&&Fe.d(),Ne&&Ne.d(),ht=!1,Xe(yt)}}}function In(e,t,l){let i,n;en(()=>{window.addEventListener("keydown",_=>{if(u.enable_arrows&&u.show_steps)switch(_.key){case"ArrowUp":_.preventDefault(),l(1,u.select_pos.y-=1,u);break;case"ArrowDown":_.preventDefault(),l(1,u.select_pos.y+=1,u);break;case"ArrowLeft":l(1,u.select_pos.x-=1,u),_.preventDefault();break;case"ArrowRight":l(1,u.select_pos.x+=1,u),_.preventDefault();break}}),d(),Z(a[0])});let r=!1,a=[];function d(){l(4,a=[{name:"Rubik's Colors",colors:[{color:"#013082",on:!0},{color:"#BB2328",on:!0},{color:"#01B351",on:!0},{color:"#FE8F25",on:!0},{color:"#F5FF42",on:!0},{color:"#ECF3F6",on:!0}]},{name:"Rubik's Colors W/O Green",colors:[{color:"#013082",on:!0},{color:"#BB2328",on:!0},{color:"#FE8F25",on:!0},{color:"#F5FF42",on:!0},{color:"#ECF3F6",on:!0}]},{name:"Black & White",colors:[{color:"#000",on:!0},{color:"#fff",on:!0}]},{name:"Black, Gray, White",colors:[{color:"#000",on:!0},{color:"#666",on:!0},{color:"#fff",on:!0}]},{name:"Gray Scale",colors:[{color:"#000",on:!0},{color:"#111",on:!0},{color:"#222",on:!0},{color:"#333",on:!0},{color:"#444",on:!0},{color:"#555",on:!0},{color:"#666",on:!0},{color:"#777",on:!0},{color:"#888",on:!0},{color:"#999",on:!0},{color:"#aaa",on:!0},{color:"#bbb",on:!0},{color:"#ccc",on:!0},{color:"#ddd",on:!0},{color:"#eee",on:!0},{color:"#fff",on:!0}]},{name:"RGB",colors:[{color:"#000",on:!0},{color:"#f00",on:!0},{color:"#0f0",on:!0},{color:"#00f",on:!0},{color:"#fff",on:!0}]},{name:"CMYK",colors:[{color:"#000",on:!0},{color:"#0ff",on:!0},{color:"#f0f",on:!0},{color:"#ff0",on:!0},{color:"#fff",on:!0}]}])}let f=[[[0/4,2/4],[3/4,1/4]],[[0/16,8/16,2/16,10/16],[12/16,4/16,14/16,6/16],[3/16,11/16,1/16,9/16],[15/16,7/16,13/16,5/16]]],o={zoom_range:{x:6,y:1},screenCapturePadding:{top:0,left:0,bottom:0,right:0},loadedfile:"",cache:!0,cap:!1,pixelated:!1,has_mockup:!1,mockup_pixel_size:5,mockup_x:0,mockup_y:0,width:99,height:0,dithering:"fs",max_width:600,show_rubiks:!0,show_grid:!0,rubiks_scale:8,gray_scale_input:!1,gray_scale_nearest_pixel:!1,grid_size:2,pallette:a[0],debug_range:-1,matrix:f[0],live_capture:!1},u={allow_edit_colors:!1,enable_arrows:!0,current:"",select_pos:{x:0,y:0},hovering:!1,mockup_hovering:!1,mockupheight:100,mockupwidth:100,show_zoomed:!1,show_steps:!1,show_debug:!1,resizedwidth:0,resizedheight:0,total_pixels:0,canvaswidth:100,canvasheight:100},p,z,k,m,w,C,Y,X,$,V,A="",B={},W,re=!1,D=!1;async function J(_){let te=null;try{te=await navigator.mediaDevices.getDisplayMedia(_),re=!0,l(15,D=!0),await ot(),l(14,W.srcObject=te,W),setTimeout(()=>{h()},250)}catch(I){console.error(`Error: ${I}`)}let U=()=>{ee&&(o.live_capture&&ee(),setTimeout(U,1e3/15))};U()}let h=async function(){if(Y){console.log("videocanvas is not null");let _=Y.getContext("2d");console.log(W.videoWidth,W.videoHeight),await ot();let te=300,U=te*W.videoHeight/W.videoWidth,{top:I,bottom:Qe,left:xe,right:et}={...o.screenCapturePadding};l(11,X=te-xe-et),l(12,$=U-I-Qe),await ot(),_.drawImage(W,-xe,-I,te,U),console.log("loading image on video"),F(Y)}else console.log("videocanvas is null")},y=function(_){_.preventDefault();let te=_;if(te.dataTransfer.items)if(te.dataTransfer.items.length==1){let U=te.dataTransfer.items[0];if(U.kind==="file"){const I=U.getAsFile();ce(I)}else console.log("kind is not file, but: "+U.kind)}else l(18,n="Error: can only load one file");l(1,u.hovering=!1,u)},P=function(){var _=document.createElement("input");_.type="file",_.onchange=te=>{var U=te.target.files[0];ce(U)},_.click()},R=function(){console.log("drag enter"),l(1,u.hovering=!0,u)},x=function(){l(1,u.hovering=!1,u)},H=function(_){_.preventDefault();let te=_;if(te.dataTransfer.items)if(te.dataTransfer.items.length==1){let U=te.dataTransfer.items[0];if(U.kind==="file"){const I=U.getAsFile();l(0,o.has_mockup=!0,o),Ee(I)}else console.log("kind is not file, but: "+U.kind)}else l(18,n="Error: can only load one file");l(1,u.mockup_hovering=!1,u)},ne=function(){console.log("drag enter"),l(1,u.mockup_hovering=!0,u)},le=function(){l(1,u.mockup_hovering=!1,u)},j,de,oe,ee=null,Ee=function(_){let te=m.getContext("2d"),U=oe.getContext("2d");de=new Image,de.onload=async function(){await ot(),l(1,u.mockupheight=de.height,u),l(1,u.mockupwidth=de.width,u),await ot(),te.drawImage(de,0,0,de.width,de.height),U.drawImage(de,0,0,200,200*de.height/de.width)},de.src=URL.createObjectURL(_)},me=function(){l(0,o.has_mockup=!1,o),de.src=null,oe.getContext("2d").clearRect(0,0,oe.width,oe.height)},ce=function(_){var U;l(15,D=!1),l(0,o.loadedfile=_.name,o),(U=o.loadedfile)!=null&&U.toLowerCase().endsWith(".png")&&alert("Transparent PNGs have known issues.. Please use non-transparent PNGs");let te=k.getContext("2d");j=new Image,j.onload=async function(){l(1,u.canvasheight=j.height,u),l(1,u.canvaswidth=j.width,u),l(3,r=!0),B={},await ot(),te.drawImage(j,0,0,j.width,j.height)},j.src=URL.createObjectURL(_)},F=function(_){let te=k.getContext("2d");j=new Image,j.onload=async function(){l(1,u.canvasheight=j.height,u),l(1,u.canvaswidth=j.width,u),l(3,r=!0),B={},await ot(),te.drawImage(j,0,0,j.width,j.height)},j.src=_.toDataURL("image/png")},Z=function(_){l(0,o.pallette=_,o)},Ie=function(_){u.current==_?l(1,u.current="",u):l(1,u.current=_,u)};tn(async()=>{if(!o.width){console.log("no width, ending here");return}if(!r){console.log("no image loaded, ending here");return}if(!j){console.log("originalImage is empty","ending here");return}let _=u.canvasheight/u.canvaswidth*o.width;if(l(0,o.height=_,o),l(1,u.resizedwidth=parseInt(o.width/3)*3,u),l(1,u.resizedheight=parseInt(_/3)*3,u),l(1,u.total_pixels=u.resizedheight*u.resizedwidth,u),await ot(),_<1){console.log("height is less than 1","ending here");return}if(A=T.hashCode(JSON.stringify(i)),o.cache&&A&&B[A]){console.log("found",i.loadedfile,A,"from cache");let U=w.getContext("2d"),I=B[A].data,Qe=new ImageData(I.data,I.width,I.height);U.putImageData(Qe,0,0)}else{console.log("GENERATING IMAGE",JSON.stringify(i),A);let U=w.getContext("2d");U.drawImage(j,0,0,u.resizedwidth,u.resizedheight);let I=U.getImageData(0,0,u.resizedwidth,u.resizedheight);if(o.gray_scale_input)for(let ie=0,Re=0;ie<I.height;ie++)for(let ge=0;ge<I.width;ge++,Re+=4){let gt=T.getPixelDataRGB(I,ge,ie),Ze=Math.round((gt.r+gt.g+gt.b)/3);T.setPixelDataRaw(I,Re,Ze),T.setPixelDataRaw(I,Re+1,Ze),T.setPixelDataRaw(I,Re+2,Ze)}let Qe=o.pallette.colors;o.pallette.colors.length&&(Qe=o.pallette.colors.filter(ie=>ie.on).map(ie=>ie.color));let xe=Qe.length,et=Qe;et.forEach((ie,Re)=>{et[Re]=T.hexToRgb(ie)});for(let ie=0,Re=0;ie<I.height;ie++)for(let ge=0;ge<I.width;ge++,Re+=4){let gt=T.getPixelDataRGB(I,ge,ie),Ze=T.nearestPixel2(gt,et,o.gray_scale_nearest_pixel);if(o.dithering=="")T.setPixelDataRaw(I,Re,Ze.r),T.setPixelDataRaw(I,Re+1,Ze.g),T.setPixelDataRaw(I,Re+2,Ze.b);else if(o.dithering=="fs"){T.setPixelDataRaw(I,Re,Ze.r),T.setPixelDataRaw(I,Re+1,Ze.g),T.setPixelDataRaw(I,Re+2,Ze.b);let ue=T.pixelDiff(gt,Ze);if(ge<I.width-1){let Ge=T.getPixelDataRGB(I,ge+1,ie);o.cap?T.setPixelDataRGB(I,ge+1,ie,{r:T.clamp(0,255,Ge.r+ue.r*7/16),g:T.clamp(0,255,Ge.g+ue.g*7/16),b:T.clamp(0,255,Ge.b+ue.b*7/16)}):T.setPixelDataRGB(I,ge+1,ie,{r:Ge.r+ue.r*7/16,g:Ge.g+ue.g*7/16,b:Ge.b+ue.b*7/16})}if(ie<I.height-1){if(ge>0){let Be=T.getPixelDataRGB(I,ge-1,ie+1);o.cap?T.setPixelDataRGB(I,ge-1,ie+1,{r:T.clamp(0,255,Be.r+ue.r*3/16),g:T.clamp(0,255,Be.g+ue.g*3/16),b:T.clamp(0,255,Be.b+ue.b*3/16)}):T.setPixelDataRGB(I,ge-1,ie+1,{r:Be.r+ue.r*3/16,g:Be.g+ue.g*3/16,b:Be.b+ue.b*3/16})}let Ge=T.getPixelDataRGB(I,ge,ie+1);if(o.cap?T.setPixelDataRGB(I,ge,ie+1,{r:T.clamp(0,255,Ge.r+ue.r*5/16),g:T.clamp(0,255,Ge.g+ue.g*5/16),b:T.clamp(0,255,Ge.b+ue.b*5/16)}):T.setPixelDataRGB(I,ge,ie+1,{r:Ge.r+ue.r*5/16,g:Ge.g+ue.g*5/16,b:Ge.b+ue.b*5/16}),ge<I.width-1){let Be=T.getPixelDataRGB(I,ge+1,ie+1);o.cap?T.setPixelDataRGB(I,ge+1,ie+1,{r:T.clamp(0,255,Be.r+ue.r*1/16),g:T.clamp(0,255,Be.g+ue.g*1/16),b:T.clamp(0,255,Be.b+ue.b*1/16)}):T.setPixelDataRGB(I,ge+1,ie+1,{r:Be.r+ue.r*1/16,g:Be.g+ue.g*1/16,b:Be.b+ue.b*1/16})}}}else if(o.dithering=="pattern"){let ue=T.getPixelDataRGB(I,ge,ie),Ge=255/xe*(o.matrix[ge%o.matrix[0].length][ie%o.matrix.length]-.5),Be=T.nearestPixel2({r:ue.r+Ge,g:ue.g+Ge,b:ue.b+Ge},et,o.gray_scale_nearest_pixel);T.setPixelDataRaw(I,Re,Be.r),T.setPixelDataRaw(I,Re+1,Be.g),T.setPixelDataRaw(I,Re+2,Be.b)}}if(U.putImageData(I,0,0),o.cache){let ie=new ImageData(new Uint8ClampedArray(I.data),I.width,I.height);console.log("adding",A,"to cache"),B[A]={data:ie,params:Object.assign({},i),config:Object.assign({},o)}}}let te=w.getContext("2d");if(te.getImageData(0,0,u.resizedwidth,u.resizedheight),u.enable_arrows){let U=C.getContext("2d");U.fillStyle="black",U.fillRect(0,0,C.width,C.height);let I=te.getImageData(u.select_pos.x*3,u.select_pos.y*3,o.zoom_range.x*3,o.zoom_range.y*3),{grid_size:Qe,rubiks_scale:xe}=o,et=T.scaleImageData(te,I,xe);U.imageSmoothingEnabled=!1,U.putImageData(et,0,0),T.drawGrid(U,Qe/2,xe,o.zoom_range.x*3,o.zoom_range.y*3),T.drawGrid(U,Qe,xe*3,o.zoom_range.x*3,o.zoom_range.y*3)}if(o.show_rubiks){let U=V.getContext("2d"),Qe=w.getContext("2d").getImageData(0,0,u.resizedwidth,u.resizedheight);if(U.imageSmoothingEnabled=!1,U.drawImage(w,0,0,u.resizedwidth*o.rubiks_scale,u.resizedheight*o.rubiks_scale),o.show_grid&&o.grid_size>0){let{grid_size:xe,rubiks_scale:et}=o,{width:ie,height:Re}=Qe;T.drawGrid(U,xe,et,ie,Re)}}});const qe=()=>{Ie("img")},Q=()=>{P()},N=()=>{Ie("rubiks")},je=()=>{Ie("pallette")},Ke=()=>{Ie("processing")},$e=()=>{Ie("mockup")},st=()=>{Ie("arrows")},_e=()=>{l(17,ee=h),J()},se=()=>{h()};function ke(_){be[_?"unshift":"push"](()=>{W=_,l(14,W)})}const at=()=>{h()};function Ue(_){e.$$.not_equal(o.live_capture,_)&&(o.live_capture=_,l(0,o))}function Ve(_){be[_?"unshift":"push"](()=>{Y=_,l(10,Y)})}function ut(_){e.$$.not_equal(u.show_debug,_)&&(u.show_debug=_,l(1,u))}function ft(_){e.$$.not_equal(o.pixelated,_)&&(o.pixelated=_,l(0,o))}function kt(_){e.$$.not_equal(o.cache,_)&&(o.cache=_,l(0,o))}function wt(_){e.$$.not_equal(o.show_rubiks,_)&&(o.show_rubiks=_,l(0,o))}function vt(_){e.$$.not_equal(o.show_grid,_)&&(o.show_grid=_,l(0,o))}function zt(){o.width=We(this.value),l(0,o)}function ae(){o.rubiks_scale=We(this.value),l(0,o)}function ht(){o.grid_size=We(this.value),l(0,o)}function yt(_){be[_?"unshift":"push"](()=>{oe=_,l(16,oe)})}function we(){o.mockup_pixel_size=We(this.value),l(0,o)}function Tt(){o.mockup_x=We(this.value),l(0,o)}function Ct(){o.mockup_y=We(this.value),l(0,o)}function ve(_){e.$$.not_equal(o.gray_scale_input,_)&&(o.gray_scale_input=_,l(0,o))}function ze(_){e.$$.not_equal(o.gray_scale_nearest_pixel,_)&&(o.gray_scale_nearest_pixel=_,l(0,o))}const Te=()=>l(0,o.dithering="",o),ye=()=>l(0,o.dithering="fs",o),Ce=()=>l(0,o.dithering="pattern",o),Pe=_=>{l(0,o.matrix=_,o)};function De(_){e.$$.not_equal(u.allow_edit_colors,_)&&(u.allow_edit_colors=_,l(1,u))}const Le=(_,te,U)=>{Z(_)};function Me(_,te){e.$$.not_equal(te.on,_)&&(te.on=_,l(0,o))}function Se(_,te){_[te].color=this.value,l(0,o)}function Pt(){o.debug_range=We(this.value),l(0,o)}function dt(_,te){_[te]=We(this.value),l(0,o)}function Ye(_){e.$$.not_equal(o.cap,_)&&(o.cap=_,l(0,o))}function Fe(){o.zoom_range.x=We(this.value),l(0,o)}function Ne(){o.zoom_range.y=We(this.value),l(0,o)}function v(_){e.$$.not_equal(u.show_steps,_)&&(u.show_steps=_,l(1,u))}function E(_){e.$$.not_equal(u.enable_arrows,_)&&(u.enable_arrows=_,l(1,u))}function Dt(_){e.$$.not_equal(u.show_zoomed,_)&&(u.show_zoomed=_,l(1,u))}function Tl(){o.screenCapturePadding.left=We(this.value),l(0,o)}function Ml(){o.screenCapturePadding.right=We(this.value),l(0,o)}function Sl(){o.screenCapturePadding.top=We(this.value),l(0,o)}function Ll(){o.screenCapturePadding.bottom=We(this.value),l(0,o)}function Fl(_){be[_?"unshift":"push"](()=>{k=_,l(6,k)})}function Nl(_){be[_?"unshift":"push"](()=>{w=_,l(8,w)})}function Ol(_){be[_?"unshift":"push"](()=>{C=_,l(9,C)})}function Al(_){be[_?"unshift":"push"](()=>{m=_,l(7,m)})}function ql(_){be[_?"unshift":"push"](()=>{V=_,l(13,V)})}function Wl(_){be[_?"unshift":"push"](()=>{V=_,l(13,V)})}function Hl(){z=this.clientHeight,p=this.clientWidth,l(5,z),l(2,p)}const jl=()=>{l(1,u.current="",u)};return e.$$.update=()=>{e.$$.dirty[0]&1&&l(33,i={loadedfile:o.loadedfile,width:o.width,height:o.height,dithering:o.dithering,gray_scale_input:o.gray_scale_input,gray_scale_nearest_pixel:o.gray_scale_nearest_pixel,pallette:o.pallette,matrix:o.matrix}),e.$$.dirty[0]&7|e.$$.dirty[1]&4&&l(18,n=JSON.stringify({ui:u,params:i,config:o,clientWidth:p},null,2))},[o,u,p,r,a,z,k,m,w,C,Y,X,$,V,W,D,oe,ee,n,d,f,J,h,y,P,R,x,H,ne,le,me,Z,Ie,i,qe,Q,N,je,Ke,$e,st,_e,se,ke,at,Ue,Ve,ut,ft,kt,wt,vt,zt,ae,ht,yt,we,Tt,Ct,ve,ze,Te,ye,Ce,Pe,De,Le,Me,Se,Pt,dt,Ye,Fe,Ne,v,E,Dt,Tl,Ml,Sl,Ll,Fl,Nl,Ol,Al,ql,Wl,Hl,jl]}class Gn extends Wt{constructor(t){super(),qt(this,t,In,Rn,At,{},null,[-1,-1,-1,-1])}}new Gn({target:document.getElementById("app")});
