(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function l(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=l(n);fetch(n.href,r)}})();function rt(){}function jl(e,t){for(const l in t)e[l]=t[l];return e}function vl(e){return e()}function Ut(){return Object.create(null)}function Xe(e){e.forEach(vl)}function Ul(e){return typeof e=="function"}function At(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Vl(e){return Object.keys(e).length===0}function Jl(e,t,l,o){if(e){const n=zl(e,t,l,o);return e[0](n)}}function zl(e,t,l,o){return e[1]&&o?jl(l.ctx.slice(),e[1](o(t))):l.ctx}function Kl(e,t,l,o){if(e[2]&&o){const n=e[2](o(l));if(t.dirty===void 0)return n;if(typeof n=="object"){const r=[],c=Math.max(t.dirty.length,n.length);for(let f=0;f<c;f+=1)r[f]=t.dirty[f]|n[f];return r}return t.dirty|n}return t.dirty}function Yl(e,t,l,o,n,r){if(n){const c=zl(t,l,o,r);e.p(c,n)}}function Ql(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let o=0;o<l;o++)t[o]=-1;return t}return-1}function Vt(e){return e==null?"":e}function s(e,t){e.appendChild(t)}function j(e,t,l){e.insertBefore(t,l||null)}function H(e){e.parentNode.removeChild(e)}function _t(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function d(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function p(){return L(" ")}function yl(){return L("")}function T(e,t,l,o){return e.addEventListener(t,l,o),()=>e.removeEventListener(t,l,o)}function u(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function qe(e){return e===""?null:+e}function Xl(e){return Array.from(e.childNodes)}function he(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ce(e,t){e.value=t==null?"":t}function _e(e,t,l,o){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,o?"important":"")}let Rt;function Zl(){if(Rt===void 0){Rt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Rt=!0}}return Rt}function $l(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const o=d("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const n=Zl();let r;return n?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=T(window,"message",c=>{c.source===o.contentWindow&&t()})):(o.src="about:blank",o.onload=()=>{r=T(o.contentWindow,"resize",t)}),s(e,o),()=>{(n||r&&o.contentWindow)&&r(),H(o)}}function N(e,t,l){e.classList[l?"add":"remove"](t)}let bt;function mt(e){bt=e}function Cl(){if(!bt)throw new Error("Function called outside component initialization");return bt}function xl(e){Cl().$$.on_mount.push(e)}function en(e){Cl().$$.after_update.push(e)}function Pl(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(o=>o.call(this,t))}const pt=[],be=[],Gt=[],Ft=[],Dl=Promise.resolve();let Nt=!1;function Rl(){Nt||(Nt=!0,Dl.then(Il))}function ot(){return Rl(),Dl}function Et(e){Gt.push(e)}function nt(e){Ft.push(e)}const Mt=new Set;let It=0;function Il(){const e=bt;do{for(;It<pt.length;){const t=pt[It];It++,mt(t),tn(t.$$)}for(mt(null),pt.length=0,It=0;be.length;)be.pop()();for(let t=0;t<Gt.length;t+=1){const l=Gt[t];Mt.has(l)||(Mt.add(l),l())}Gt.length=0}while(pt.length);for(;Ft.length;)Ft.pop()();Nt=!1,Mt.clear(),mt(e)}function tn(e){if(e.fragment!==null){e.update(),Xe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Et)}}const Bt=new Set;let ct;function tt(){ct={r:0,c:[],p:ct}}function lt(){ct.r||Xe(ct.c),ct=ct.p}function O(e,t){e&&e.i&&(Bt.delete(e),e.i(t))}function Q(e,t,l,o){if(e&&e.o){if(Bt.has(e))return;Bt.add(e),ct.c.push(()=>{Bt.delete(e),o&&(l&&e.d(1),o())}),e.o(t)}else o&&o()}function it(e,t,l){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=l,l(e.$$.ctx[o]))}function We(e){e&&e.c()}function Ne(e,t,l,o){const{fragment:n,on_mount:r,on_destroy:c,after_update:f}=e.$$;n&&n.m(t,l),o||Et(()=>{const i=r.map(vl).filter(Ul);c?c.push(...i):Xe(i),e.$$.on_mount=[]}),f.forEach(Et)}function Oe(e,t){const l=e.$$;l.fragment!==null&&(Xe(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function ln(e,t){e.$$.dirty[0]===-1&&(pt.push(e),Rl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qt(e,t,l,o,n,r,c,f=[-1]){const i=bt;mt(e);const a=e.$$={fragment:null,ctx:null,props:r,update:rt,not_equal:n,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:Ut(),dirty:f,skip_bound:!1,root:t.target||i.$$.root};c&&c(a.root);let b=!1;if(a.ctx=l?l(e,t.props||{},(h,w,...m)=>{const _=m.length?m[0]:w;return a.ctx&&n(a.ctx[h],a.ctx[h]=_)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](_),b&&ln(e,h)),w}):[],a.update(),b=!0,Xe(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const h=Xl(t.target);a.fragment&&a.fragment.l(h),h.forEach(H)}else a.fragment&&a.fragment.c();t.intro&&O(e.$$.fragment),Ne(e,t.target,t.anchor,t.customElement),Il()}mt(i)}class Wt{$destroy(){Oe(this,1),this.$destroy=rt}$on(t,l){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(l),()=>{const n=o.indexOf(l);n!==-1&&o.splice(n,1)}}$set(t){this.$$set&&!Vl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function nn(e){let t;return{c(){t=d("input"),u(t,"type","radio"),t.checked=e[0]},m(l,o){j(l,t,o)},p(l,o){o&1&&(t.checked=l[0])},d(l){l&&H(t)}}}function on(e){let t;return{c(){t=d("input"),u(t,"type","checkbox"),t.checked=e[0]},m(l,o){j(l,t,o)},p(l,o){o&1&&(t.checked=l[0])},d(l){l&&H(t)}}}function rn(e){let t,l,o,n,r,c,f,i,a;const b=e[7].default,h=Jl(b,e,e[6],null);function w(v,C){if(v[3]=="checkbox")return on;if(v[3]=="radio")return nn}let m=w(e),_=m&&m(e);return{c(){t=d("div"),h&&h.c(),l=p(),_&&_.c(),o=p(),n=L(e[1]),u(t,"class",r="p-2 "+(e[0]?e[2]:"")+" rounded-lg border-solid border-[1px] svelte-1t1l2hh"),u(t,"style",c=e[4]?`background-color: ${e[4]}`:"")},m(v,C){j(v,t,C),h&&h.m(t,null),s(t,l),_&&_.m(t,null),s(t,o),s(t,n),f=!0,i||(a=[T(t,"click",e[5]),T(t,"click",e[8])],i=!0)},p(v,[C]){h&&h.p&&(!f||C&64)&&Yl(h,b,v,v[6],f?Kl(b,v[6],C,null):Ql(v[6]),null),m===(m=w(v))&&_?_.p(v,C):(_&&_.d(1),_=m&&m(v),_&&(_.c(),_.m(t,o))),(!f||C&2)&&he(n,v[1]),(!f||C&5&&r!==(r="p-2 "+(v[0]?v[2]:"")+" rounded-lg border-solid border-[1px] svelte-1t1l2hh"))&&u(t,"class",r),(!f||C&16&&c!==(c=v[4]?`background-color: ${v[4]}`:""))&&u(t,"style",c)},i(v){f||(O(h,v),f=!0)},o(v){Q(h,v),f=!1},d(v){v&&H(t),h&&h.d(v),_&&_.d(),i=!1,Xe(a)}}}function sn(e,t,l){let{$$slots:o={},$$scope:n}=t,{checked:r=!1}=t,{text:c="O"}=t,{toggleClass:f="bg-gray-200"}=t,{type:i="checkbox"}=t,{bgcolor:a=""}=t,b=()=>{l(0,r=!r)};function h(w){Pl.call(this,e,w)}return e.$$set=w=>{"checked"in w&&l(0,r=w.checked),"text"in w&&l(1,c=w.text),"toggleClass"in w&&l(2,f=w.toggleClass),"type"in w&&l(3,i=w.type),"bgcolor"in w&&l(4,a=w.bgcolor),"$$scope"in w&&l(6,n=w.$$scope)},[r,c,f,i,a,b,n,o,h]}class Ve extends Wt{constructor(t){super(),qt(this,t,sn,rn,At,{checked:0,text:1,toggleClass:2,type:3,bgcolor:4})}}function Jt(e,t,l){const o=e.slice();return o[3]=t[l],o}function Kt(e){let t;return{c(){t=d("div"),_e(t,"background-color",e[3].color),u(t,"class","grow h-4")},m(l,o){j(l,t,o)},p(l,o){o&2&&_e(t,"background-color",l[3].color)},d(l){l&&H(t)}}}function an(e){let t,l,o,n,r=e[1],c=[];for(let f=0;f<r.length;f+=1)c[f]=Kt(Jt(e,r,f));return{c(){t=d("button"),l=d("div");for(let f=0;f<c.length;f+=1)c[f].c();u(l,"class","flex border-[1px] border-black w-12"),u(t,"class","p-2 rounded-lg border-solid border-2 text-center"),N(t,"bg-gray-400",e[0])},m(f,i){j(f,t,i),s(t,l);for(let a=0;a<c.length;a+=1)c[a].m(l,null);o||(n=T(t,"click",e[2]),o=!0)},p(f,[i]){if(i&2){r=f[1];let a;for(a=0;a<r.length;a+=1){const b=Jt(f,r,a);c[a]?c[a].p(b,i):(c[a]=Kt(b),c[a].c(),c[a].m(l,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=r.length}i&1&&N(t,"bg-gray-400",f[0])},i:rt,o:rt,d(f){f&&H(t),_t(c,f),o=!1,n()}}}function cn(e,t,l){let{selected:o=""}=t,{colors:n}=t;function r(c){Pl.call(this,e,c)}return e.$$set=c=>{"selected"in c&&l(0,o=c.selected),"colors"in c&&l(1,n=c.colors)},[o,n,r]}class un extends Wt{constructor(t){super(),qt(this,t,cn,an,At,{selected:0,colors:1})}}const Ot=(e,t)=>({r:e.r-t.r,g:e.g-t.g,b:e.b-t.b}),fn=(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}),dn=(e,t,l)=>Math.max(e,Math.min(t,l));let St={};const Gl=e=>{if(typeof e!="string")throw Error("wrong type in hexToRgb");if(St[e])return St[e];{if(e.length==4){let[r,c,f,i]=e.split("");e="#"+c+c+f+f+i+i}let t=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16),n={r:t,g:l,b:o};return St[e]=n,n}},Ht=(e,t,l)=>{let o=Ot(l?El(e):e,t),n=Math.abs(o.r),r=Math.abs(o.g),c=Math.abs(o.b);return n*n+c*c+r*r};let Lt={};const gn=(e,t,l)=>{let o;Lt[t]?o=Lt[t]:(o=t,Lt[t]=o);let n=o[0],r=null;return o.forEach((c,f)=>{let i=Gl(c),a=Ht(i,e,l);(r==null||r>a)&&(r=a,n=i)}),n},_n=(e,t,l)=>{let o=t[0],n=null;return t.forEach((r,c)=>{let f=Ht(r,e,l);(n==null||n>f)&&(n=f,o=r)}),o},Bl=e=>Math.floor((e.r+e.g+e.b)/3),Yt=e=>"#"+e.r.toString(16).padStart(2,"0")+e.g.toString(16).padStart(2,"0")+e.b.toString(16).padStart(2,"0"),El=e=>{let t=Bl(e);return{r:t,g:t,b:t}};function hn(e){let t=0;for(let l=0,o=e.length;l<o;l++){let n=e.charCodeAt(l);t=(t<<5)-t+n,t|=0}return t}const jt=(e,t,l)=>(t*l+e)*4;let pn=function(e,t,l,o){let n=e.width,r=jt(t,l,n);e.data[r]=o.r,e.data[r+1]=o.g,e.data[r+2]=o.b},mn=function(e,t,l){e.data[t]=l},bn=function(e,t,l){let o=e.width,n=jt(t,l,o);return{r:e.data[n],g:e.data[n+1],b:e.data[n+2]}};const kn=(e,t,l,o,n,r)=>{let c=t.getContext("2d"),i=e.getContext("2d").getImageData(0,0,n,r);c.putImageData(i,0,0)};function wn(e,t,l){for(var o=e.createImageData(t.width*l,t.height*l),n=0;n<t.height;n++)for(var r=0;r<t.width;r++)for(var c=[t.data[(n*t.width+r)*4+0],t.data[(n*t.width+r)*4+1],t.data[(n*t.width+r)*4+2],t.data[(n*t.width+r)*4+3]],f=0;f<l;f++)for(var i=n*l+f,a=0;a<l;a++)for(var b=r*l+a,h=0;h<4;h++)o.data[(i*o.width+b)*4+h]=c[h];return o}const vn=(e,t,l,o,n,r="#000000")=>{e.lineWidth=t,e.strokeStyle=r;for(let c=0;c<n;c++)e.beginPath(),e.moveTo(0,c*l),e.lineTo(o*l,c*l),e.stroke();for(let c=0;c<o;c++)e.beginPath(),e.moveTo(c*l,0),e.lineTo(c*l,n*l),e.stroke()},S={cloneSubset:kn,getPixelDataRGB:bn,setPixelDataRGB:pn,setPixelDataRaw:mn,calc_i:jt,hashCode:hn,Rgb2Gray:El,RgbGrayValue:Bl,RgbToHex:Yt,nearestPixel:gn,nearestPixel2:_n,clamp:dn,pixelAdd:fn,pixelDiff:Ot,hexToRgb:Gl,RgbToHex:Yt,calculatePixelDifference:Ht,drawGrid:vn,scaleImageData:wn};function Qt(e,t,l){const o=e.slice();return o[96]=t[l],o}function Xt(e,t,l){const o=e.slice();return o[99]=t[l],o[100]=t,o[101]=l,o}function Zt(e,t,l){const o=e.slice();return o[102]=t[l],o[103]=t,o[104]=l,o}function $t(e,t,l){const o=e.slice();return o[105]=t[l],o}function xt(e,t,l){const o=e.slice();return o[108]=t[l],o}function el(e){let t,l,o,n,r,c,f,i,a,b,h;function w(_){e[44](_)}let m={text:"Live"};return e[0].live_capture!==void 0&&(m.checked=e[0].live_capture),r=new Ve({props:m}),be.push(()=>it(r,"checked",w)),{c(){t=d("video"),l=p(),o=d("button"),o.innerHTML='<i class="fa fa-camera"></i>',n=p(),We(r.$$.fragment),f=p(),i=d("canvas"),_e(t,"max-height","40px"),_e(t,"border","1px solid black"),t.autoplay=!0,u(o,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),_e(i,"width","auto"),_e(i,"max-height","40px"),_e(i,"border","1px solid black"),u(i,"width",e[10]),u(i,"height",e[11]),u(i,"class","svelte-1w6kap6")},m(_,v){j(_,t,v),e[42](t),j(_,l,v),j(_,o,v),j(_,n,v),Ne(r,_,v),j(_,f,v),j(_,i,v),e[45](i),a=!0,b||(h=T(o,"click",e[43]),b=!0)},p(_,v){const C={};!c&&v[0]&1&&(c=!0,C.checked=_[0].live_capture,nt(()=>c=!1)),r.$set(C),(!a||v[0]&1024)&&u(i,"width",_[10]),(!a||v[0]&2048)&&u(i,"height",_[11])},i(_){a||(O(r.$$.fragment,_),a=!0)},o(_){Q(r.$$.fragment,_),a=!1},d(_){_&&H(t),e[42](null),_&&H(l),_&&H(o),_&&H(n),Oe(r,_),_&&H(f),_&&H(i),e[45](null),b=!1,h()}}}function tl(e){let t,l,o,n,r,c=!1;return{c(){t=d("div"),l=d("div"),o=d("div"),n=d("div"),u(n,"class","d-block"),u(o,"class","flex"),u(l,"class","flex flex-col"),u(t,"class","text-black p-2")},m(f,i){j(f,t,i),s(t,l),s(l,o),s(o,n),r=!0},p(f,i){},i(f){r||(O(c),r=!0)},o(f){Q(c),r=!1},d(f){f&&H(t)}}}function ll(e){let t,l,o,n,r,c,f,i,a,b,h,w,m,_,v,C,X,R=e[1].resizedwidth+"",V,A,I=e[1].resizedheight+"",$,z,G=e[1].resizedwidth*e[1].resizedheight+"",q,y,P,Y,B=e[1].resizedheight*e[1].resizedwidth/9+"",de,re,J,ee,E,te,pe,se=e[0].rubiks_scale+"",ne,Be,me,ue,F,U,Je,Ae=e[0].grid_size+"",Z,W,He,Ke,$e=!1;function st(ie){e[50](ie)}let ge={text:"Show Grid"};return e[0].show_grid!==void 0&&(ge.checked=e[0].show_grid),f=new Ve({props:ge}),be.push(()=>it(f,"checked",st)),{c(){t=d("div"),l=d("h2"),l.textContent="Dimension",o=p(),n=d("div"),r=d("div"),c=p(),We(f.$$.fragment),a=p(),b=d("div"),h=d("span"),h.textContent="Width",w=p(),m=d("input"),v=p(),C=d("span"),X=L("Resolution: "),V=L(R),A=L(" x "),$=L(I),z=L(" = "),q=L(G),y=p(),P=d("br"),Y=L(`\r
                Cubes Needed: `),de=L(B),re=p(),J=d("div"),ee=L(`Scale\r
                `),E=d("input"),te=p(),pe=d("span"),ne=L(se),Be=p(),me=d("span"),me.textContent="\xA0",ue=L(`\r
                Grid Size\r
                `),F=d("input"),U=p(),Je=d("span"),Z=L(Ae),u(l,"class","svelte-1w6kap6"),u(r,"class","flex"),u(h,"class","p-2 svelte-1w6kap6"),_e(m,"width","200px"),u(m,"type","range"),u(m,"min","3"),u(m,"max",_=e[0].max_width),u(m,"step","3"),u(m,"class","svelte-1w6kap6"),u(b,"class","flex slider-wrapper svelte-1w6kap6"),u(E,"type","range"),u(E,"max","40"),_e(me,"margin-left","10px"),u(F,"type","range"),u(F,"max","10"),u(J,"class","flex"),_e(J,"display","none"),u(n,"class","flex flex-col"),u(t,"class","text-black p-2")},m(ie,ke){j(ie,t,ke),s(t,l),s(t,o),s(t,n),s(n,r),s(r,c),Ne(f,r,null),s(n,a),s(n,b),s(b,h),s(b,w),s(b,m),ce(m,e[0].width),s(n,v),s(n,C),s(C,X),s(C,V),s(C,A),s(C,$),s(C,z),s(C,q),s(C,y),s(C,P),s(C,Y),s(C,de),s(n,re),s(n,J),s(J,ee),s(J,E),ce(E,e[0].rubiks_scale),s(J,te),s(J,pe),s(pe,ne),s(J,Be),s(J,me),s(J,ue),s(J,F),ce(F,e[0].grid_size),s(J,U),s(J,Je),s(Je,Z),W=!0,He||(Ke=[T(m,"change",e[51]),T(m,"input",e[51]),T(E,"change",e[52]),T(E,"input",e[52]),T(F,"change",e[53]),T(F,"input",e[53])],He=!0)},p(ie,ke){const at={};!i&&ke[0]&1&&(i=!0,at.checked=ie[0].show_grid,nt(()=>i=!1)),f.$set(at),(!W||ke[0]&1&&_!==(_=ie[0].max_width))&&u(m,"max",_),ke[0]&1&&ce(m,ie[0].width),(!W||ke[0]&2)&&R!==(R=ie[1].resizedwidth+"")&&he(V,R),(!W||ke[0]&2)&&I!==(I=ie[1].resizedheight+"")&&he($,I),(!W||ke[0]&2)&&G!==(G=ie[1].resizedwidth*ie[1].resizedheight+"")&&he(q,G),(!W||ke[0]&2)&&B!==(B=ie[1].resizedheight*ie[1].resizedwidth/9+"")&&he(de,B),ke[0]&1&&ce(E,ie[0].rubiks_scale),(!W||ke[0]&1)&&se!==(se=ie[0].rubiks_scale+"")&&he(ne,se),ke[0]&1&&ce(F,ie[0].grid_size),(!W||ke[0]&1)&&Ae!==(Ae=ie[0].grid_size+"")&&he(Z,Ae)},i(ie){W||(O($e),O(f.$$.fragment,ie),W=!0)},o(ie){Q($e),Q(f.$$.fragment,ie),W=!1},d(ie){ie&&H(t),Oe(f),He=!1,Xe(Ke)}}}function nl(e){let t,l,o,n,r,c,f,i,a,b,h,w,m,_,v,C=e[0].mockup_pixel_size+"",X,R,V,A,I,$,z,G,q,y=e[0].mockup_x+"",P,Y,B,de,re,J,ee,E=e[0].mockup_y+"",te,pe,se;function ne(F,U){return F[1].mockup_hovering?zn:yn}let Be=ne(e),me=Be(e),ue=e[0].has_mockup&&il(e);return{c(){t=d("div"),l=d("div"),o=d("h2"),o.textContent="Mock Up",n=p(),r=d("i"),r.textContent=`This should be an image of the wall where you'll place your\r
                rubik's cube art.`,c=p(),f=d("br"),i=p(),me.c(),a=p(),b=d("canvas"),h=p(),ue&&ue.c(),w=L(`\r
\r
            Pixel Size\r
            `),m=d("input"),_=p(),v=d("span"),X=L(C),R=p(),V=d("br"),A=L(`\r
            Position\r
            `),I=d("br"),$=p(),z=d("input"),G=p(),q=d("span"),P=L(y),Y=p(),B=d("br"),de=p(),re=d("input"),J=p(),ee=d("span"),te=L(E),u(o,"class","svelte-1w6kap6"),_e(b,"width","auto"),u(b,"class","svelte-1w6kap6"),_e(l,"height","auto"),u(l,"ondragover","return false"),u(l,"id","mockup_drop_zone"),u(l,"class","bg-green-200 h-full p-4"),u(m,"type","range"),u(m,"step","0.1"),u(m,"min","1"),u(m,"max","25"),u(z,"type","range"),u(z,"min","-500"),u(z,"max","500"),u(re,"type","range"),u(re,"min","-500"),u(re,"max","500"),u(t,"class","text-black p-2")},m(F,U){j(F,t,U),s(t,l),s(l,o),s(l,n),s(l,r),s(l,c),s(l,f),s(l,i),me.m(l,null),s(l,a),s(l,b),e[54](b),s(l,h),ue&&ue.m(l,null),s(t,w),s(t,m),ce(m,e[0].mockup_pixel_size),s(t,_),s(t,v),s(v,X),s(t,R),s(t,V),s(t,A),s(t,I),s(t,$),s(t,z),ce(z,e[0].mockup_x),s(t,G),s(t,q),s(q,P),s(t,Y),s(t,B),s(t,de),s(t,re),ce(re,e[0].mockup_y),s(t,J),s(t,ee),s(ee,te),pe||(se=[T(l,"drop",e[26]),T(l,"dragenter",e[27]),T(l,"dragleave",e[28]),T(m,"change",e[55]),T(m,"input",e[55]),T(z,"change",e[56]),T(z,"input",e[56]),T(re,"change",e[57]),T(re,"input",e[57])],pe=!0)},p(F,U){Be!==(Be=ne(F))&&(me.d(1),me=Be(F),me&&(me.c(),me.m(l,a))),F[0].has_mockup?ue?ue.p(F,U):(ue=il(F),ue.c(),ue.m(l,null)):ue&&(ue.d(1),ue=null),U[0]&1&&ce(m,F[0].mockup_pixel_size),U[0]&1&&C!==(C=F[0].mockup_pixel_size+"")&&he(X,C),U[0]&1&&ce(z,F[0].mockup_x),U[0]&1&&y!==(y=F[0].mockup_x+"")&&he(P,y),U[0]&1&&ce(re,F[0].mockup_y),U[0]&1&&E!==(E=F[0].mockup_y+"")&&he(te,E)},d(F){F&&H(t),me.d(),e[54](null),ue&&ue.d(),pe=!1,Xe(se)}}}function zn(e){let t;return{c(){t=L("Release to load file")},m(l,o){j(l,t,o)},d(l){l&&H(t)}}}function yn(e){let t;return{c(){t=L("Drop Background Image here.")},m(l,o){j(l,t,o)},d(l){l&&H(t)}}}function il(e){let t,l,o;return{c(){t=d("button"),t.textContent="Remove mockup",u(t,"class","p-2 border-[1px] border-black")},m(n,r){j(n,t,r),l||(o=T(t,"click",e[29]),l=!0)},p:rt,d(n){n&&H(t),l=!1,o()}}}function ol(e){let t,l,o,n,r,c,f,i,a,b,h,w,m,_,v,C,X,R,V,A,I;function $(P){e[58](P)}let z={text:"Make Input Image Gray First"};e[0].gray_scale_input!==void 0&&(z.checked=e[0].gray_scale_input),r=new Ve({props:z}),be.push(()=>it(r,"checked",$));function G(P){e[59](P)}let q={text:"Use Gray Value To Calculate Nearest Pixel"};e[0].gray_scale_nearest_pixel!==void 0&&(q.checked=e[0].gray_scale_nearest_pixel),a=new Ve({props:q}),be.push(()=>it(a,"checked",G)),v=new Ve({props:{text:"None",type:"radio",checked:e[0].dithering==""}}),v.$on("click",e[60]),X=new Ve({props:{text:"Floyd Steinberg",type:"radio",checked:e[0].dithering=="fs"}}),X.$on("click",e[61]),V=new Ve({props:{text:"Patterned",type:"radio",checked:e[0].dithering=="pattern"}}),V.$on("click",e[62]);let y=e[0].dithering=="pattern"&&rl(e);return{c(){t=d("div"),l=d("h2"),l.textContent="Processing Options",o=p(),n=d("div"),We(r.$$.fragment),f=p(),i=d("div"),We(a.$$.fragment),h=p(),w=d("div"),m=d("span"),m.textContent="Dithering:",_=p(),We(v.$$.fragment),C=p(),We(X.$$.fragment),R=p(),We(V.$$.fragment),A=p(),y&&y.c(),u(l,"class","svelte-1w6kap6"),u(n,"class","flex"),u(i,"class","flex"),u(m,"class","p-2"),u(w,"class","flex"),u(t,"class","text-black p-2")},m(P,Y){j(P,t,Y),s(t,l),s(t,o),s(t,n),Ne(r,n,null),s(t,f),s(t,i),Ne(a,i,null),s(t,h),s(t,w),s(w,m),s(w,_),Ne(v,w,null),s(w,C),Ne(X,w,null),s(w,R),Ne(V,w,null),s(t,A),y&&y.m(t,null),I=!0},p(P,Y){const B={};!c&&Y[0]&1&&(c=!0,B.checked=P[0].gray_scale_input,nt(()=>c=!1)),r.$set(B);const de={};!b&&Y[0]&1&&(b=!0,de.checked=P[0].gray_scale_nearest_pixel,nt(()=>b=!1)),a.$set(de);const re={};Y[0]&1&&(re.checked=P[0].dithering==""),v.$set(re);const J={};Y[0]&1&&(J.checked=P[0].dithering=="fs"),X.$set(J);const ee={};Y[0]&1&&(ee.checked=P[0].dithering=="pattern"),V.$set(ee),P[0].dithering=="pattern"?y?y.p(P,Y):(y=rl(P),y.c(),y.m(t,null)):y&&(y.d(1),y=null)},i(P){I||(O(r.$$.fragment,P),O(a.$$.fragment,P),O(v.$$.fragment,P),O(X.$$.fragment,P),O(V.$$.fragment,P),I=!0)},o(P){Q(r.$$.fragment,P),Q(a.$$.fragment,P),Q(v.$$.fragment,P),Q(X.$$.fragment,P),Q(V.$$.fragment,P),I=!1},d(P){P&&H(t),Oe(r),Oe(a),Oe(v),Oe(X),Oe(V),y&&y.d()}}}function rl(e){let t,l,o,n=e[19],r=[];for(let c=0;c<n.length;c+=1)r[c]=sl(xt(e,n,c));return{c(){t=d("div"),l=d("span"),l.textContent="Pattern Matrix Size:",o=p();for(let c=0;c<r.length;c+=1)r[c].c();u(l,"class","h-10 p-2")},m(c,f){j(c,t,f),s(t,l),s(t,o);for(let i=0;i<r.length;i+=1)r[i].m(t,null)},p(c,f){if(f[0]&524289){n=c[19];let i;for(i=0;i<n.length;i+=1){const a=xt(c,n,i);r[i]?r[i].p(a,f):(r[i]=sl(a),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(c){c&&H(t),_t(r,c)}}}function sl(e){let t,l=e[108].length+"",o,n,r,c;function f(){return e[63](e[108])}return{c(){t=d("button"),o=L(l),n=p(),u(t,"class","h-10 p-2 rounded-lg border-solid border-2"),N(t,"bg-gray-200",e[0].matrix==e[108])},m(i,a){j(i,t,a),s(t,o),s(t,n),r||(c=T(t,"click",f),r=!0)},p(i,a){e=i,a[0]&524289&&N(t,"bg-gray-200",e[0].matrix==e[108])},d(i){i&&H(t),r=!1,c()}}}function al(e){let t,l,o,n=e[0].pallette.name+"",r,c,f,i,a,b,h,w,m,_;function v(z){e[64](z)}let C={text:"Make Colors Editable"};e[1].allow_edit_colors!==void 0&&(C.checked=e[1].allow_edit_colors),i=new Ve({props:C}),be.push(()=>it(i,"checked",v));let X=e[18],R=[];for(let z=0;z<X.length;z+=1)R[z]=cl($t(e,X,z));const V=z=>Q(R[z],1,1,()=>{R[z]=null});let A=e[0].pallette.colors,I=[];for(let z=0;z<A.length;z+=1)I[z]=ul(Zt(e,A,z));const $=z=>Q(I[z],1,1,()=>{I[z]=null});return{c(){t=d("div"),l=d("h2"),o=L("Pallette - "),r=L(n),c=p(),f=d("div"),We(i.$$.fragment),b=p(),h=d("div");for(let z=0;z<R.length;z+=1)R[z].c();w=p(),m=d("div");for(let z=0;z<I.length;z+=1)I[z].c();u(l,"class","svelte-1w6kap6"),u(f,"class","w-fit"),u(h,"class","flex"),u(t,"class","text-black p-2"),u(m,"class","flex px-2")},m(z,G){j(z,t,G),s(t,l),s(l,o),s(l,r),s(t,c),s(t,f),Ne(i,f,null),s(t,b),s(t,h);for(let q=0;q<R.length;q+=1)R[q].m(h,null);j(z,w,G),j(z,m,G);for(let q=0;q<I.length;q+=1)I[q].m(m,null);_=!0},p(z,G){(!_||G[0]&1)&&n!==(n=z[0].pallette.name+"")&&he(r,n);const q={};if(!a&&G[0]&2&&(a=!0,q.checked=z[1].allow_edit_colors,nt(()=>a=!1)),i.$set(q),G[0]&1074003969){X=z[18];let y;for(y=0;y<X.length;y+=1){const P=$t(z,X,y);R[y]?(R[y].p(P,G),O(R[y],1)):(R[y]=cl(P),R[y].c(),O(R[y],1),R[y].m(h,null))}for(tt(),y=X.length;y<R.length;y+=1)V(y);lt()}if(G[0]&3){A=z[0].pallette.colors;let y;for(y=0;y<A.length;y+=1){const P=Zt(z,A,y);I[y]?(I[y].p(P,G),O(I[y],1)):(I[y]=ul(P),I[y].c(),O(I[y],1),I[y].m(m,null))}for(tt(),y=A.length;y<I.length;y+=1)$(y);lt()}},i(z){if(!_){O(i.$$.fragment,z);for(let G=0;G<X.length;G+=1)O(R[G]);for(let G=0;G<A.length;G+=1)O(I[G]);_=!0}},o(z){Q(i.$$.fragment,z),R=R.filter(Boolean);for(let G=0;G<R.length;G+=1)Q(R[G]);I=I.filter(Boolean);for(let G=0;G<I.length;G+=1)Q(I[G]);_=!1},d(z){z&&H(t),Oe(i),_t(R,z),z&&H(w),z&&H(m),_t(I,z)}}}function cl(e){let t,l;function o(...n){return e[65](e[105],...n)}return t=new un({props:{selected:e[0].pallette==e[105],colors:e[105].colors}}),t.$on("click",o),{c(){We(t.$$.fragment)},m(n,r){Ne(t,n,r),l=!0},p(n,r){e=n;const c={};r[0]&1&&(c.selected=e[0].pallette==e[105]),t.$set(c)},i(n){l||(O(t.$$.fragment,n),l=!0)},o(n){Q(t.$$.fragment,n),l=!1},d(n){Oe(t,n)}}}function ul(e){let t,l,o,n,r,c,f,i,a;function b(m){e[66](m,e[102])}let h={text:"",toggleClass:"",bgcolor:e[102].color};e[102].on!==void 0&&(h.checked=e[102].on),l=new Ve({props:h}),be.push(()=>it(l,"checked",b));function w(){e[67].call(r,e[103],e[104])}return{c(){t=d("div"),We(l.$$.fragment),n=p(),r=d("input"),c=p(),u(r,"type","color"),u(r,"name",""),u(r,"id",""),N(r,"hidden",!e[1].allow_edit_colors),u(t,"style","")},m(m,_){j(m,t,_),Ne(l,t,null),s(t,n),s(t,r),ce(r,e[102].color),s(t,c),f=!0,i||(a=T(r,"input",w),i=!0)},p(m,_){e=m;const v={};_[0]&1&&(v.bgcolor=e[102].color),!o&&_[0]&1&&(o=!0,v.checked=e[102].on,nt(()=>o=!1)),l.$set(v),_[0]&1&&ce(r,e[102].color),(!f||_[0]&2)&&N(r,"hidden",!e[1].allow_edit_colors)},i(m){f||(O(l.$$.fragment,m),f=!0)},o(m){Q(l.$$.fragment,m),f=!1},d(m){m&&H(t),Oe(l),i=!1,a()}}}function fl(e){let t,l,o,n,r,c,f,i,a=e[0].dithering=="pattern"&&dl(e),b=e[0].dithering=="fs"&&!1;return{c(){t=d("div"),l=d("pre"),o=L(e[17]),n=p(),r=p(),a&&a.c(),c=p(),b&&b.c(),f=yl(),u(l,"class","svelte-1w6kap6"),u(t,"class","fixed h-full overflow-scroll bg-white right-0 shadow-lg")},m(h,w){j(h,t,w),s(t,l),s(l,o),s(t,n),j(h,r,w),a&&a.m(h,w),j(h,c,w),b&&b.m(h,w),j(h,f,w),i=!0},p(h,w){(!i||w[0]&131072)&&he(o,h[17]),h[0].dithering=="pattern"?a?a.p(h,w):(a=dl(h),a.c(),a.m(c.parentNode,c)):a&&(a.d(1),a=null),h[0].dithering=="fs",b&&(tt(),Q(b,1,1,()=>{b=null}),lt())},i(h){i||(O(b),i=!0)},o(h){Q(b),i=!1},d(h){h&&H(t),h&&H(r),a&&a.d(h),h&&H(c),b&&b.d(h),h&&H(f)}}}function dl(e){let t,l,o,n=e[0].matrix,r=[];for(let c=0;c<n.length;c+=1)r[c]=_l(Qt(e,n,c));return{c(){t=L(`Matrix Vectors\r
            `),l=d("div");for(let c=0;c<r.length;c+=1)r[c].c();u(l,"class",o=Vt(`grid grid-cols-${e[0].matrix[0].length} w-fit`)+" svelte-1w6kap6")},m(c,f){j(c,t,f),j(c,l,f);for(let i=0;i<r.length;i+=1)r[i].m(l,null)},p(c,f){if(f[0]&1){n=c[0].matrix;let i;for(i=0;i<n.length;i+=1){const a=Qt(c,n,i);r[i]?r[i].p(a,f):(r[i]=_l(a),r[i].c(),r[i].m(l,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}f[0]&1&&o!==(o=Vt(`grid grid-cols-${c[0].matrix[0].length} w-fit`)+" svelte-1w6kap6")&&u(l,"class",o)},d(c){c&&H(t),c&&H(l),_t(r,c)}}}function gl(e){let t,l,o,n=e[99]+"",r,c,f,i;function a(){e[69].call(l,e[100],e[101])}return{c(){t=d("div"),l=d("input"),o=p(),r=L(n),c=p(),u(l,"type","range"),u(l,"step","0.01"),u(l,"max","1.0"),u(l,"min","0.0"),u(t,"class","p-2 svelte-1w6kap6")},m(b,h){j(b,t,h),s(t,l),ce(l,e[99]),s(t,o),s(t,r),s(t,c),f||(i=[T(l,"change",a),T(l,"input",a)],f=!0)},p(b,h){e=b,h[0]&1&&ce(l,e[99]),h[0]&1&&n!==(n=e[99]+"")&&he(r,n)},d(b){b&&H(t),f=!1,Xe(i)}}}function _l(e){let t,l=e[96],o=[];for(let n=0;n<l.length;n+=1)o[n]=gl(Xt(e,l,n));return{c(){for(let n=0;n<o.length;n+=1)o[n].c();t=yl()},m(n,r){for(let c=0;c<o.length;c+=1)o[c].m(n,r);j(n,t,r)},p(n,r){if(r[0]&1){l=n[96];let c;for(c=0;c<l.length;c+=1){const f=Xt(n,l,c);o[c]?o[c].p(f,r):(o[c]=gl(f),o[c].c(),o[c].m(t.parentNode,t))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(n){_t(o,n),n&&H(t)}}}function hl(e){let t,l,o,n,r,c,f,i,a,b=e[0].zoom_range.x+"",h,w,m,_,v,C=e[0].zoom_range.y+"",X,R,V,A,I=e[1].select_pos.x+"",$,z,G=e[1].select_pos.y+"",q,y,P,Y,B,de,re,J,ee,E,te,pe,se,ne,Be;function me(Z){e[73](Z)}let ue={text:"Show Instructional Cubes?"};e[1].show_steps!==void 0&&(ue.checked=e[1].show_steps),B=new Ve({props:ue}),be.push(()=>it(B,"checked",me));function F(Z){e[74](Z)}let U={text:"Use arrow keys to move"};e[1].enable_arrows!==void 0&&(U.checked=e[1].enable_arrows),J=new Ve({props:U}),be.push(()=>it(J,"checked",F));function Je(Z){e[75](Z)}let Ae={text:"Full-Width Rubiks"};return e[1].show_zoomed!==void 0&&(Ae.checked=e[1].show_zoomed),te=new Ve({props:Ae}),be.push(()=>it(te,"checked",Je)),{c(){t=d("div"),l=d("h2"),l.textContent="Ready to Cube?",o=p(),n=d("div"),r=d("div"),c=L(`Rows and columns of cubes to show.\r
                `),f=d("div"),i=d("input"),a=p(),h=L(b),w=p(),m=d("div"),_=d("input"),v=p(),X=L(C),R=p(),V=d("span"),A=L("Cursor: ("),$=L(I),z=L(", "),q=L(G),y=L(")"),P=p(),Y=d("span"),We(B.$$.fragment),re=p(),We(J.$$.fragment),E=p(),We(te.$$.fragment),u(l,"class","svelte-1w6kap6"),u(i,"type","range"),u(i,"min","1"),u(i,"max","36"),u(_,"type","range"),u(_,"min","1"),u(_,"max","36"),u(r,"class","flex flex-col"),u(Y,"class","w-fit"),u(n,"class","flex flex-col gap-2"),u(t,"class","p-2")},m(Z,W){j(Z,t,W),s(t,l),s(t,o),s(t,n),s(n,r),s(r,c),s(r,f),s(f,i),ce(i,e[0].zoom_range.x),s(f,a),s(f,h),s(r,w),s(r,m),s(m,_),ce(_,e[0].zoom_range.y),s(m,v),s(m,X),s(n,R),s(n,V),s(V,A),s(V,$),s(V,z),s(V,q),s(V,y),s(n,P),s(n,Y),Ne(B,Y,null),s(Y,re),Ne(J,Y,null),s(Y,E),Ne(te,Y,null),se=!0,ne||(Be=[T(i,"change",e[71]),T(i,"input",e[71]),T(_,"change",e[72]),T(_,"input",e[72])],ne=!0)},p(Z,W){W[0]&1&&ce(i,Z[0].zoom_range.x),(!se||W[0]&1)&&b!==(b=Z[0].zoom_range.x+"")&&he(h,b),W[0]&1&&ce(_,Z[0].zoom_range.y),(!se||W[0]&1)&&C!==(C=Z[0].zoom_range.y+"")&&he(X,C),(!se||W[0]&2)&&I!==(I=Z[1].select_pos.x+"")&&he($,I),(!se||W[0]&2)&&G!==(G=Z[1].select_pos.y+"")&&he(q,G);const He={};!de&&W[0]&2&&(de=!0,He.checked=Z[1].show_steps,nt(()=>de=!1)),B.$set(He);const Ke={};!ee&&W[0]&2&&(ee=!0,Ke.checked=Z[1].enable_arrows,nt(()=>ee=!1)),J.$set(Ke);const $e={};!pe&&W[0]&2&&(pe=!0,$e.checked=Z[1].show_zoomed,nt(()=>pe=!1)),te.$set($e)},i(Z){se||(O(B.$$.fragment,Z),O(J.$$.fragment,Z),O(te.$$.fragment,Z),se=!0)},o(Z){Q(B.$$.fragment,Z),Q(J.$$.fragment,Z),Q(te.$$.fragment,Z),se=!1},d(Z){Z&&H(t),Oe(B),Oe(J),Oe(te),ne=!1,Xe(Be)}}}function pl(e){let t;return{c(){t=d("div"),t.textContent="Drop Image Here to Load",u(t,"class","h-full w-full flex justify-center items-center bg-gray-300")},m(l,o){j(l,t,o)},d(l){l&&H(t)}}}function ml(e){let t,l,o,n,r,c,f,i=e[0].screenCapturePadding.left+"",a,b,h,w,m,_,v=e[0].screenCapturePadding.right+"",C,X,R,V,A,I,$=e[0].screenCapturePadding.top+"",z,G,q,y,P,Y,B=e[0].screenCapturePadding.bottom+"",de,re,J;return{c(){t=d("div"),l=d("span"),l.textContent="Crop Screen Capture",o=p(),n=d("span"),r=L(`Left\r
                `),c=d("input"),f=p(),a=L(i),b=p(),h=d("span"),w=L(`Right\r
                `),m=d("input"),_=p(),C=L(v),X=p(),R=d("span"),V=L(`Top\r
                `),A=d("input"),I=p(),z=L($),G=p(),q=d("span"),y=L(`Bottom\r
                `),P=d("input"),Y=p(),de=L(B),u(c,"type","range"),u(c,"min","0"),u(c,"max","100"),u(m,"type","range"),u(m,"min","0"),u(m,"max","100"),u(A,"type","range"),u(A,"min","0"),u(A,"max","100"),u(P,"type","range"),u(P,"min","0"),u(P,"max","100"),u(t,"class","flex flex-col")},m(ee,E){j(ee,t,E),s(t,l),s(t,o),s(t,n),s(n,r),s(n,c),ce(c,e[0].screenCapturePadding.left),s(n,f),s(n,a),s(t,b),s(t,h),s(h,w),s(h,m),ce(m,e[0].screenCapturePadding.right),s(h,_),s(h,C),s(t,X),s(t,R),s(R,V),s(R,A),ce(A,e[0].screenCapturePadding.top),s(R,I),s(R,z),s(t,G),s(t,q),s(q,y),s(q,P),ce(P,e[0].screenCapturePadding.bottom),s(q,Y),s(q,de),re||(J=[T(c,"change",e[76]),T(c,"input",e[76]),T(m,"change",e[77]),T(m,"input",e[77]),T(A,"change",e[78]),T(A,"input",e[78]),T(P,"change",e[79]),T(P,"input",e[79])],re=!0)},p(ee,E){E[0]&1&&ce(c,ee[0].screenCapturePadding.left),E[0]&1&&i!==(i=ee[0].screenCapturePadding.left+"")&&he(a,i),E[0]&1&&ce(m,ee[0].screenCapturePadding.right),E[0]&1&&v!==(v=ee[0].screenCapturePadding.right+"")&&he(C,v),E[0]&1&&ce(A,ee[0].screenCapturePadding.top),E[0]&1&&$!==($=ee[0].screenCapturePadding.top+"")&&he(z,$),E[0]&1&&ce(P,ee[0].screenCapturePadding.bottom),E[0]&1&&B!==(B=ee[0].screenCapturePadding.bottom+"")&&he(de,B)},d(ee){ee&&H(t),re=!1,Xe(J)}}}function bl(e){let t,l,o=e[1].select_pos.x+1+"",n,r,c=e[1].select_pos.y+1+"",f;return{c(){t=d("div"),l=L("Column "),n=L(o),r=L(", Row "),f=L(c),u(t,"class","min-w-[20px]")},m(i,a){j(i,t,a),s(t,l),s(t,n),s(t,r),s(t,f)},p(i,a){a[0]&2&&o!==(o=i[1].select_pos.x+1+"")&&he(n,o),a[0]&2&&c!==(c=i[1].select_pos.y+1+"")&&he(f,c)},d(i){i&&H(t)}}}function Cn(e){let t,l,o;return{c(){t=d("canvas"),u(t,"id","rubiks_canvas"),u(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),u(t,"height",o=e[1].resizedheight*e[0].rubiks_scale),u(t,"class","svelte-1w6kap6"),N(t,"shown",e[3]&&e[0].show_rubiks),N(t,"pixelated",e[0].pixelated)},m(n,r){j(n,t,r),e[85](t)},p(n,r){r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&u(t,"width",l),r[0]&3&&o!==(o=n[1].resizedheight*n[0].rubiks_scale)&&u(t,"height",o),r[0]&9&&N(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&N(t,"pixelated",n[0].pixelated)},d(n){n&&H(t),e[85](null)}}}function Pn(e){let t,l,o;return{c(){t=d("canvas"),_e(t,"position","absolute"),_e(t,"top",e[4]/2-e[1].resizedheight*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_y*e[2]/e[1].mockupwidth+"px"),_e(t,"left",e[2]/2-e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth/2+e[0].mockup_x*e[2]/e[1].mockupwidth+"px"),_e(t,"width",e[1].resizedwidth*e[0].mockup_pixel_size*e[2]/e[1].mockupwidth+"px"),u(t,"id","rubiks_canvas"),u(t,"width",l=e[1].resizedwidth*e[0].rubiks_scale),u(t,"height",o=e[1].resizedheight*e[0].rubiks_scale),u(t,"class","svelte-1w6kap6"),N(t,"shown",e[3]&&e[0].show_rubiks),N(t,"pixelated",e[0].pixelated)},m(n,r){j(n,t,r),e[84](t)},p(n,r){r[0]&23&&_e(t,"top",n[4]/2-n[1].resizedheight*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_y*n[2]/n[1].mockupwidth+"px"),r[0]&7&&_e(t,"left",n[2]/2-n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth/2+n[0].mockup_x*n[2]/n[1].mockupwidth+"px"),r[0]&7&&_e(t,"width",n[1].resizedwidth*n[0].mockup_pixel_size*n[2]/n[1].mockupwidth+"px"),r[0]&3&&l!==(l=n[1].resizedwidth*n[0].rubiks_scale)&&u(t,"width",l),r[0]&3&&o!==(o=n[1].resizedheight*n[0].rubiks_scale)&&u(t,"height",o),r[0]&9&&N(t,"shown",n[3]&&n[0].show_rubiks),r[0]&1&&N(t,"pixelated",n[0].pixelated)},d(n){n&&H(t),e[84](null)}}}function kl(e){let t;return{c(){t=d("div"),t.textContent="Drop to load image",u(t,"class","rounded-lg border-solid border-2 p-8 text-white text-center m-auto w-fit")},m(l,o){j(l,t,o)},d(l){l&&H(t)}}}function wl(e){return{c:rt,m:rt,d:rt}}function Dn(e){let t,l,o,n,r,c,f,i,a,b,h,w,m,_,v,C,X,R,V,A,I,$,z,G,q,y,P,Y,B,de,re,J,ee,E,te,pe,se,ne,Be,me,ue,F,U,Je,Ae,Z,W,He,Ke,$e,st,ge,ie,ke,at,je,Ue,ut,ft,kt,wt,vt,zt,oe,ht,yt,we=e[14]&&el(e);function Tt(k){e[46](k)}let Ct={text:"Debug"};e[1].show_debug!==void 0&&(Ct.checked=e[1].show_debug),q=new Ve({props:Ct}),be.push(()=>it(q,"checked",Tt));let ve=e[1].current=="img"&&tl(),ze=e[1].current=="rubiks"&&ll(e),Ee=e[1].current=="mockup"&&nl(e),ye=e[1].current=="processing"&&ol(e),Ce=e[1].current=="pallette"&&al(e),Pe=e[1].show_debug&&fl(e),De=e[1].current=="arrows"&&hl(e),Se=!e[3]&&pl(),Te=e[14]&&ml(e),Me=e[1].show_steps&&bl(e);function Pt(k,M){return k[0].has_mockup?Pn:Cn}let dt=Pt(e),Ye=dt(e),Le=!e[3]&&e[1].hovering&&kl(),Fe=e[1].resizedheight&&e[1].resizedwidth&&wl();return{c(){t=d("main"),l=d("div"),o=d("div"),n=d("div"),r=p(),c=d("button"),c.innerHTML='<i class="fa-fw fa fa-folder-open"></i>',f=p(),i=d("button"),i.innerHTML='<i class="fa-fw fa fa-expand"></i>',a=p(),b=d("button"),b.innerHTML='<i class="fa-fw fa fa-palette"></i>',h=p(),w=d("button"),w.innerHTML='<i class="fa-fw fa fa-cog"></i>',m=p(),_=d("button"),_.innerHTML='<i class="fa fa-image"></i>',v=p(),C=d("button"),C.innerHTML='<i class="fa-fw fa fa-play"></i>',X=p(),R=d("button"),R.innerHTML='<i class="fa-fw fa fa-desktop"></i>',V=p(),A=d("button"),A.textContent="Capture",I=p(),we&&we.c(),$=p(),z=d("div"),G=p(),We(q.$$.fragment),P=p(),Y=d("div"),B=d("div"),ve&&ve.c(),de=p(),ze&&ze.c(),re=p(),Ee&&Ee.c(),J=p(),ye&&ye.c(),ee=p(),Ce&&Ce.c(),E=p(),Pe&&Pe.c(),te=p(),De&&De.c(),pe=p(),se=d("div"),ne=d("div"),Se&&Se.c(),Be=p(),Te&&Te.c(),me=p(),ue=d("div"),F=d("div"),U=d("canvas"),Z=p(),W=d("canvas"),$e=p(),Me&&Me.c(),st=p(),ge=d("canvas"),at=p(),je=d("div"),Ue=d("canvas"),kt=p(),Ye.c(),vt=p(),Le&&Le.c(),zt=p(),Fe&&Fe.c(),u(c,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),u(c,"title","Open File"),u(i,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),u(i,"title","Dimensions"),N(i,"bg-gray-400",e[1].current=="rubiks"),u(b,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),u(b,"title","Colors"),N(b,"bg-gray-400",e[1].current=="pallette"),u(w,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),u(w,"title","Image Processing"),N(w,"bg-gray-400",e[1].current=="processing"),u(_,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),N(_,"bg-gray-400",e[1].current=="mockup"),u(C,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),N(C,"bg-gray-400",e[1].current=="arrows"),u(R,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),u(R,"title","Screen Capture"),N(R,"bg-gray-400",e[14]),u(A,"class","hidden h-10 p-2 rounded-lg border-solid border-2 text-center"),u(z,"class","spacer svelte-1w6kap6"),u(n,"class","flex"),u(o,"class","bg-white text-black p-2"),u(B,"class","bg-white shadow-md absolute z-10 pb-2"),_e(U,"display","none"),u(U,"class","small svelte-1w6kap6"),u(U,"id","canvas"),u(U,"width",Je=e[1].canvaswidth),u(U,"height",Ae=e[1].canvasheight),N(U,"shown",e[3]),N(U,"pixelated",e[0].pixelated),u(W,"id","output_canvas"),u(W,"width",He=e[1].resizedwidth),u(W,"height",Ke=e[1].resizedheight),_e(W,"border","4px solid red"),u(W,"class","svelte-1w6kap6"),N(W,"small",e[0].show_rubiks),N(W,"shown",e[3]),N(W,"pixelated",e[0].pixelated),_e(ge,"image-rendering","pixelated"),u(ge,"id","preview"),u(ge,"class","border-red-500 border-4 svelte-1w6kap6"),u(ge,"width",ie=e[0].zoom_range.x*3*Number(e[0].rubiks_scale)),u(ge,"height",ke=e[0].zoom_range.y*3*Number(e[0].rubiks_scale)),N(ge,"w-full",e[1].show_zoomed),N(ge,"fixed",!e[1].show_steps),N(ge,"top-[-100vh]",!e[1].show_steps),N(ge,"relative",e[1].show_steps),u(Ue,"id","bgcanvas"),u(Ue,"width",ut=e[1].mockupwidth),u(Ue,"height",ft=e[1].mockupheight),u(Ue,"class","svelte-1w6kap6"),N(Ue,"shown",e[0].has_mockup),_e(je,"position","relative"),u(je,"id","canvas_wrapper"),Et(()=>e[86].call(je)),u(F,"class","flex-col"),u(ue,"class","flex"),u(ne,"ondragover","return false"),u(ne,"id","drop_zone"),u(ne,"class","h-full"),u(se,"class","h-full grow justify-center"),u(se,"style",""),u(Y,"class","main relative h-full"),u(Y,"style",""),u(l,"class","flex flex-col h-screen")},m(k,M){j(k,t,M),s(t,l),s(l,o),s(o,n),s(n,r),s(n,c),s(n,f),s(n,i),s(n,a),s(n,b),s(n,h),s(n,w),s(n,m),s(n,_),s(n,v),s(n,C),s(n,X),s(n,R),s(n,V),s(n,A),s(n,I),we&&we.m(n,null),s(n,$),s(n,z),s(n,G),Ne(q,n,null),s(l,P),s(l,Y),s(Y,B),ve&&ve.m(B,null),s(B,de),ze&&ze.m(B,null),s(B,re),Ee&&Ee.m(B,null),s(B,J),ye&&ye.m(B,null),s(B,ee),Ce&&Ce.m(B,null),s(B,E),Pe&&Pe.m(B,null),s(B,te),De&&De.m(B,null),s(Y,pe),s(Y,se),s(se,ne),Se&&Se.m(ne,null),s(ne,Be),Te&&Te.m(ne,null),s(ne,me),s(ne,ue),s(ue,F),s(F,U),e[80](U),s(F,Z),s(F,W),e[81](W),s(F,$e),Me&&Me.m(F,null),s(F,st),s(F,ge),e[82](ge),s(F,at),s(F,je),s(je,Ue),e[83](Ue),s(je,kt),Ye.m(je,null),wt=$l(je,e[86].bind(je)),s(ne,vt),Le&&Le.m(ne,null),s(l,zt),Fe&&Fe.m(l,null),oe=!0,ht||(yt=[T(c,"click",e[34]),T(i,"click",e[35]),T(b,"click",e[36]),T(w,"click",e[37]),T(_,"click",e[38]),T(C,"click",e[39]),T(R,"click",e[40]),T(A,"click",e[41]),T(ne,"drop",e[22]),T(ne,"dragenter",e[24]),T(ne,"dragleave",e[25]),T(se,"click",e[87])],ht=!0)},p(k,M){(!oe||M[0]&2)&&N(i,"bg-gray-400",k[1].current=="rubiks"),(!oe||M[0]&2)&&N(b,"bg-gray-400",k[1].current=="pallette"),(!oe||M[0]&2)&&N(w,"bg-gray-400",k[1].current=="processing"),(!oe||M[0]&2)&&N(_,"bg-gray-400",k[1].current=="mockup"),(!oe||M[0]&2)&&N(C,"bg-gray-400",k[1].current=="arrows"),(!oe||M[0]&16384)&&N(R,"bg-gray-400",k[14]),k[14]?we?(we.p(k,M),M[0]&16384&&O(we,1)):(we=el(k),we.c(),O(we,1),we.m(n,$)):we&&(tt(),Q(we,1,1,()=>{we=null}),lt());const Dt={};!y&&M[0]&2&&(y=!0,Dt.checked=k[1].show_debug,nt(()=>y=!1)),q.$set(Dt),k[1].current=="img"?ve?(ve.p(k,M),M[0]&2&&O(ve,1)):(ve=tl(),ve.c(),O(ve,1),ve.m(B,de)):ve&&(tt(),Q(ve,1,1,()=>{ve=null}),lt()),k[1].current=="rubiks"?ze?(ze.p(k,M),M[0]&2&&O(ze,1)):(ze=ll(k),ze.c(),O(ze,1),ze.m(B,re)):ze&&(tt(),Q(ze,1,1,()=>{ze=null}),lt()),k[1].current=="mockup"?Ee?Ee.p(k,M):(Ee=nl(k),Ee.c(),Ee.m(B,J)):Ee&&(Ee.d(1),Ee=null),k[1].current=="processing"?ye?(ye.p(k,M),M[0]&2&&O(ye,1)):(ye=ol(k),ye.c(),O(ye,1),ye.m(B,ee)):ye&&(tt(),Q(ye,1,1,()=>{ye=null}),lt()),k[1].current=="pallette"?Ce?(Ce.p(k,M),M[0]&2&&O(Ce,1)):(Ce=al(k),Ce.c(),O(Ce,1),Ce.m(B,E)):Ce&&(tt(),Q(Ce,1,1,()=>{Ce=null}),lt()),k[1].show_debug?Pe?(Pe.p(k,M),M[0]&2&&O(Pe,1)):(Pe=fl(k),Pe.c(),O(Pe,1),Pe.m(B,te)):Pe&&(tt(),Q(Pe,1,1,()=>{Pe=null}),lt()),k[1].current=="arrows"?De?(De.p(k,M),M[0]&2&&O(De,1)):(De=hl(k),De.c(),O(De,1),De.m(B,null)):De&&(tt(),Q(De,1,1,()=>{De=null}),lt()),k[3]?Se&&(Se.d(1),Se=null):Se||(Se=pl(),Se.c(),Se.m(ne,Be)),k[14]?Te?Te.p(k,M):(Te=ml(k),Te.c(),Te.m(ne,me)):Te&&(Te.d(1),Te=null),(!oe||M[0]&2&&Je!==(Je=k[1].canvaswidth))&&u(U,"width",Je),(!oe||M[0]&2&&Ae!==(Ae=k[1].canvasheight))&&u(U,"height",Ae),(!oe||M[0]&8)&&N(U,"shown",k[3]),(!oe||M[0]&1)&&N(U,"pixelated",k[0].pixelated),(!oe||M[0]&2&&He!==(He=k[1].resizedwidth))&&u(W,"width",He),(!oe||M[0]&2&&Ke!==(Ke=k[1].resizedheight))&&u(W,"height",Ke),(!oe||M[0]&1)&&N(W,"small",k[0].show_rubiks),(!oe||M[0]&8)&&N(W,"shown",k[3]),(!oe||M[0]&1)&&N(W,"pixelated",k[0].pixelated),k[1].show_steps?Me?Me.p(k,M):(Me=bl(k),Me.c(),Me.m(F,st)):Me&&(Me.d(1),Me=null),(!oe||M[0]&1&&ie!==(ie=k[0].zoom_range.x*3*Number(k[0].rubiks_scale)))&&u(ge,"width",ie),(!oe||M[0]&1&&ke!==(ke=k[0].zoom_range.y*3*Number(k[0].rubiks_scale)))&&u(ge,"height",ke),(!oe||M[0]&2)&&N(ge,"w-full",k[1].show_zoomed),(!oe||M[0]&2)&&N(ge,"fixed",!k[1].show_steps),(!oe||M[0]&2)&&N(ge,"top-[-100vh]",!k[1].show_steps),(!oe||M[0]&2)&&N(ge,"relative",k[1].show_steps),(!oe||M[0]&2&&ut!==(ut=k[1].mockupwidth))&&u(Ue,"width",ut),(!oe||M[0]&2&&ft!==(ft=k[1].mockupheight))&&u(Ue,"height",ft),(!oe||M[0]&1)&&N(Ue,"shown",k[0].has_mockup),dt===(dt=Pt(k))&&Ye?Ye.p(k,M):(Ye.d(1),Ye=dt(k),Ye&&(Ye.c(),Ye.m(je,null))),!k[3]&&k[1].hovering?Le||(Le=kl(),Le.c(),Le.m(ne,null)):Le&&(Le.d(1),Le=null),k[1].resizedheight&&k[1].resizedwidth?Fe||(Fe=wl(),Fe.c(),Fe.m(l,null)):Fe&&(Fe.d(1),Fe=null)},i(k){oe||(O(we),O(q.$$.fragment,k),O(ve),O(ze),O(ye),O(Ce),O(Pe),O(De),oe=!0)},o(k){Q(we),Q(q.$$.fragment,k),Q(ve),Q(ze),Q(ye),Q(Ce),Q(Pe),Q(De),oe=!1},d(k){k&&H(t),we&&we.d(),Oe(q),ve&&ve.d(),ze&&ze.d(),Ee&&Ee.d(),ye&&ye.d(),Ce&&Ce.d(),Pe&&Pe.d(),De&&De.d(),Se&&Se.d(),Te&&Te.d(),e[80](null),e[81](null),Me&&Me.d(),e[82](null),e[83](null),Ye.d(),wt(),Le&&Le.d(),Fe&&Fe.d(),ht=!1,Xe(yt)}}}function Rn(e,t,l){let o,n;xl(()=>{window.addEventListener("keydown",g=>{if(a.enable_arrows&&a.show_steps)switch(g.key){case"ArrowUp":g.preventDefault(),l(1,a.select_pos.y-=1,a);break;case"ArrowDown":g.preventDefault(),l(1,a.select_pos.y+=1,a);break;case"ArrowLeft":l(1,a.select_pos.x-=1,a),g.preventDefault();break;case"ArrowRight":l(1,a.select_pos.x+=1,a),g.preventDefault();break}}),F(c[0])});let r=!1,c=[{name:"Rubik's Colors",colors:[{color:"#013082",on:!0},{color:"#BB2328",on:!0},{color:"#01B351",on:!0},{color:"#FE8F25",on:!0},{color:"#F5FF42",on:!0},{color:"#ECF3F6",on:!0}]},{name:"Rubik's Colors W/O Green",colors:[{color:"#013082",on:!0},{color:"#BB2328",on:!0},{color:"#FE8F25",on:!0},{color:"#F5FF42",on:!0},{color:"#ECF3F6",on:!0}]},{name:"Black & White",colors:[{color:"#000",on:!0},{color:"#fff",on:!0}]},{name:"Black, Gray, White",colors:[{color:"#000",on:!0},{color:"#666",on:!0},{color:"#fff",on:!0}]},{name:"Gray Scale",colors:[{color:"#000",on:!0},{color:"#111",on:!0},{color:"#222",on:!0},{color:"#333",on:!0},{color:"#444",on:!0},{color:"#555",on:!0},{color:"#666",on:!0},{color:"#777",on:!0},{color:"#888",on:!0},{color:"#999",on:!0},{color:"#aaa",on:!0},{color:"#bbb",on:!0},{color:"#ccc",on:!0},{color:"#ddd",on:!0},{color:"#eee",on:!0},{color:"#fff",on:!0}]},{name:"RGB",colors:[{color:"#000",on:!0},{color:"#f00",on:!0},{color:"#0f0",on:!0},{color:"#00f",on:!0},{color:"#fff",on:!0}]},{name:"CMYK",colors:[{color:"#000",on:!0},{color:"#0ff",on:!0},{color:"#f0f",on:!0},{color:"#ff0",on:!0},{color:"#fff",on:!0}]}],f=[[[0/4,2/4],[3/4,1/4]],[[0/16,8/16,2/16,10/16],[12/16,4/16,14/16,6/16],[3/16,11/16,1/16,9/16],[15/16,7/16,13/16,5/16]]],i={zoom_range:{x:6,y:1},screenCapturePadding:{top:0,left:0,bottom:0,right:0},loadedfile:"",cache:!0,cap:!1,pixelated:!1,has_mockup:!1,mockup_pixel_size:5,mockup_x:0,mockup_y:0,width:99,height:0,dithering:"fs",max_width:600,show_rubiks:!0,show_grid:!0,rubiks_scale:8,gray_scale_input:!1,gray_scale_nearest_pixel:!1,grid_size:2,pallette:c[0],debug_range:-1,matrix:f[0],live_capture:!1},a={allow_edit_colors:!1,enable_arrows:!0,current:"",select_pos:{x:0,y:0},hovering:!1,mockup_hovering:!1,mockupheight:100,mockupwidth:100,show_zoomed:!1,show_steps:!1,show_debug:!1,resizedwidth:0,resizedheight:0,total_pixels:0,canvaswidth:100,canvasheight:100},b,h,w,m,_,v,C,X,R,V,A="",I={},$,z=!1,G=!1;async function q(g){let x=null;try{x=await navigator.mediaDevices.getDisplayMedia(g),z=!0,l(14,G=!0),await ot(),l(13,$.srcObject=x,$),setTimeout(()=>{y()},250)}catch(D){console.error(`Error: ${D}`)}let K=()=>{se&&(i.live_capture&&se(),setTimeout(K,1e3/15))};K()}let y=async function(){if(C){console.log("videocanvas is not null");let g=C.getContext("2d");console.log($.videoWidth,$.videoHeight),await ot();let x=300,K=x*$.videoHeight/$.videoWidth,{top:D,bottom:Qe,left:xe,right:et}={...i.screenCapturePadding};l(10,X=x-xe-et),l(11,R=K-D-Qe),await ot(),g.drawImage($,-xe,-D,x,K),console.log("loading image on video"),ue(C)}else console.log("videocanvas is null")},P=function(g){g.preventDefault();let x=g;if(x.dataTransfer.items)if(x.dataTransfer.items.length==1){let K=x.dataTransfer.items[0];if(K.kind==="file"){const D=K.getAsFile();me(D)}else console.log("kind is not file, but: "+K.kind)}else l(17,n="Error: can only load one file");l(1,a.hovering=!1,a)},Y=function(){var g=document.createElement("input");g.type="file",g.onchange=x=>{var K=x.target.files[0];me(K)},g.click()},B=function(){console.log("drag enter"),l(1,a.hovering=!0,a)},de=function(){l(1,a.hovering=!1,a)},re=function(g){g.preventDefault();let x=g;if(x.dataTransfer.items)if(x.dataTransfer.items.length==1){let K=x.dataTransfer.items[0];if(K.kind==="file"){const D=K.getAsFile();l(0,i.has_mockup=!0,i),ne(D)}else console.log("kind is not file, but: "+K.kind)}else l(17,n="Error: can only load one file");l(1,a.mockup_hovering=!1,a)},J=function(){console.log("drag enter"),l(1,a.mockup_hovering=!0,a)},ee=function(){l(1,a.mockup_hovering=!1,a)},E,te,pe,se=null,ne=function(g){let x=m.getContext("2d"),K=pe.getContext("2d");te=new Image,te.onload=async function(){await ot(),l(1,a.mockupheight=te.height,a),l(1,a.mockupwidth=te.width,a),await ot(),x.drawImage(te,0,0,te.width,te.height),K.drawImage(te,0,0,200,200*te.height/te.width)},te.src=URL.createObjectURL(g)},Be=function(){l(0,i.has_mockup=!1,i),te.src=null,pe.getContext("2d").clearRect(0,0,pe.width,pe.height)},me=function(g){var K;l(14,G=!1),l(0,i.loadedfile=g.name,i),(K=i.loadedfile)!=null&&K.toLowerCase().endsWith(".png")&&alert("Transparent PNGs have known issues.. Please use non-transparent PNGs");let x=w.getContext("2d");E=new Image,E.onload=async function(){l(1,a.canvasheight=E.height,a),l(1,a.canvaswidth=E.width,a),l(3,r=!0),I={},await ot(),x.drawImage(E,0,0,E.width,E.height)},E.src=URL.createObjectURL(g)},ue=function(g){let x=w.getContext("2d");E=new Image,E.onload=async function(){l(1,a.canvasheight=E.height,a),l(1,a.canvaswidth=E.width,a),l(3,r=!0),I={},await ot(),x.drawImage(E,0,0,E.width,E.height)},E.src=g.toDataURL("image/png")},F=function(g){l(0,i.pallette=g,i)},U=function(g){a.current==g?l(1,a.current="",a):l(1,a.current=g,a)};en(async()=>{if(!i.width){console.log("no width, ending here");return}if(!r){console.log("no image loaded, ending here");return}if(!E){console.log("originalImage is empty","ending here");return}let g=a.canvasheight/a.canvaswidth*i.width;if(l(0,i.height=g,i),l(1,a.resizedwidth=parseInt(i.width/3)*3,a),l(1,a.resizedheight=parseInt(g/3)*3,a),l(1,a.total_pixels=a.resizedheight*a.resizedwidth,a),await ot(),g<1){console.log("height is less than 1","ending here");return}if(A=S.hashCode(JSON.stringify(o)),i.cache&&A&&I[A]){console.log("found",o.loadedfile,A,"from cache");let K=_.getContext("2d"),D=I[A].data,Qe=new ImageData(D.data,D.width,D.height);K.putImageData(Qe,0,0)}else{console.log("GENERATING IMAGE",JSON.stringify(o),A);let K=_.getContext("2d");K.drawImage(E,0,0,a.resizedwidth,a.resizedheight);let D=K.getImageData(0,0,a.resizedwidth,a.resizedheight);if(i.gray_scale_input)for(let le=0,Re=0;le<D.height;le++)for(let fe=0;fe<D.width;fe++,Re+=4){let gt=S.getPixelDataRGB(D,fe,le),Ze=Math.round((gt.r+gt.g+gt.b)/3);S.setPixelDataRaw(D,Re,Ze),S.setPixelDataRaw(D,Re+1,Ze),S.setPixelDataRaw(D,Re+2,Ze)}let Qe=i.pallette.colors;i.pallette.colors.length&&(Qe=i.pallette.colors.filter(le=>le.on).map(le=>le.color));let xe=Qe.length,et=Qe;et.forEach((le,Re)=>{et[Re]=S.hexToRgb(le)});for(let le=0,Re=0;le<D.height;le++)for(let fe=0;fe<D.width;fe++,Re+=4){let gt=S.getPixelDataRGB(D,fe,le),Ze=S.nearestPixel2(gt,et,i.gray_scale_nearest_pixel);if(i.dithering=="")S.setPixelDataRaw(D,Re,Ze.r),S.setPixelDataRaw(D,Re+1,Ze.g),S.setPixelDataRaw(D,Re+2,Ze.b);else if(i.dithering=="fs"){S.setPixelDataRaw(D,Re,Ze.r),S.setPixelDataRaw(D,Re+1,Ze.g),S.setPixelDataRaw(D,Re+2,Ze.b);let ae=S.pixelDiff(gt,Ze);if(fe<D.width-1){let Ie=S.getPixelDataRGB(D,fe+1,le);i.cap?S.setPixelDataRGB(D,fe+1,le,{r:S.clamp(0,255,Ie.r+ae.r*7/16),g:S.clamp(0,255,Ie.g+ae.g*7/16),b:S.clamp(0,255,Ie.b+ae.b*7/16)}):S.setPixelDataRGB(D,fe+1,le,{r:Ie.r+ae.r*7/16,g:Ie.g+ae.g*7/16,b:Ie.b+ae.b*7/16})}if(le<D.height-1){if(fe>0){let Ge=S.getPixelDataRGB(D,fe-1,le+1);i.cap?S.setPixelDataRGB(D,fe-1,le+1,{r:S.clamp(0,255,Ge.r+ae.r*3/16),g:S.clamp(0,255,Ge.g+ae.g*3/16),b:S.clamp(0,255,Ge.b+ae.b*3/16)}):S.setPixelDataRGB(D,fe-1,le+1,{r:Ge.r+ae.r*3/16,g:Ge.g+ae.g*3/16,b:Ge.b+ae.b*3/16})}let Ie=S.getPixelDataRGB(D,fe,le+1);if(i.cap?S.setPixelDataRGB(D,fe,le+1,{r:S.clamp(0,255,Ie.r+ae.r*5/16),g:S.clamp(0,255,Ie.g+ae.g*5/16),b:S.clamp(0,255,Ie.b+ae.b*5/16)}):S.setPixelDataRGB(D,fe,le+1,{r:Ie.r+ae.r*5/16,g:Ie.g+ae.g*5/16,b:Ie.b+ae.b*5/16}),fe<D.width-1){let Ge=S.getPixelDataRGB(D,fe+1,le+1);i.cap?S.setPixelDataRGB(D,fe+1,le+1,{r:S.clamp(0,255,Ge.r+ae.r*1/16),g:S.clamp(0,255,Ge.g+ae.g*1/16),b:S.clamp(0,255,Ge.b+ae.b*1/16)}):S.setPixelDataRGB(D,fe+1,le+1,{r:Ge.r+ae.r*1/16,g:Ge.g+ae.g*1/16,b:Ge.b+ae.b*1/16})}}}else if(i.dithering=="pattern"){let ae=S.getPixelDataRGB(D,fe,le),Ie=255/xe*(i.matrix[fe%i.matrix[0].length][le%i.matrix.length]-.5),Ge=S.nearestPixel2({r:ae.r+Ie,g:ae.g+Ie,b:ae.b+Ie},et,i.gray_scale_nearest_pixel);S.setPixelDataRaw(D,Re,Ge.r),S.setPixelDataRaw(D,Re+1,Ge.g),S.setPixelDataRaw(D,Re+2,Ge.b)}}if(K.putImageData(D,0,0),i.cache){let le=new ImageData(new Uint8ClampedArray(D.data),D.width,D.height);console.log("adding",A,"to cache"),I[A]={data:le,params:Object.assign({},o),config:Object.assign({},i)}}}let x=_.getContext("2d");if(x.getImageData(0,0,a.resizedwidth,a.resizedheight),a.enable_arrows){let K=v.getContext("2d");K.fillStyle="black",K.fillRect(0,0,v.width,v.height);let D=x.getImageData(a.select_pos.x*3,a.select_pos.y*3,i.zoom_range.x*3,i.zoom_range.y*3),{grid_size:Qe,rubiks_scale:xe}=i,et=S.scaleImageData(x,D,xe);K.imageSmoothingEnabled=!1,K.putImageData(et,0,0),S.drawGrid(K,Qe/2,xe,i.zoom_range.x*3,i.zoom_range.y*3),S.drawGrid(K,Qe,xe*3,i.zoom_range.x*3,i.zoom_range.y*3)}if(i.show_rubiks){let K=V.getContext("2d"),Qe=_.getContext("2d").getImageData(0,0,a.resizedwidth,a.resizedheight);if(K.imageSmoothingEnabled=!1,K.drawImage(_,0,0,a.resizedwidth*i.rubiks_scale,a.resizedheight*i.rubiks_scale),i.show_grid&&i.grid_size>0){let{grid_size:xe,rubiks_scale:et}=i,{width:le,height:Re}=Qe;S.drawGrid(K,xe,et,le,Re)}}});const Je=()=>{U("img")},Ae=()=>{Y()},Z=()=>{U("rubiks")},W=()=>{U("pallette")},He=()=>{U("processing")},Ke=()=>{U("mockup")},$e=()=>{U("arrows")},st=()=>{l(16,se=y),q()},ge=()=>{y()};function ie(g){be[g?"unshift":"push"](()=>{$=g,l(13,$)})}const ke=()=>{y()};function at(g){e.$$.not_equal(i.live_capture,g)&&(i.live_capture=g,l(0,i))}function je(g){be[g?"unshift":"push"](()=>{C=g,l(9,C)})}function Ue(g){e.$$.not_equal(a.show_debug,g)&&(a.show_debug=g,l(1,a))}function ut(g){e.$$.not_equal(i.pixelated,g)&&(i.pixelated=g,l(0,i))}function ft(g){e.$$.not_equal(i.cache,g)&&(i.cache=g,l(0,i))}function kt(g){e.$$.not_equal(i.show_rubiks,g)&&(i.show_rubiks=g,l(0,i))}function wt(g){e.$$.not_equal(i.show_grid,g)&&(i.show_grid=g,l(0,i))}function vt(){i.width=qe(this.value),l(0,i)}function zt(){i.rubiks_scale=qe(this.value),l(0,i)}function oe(){i.grid_size=qe(this.value),l(0,i)}function ht(g){be[g?"unshift":"push"](()=>{pe=g,l(15,pe)})}function yt(){i.mockup_pixel_size=qe(this.value),l(0,i)}function we(){i.mockup_x=qe(this.value),l(0,i)}function Tt(){i.mockup_y=qe(this.value),l(0,i)}function Ct(g){e.$$.not_equal(i.gray_scale_input,g)&&(i.gray_scale_input=g,l(0,i))}function ve(g){e.$$.not_equal(i.gray_scale_nearest_pixel,g)&&(i.gray_scale_nearest_pixel=g,l(0,i))}const ze=()=>l(0,i.dithering="",i),Ee=()=>l(0,i.dithering="fs",i),ye=()=>l(0,i.dithering="pattern",i),Ce=g=>{l(0,i.matrix=g,i)};function Pe(g){e.$$.not_equal(a.allow_edit_colors,g)&&(a.allow_edit_colors=g,l(1,a))}const De=(g,x,K)=>{F(g)};function Se(g,x){e.$$.not_equal(x.on,g)&&(x.on=g,l(0,i))}function Te(g,x){g[x].color=this.value,l(0,i)}function Me(){i.debug_range=qe(this.value),l(0,i)}function Pt(g,x){g[x]=qe(this.value),l(0,i)}function dt(g){e.$$.not_equal(i.cap,g)&&(i.cap=g,l(0,i))}function Ye(){i.zoom_range.x=qe(this.value),l(0,i)}function Le(){i.zoom_range.y=qe(this.value),l(0,i)}function Fe(g){e.$$.not_equal(a.show_steps,g)&&(a.show_steps=g,l(1,a))}function k(g){e.$$.not_equal(a.enable_arrows,g)&&(a.enable_arrows=g,l(1,a))}function M(g){e.$$.not_equal(a.show_zoomed,g)&&(a.show_zoomed=g,l(1,a))}function Dt(){i.screenCapturePadding.left=qe(this.value),l(0,i)}function Tl(){i.screenCapturePadding.right=qe(this.value),l(0,i)}function Ml(){i.screenCapturePadding.top=qe(this.value),l(0,i)}function Sl(){i.screenCapturePadding.bottom=qe(this.value),l(0,i)}function Ll(g){be[g?"unshift":"push"](()=>{w=g,l(5,w)})}function Fl(g){be[g?"unshift":"push"](()=>{_=g,l(7,_)})}function Nl(g){be[g?"unshift":"push"](()=>{v=g,l(8,v)})}function Ol(g){be[g?"unshift":"push"](()=>{m=g,l(6,m)})}function Al(g){be[g?"unshift":"push"](()=>{V=g,l(12,V)})}function ql(g){be[g?"unshift":"push"](()=>{V=g,l(12,V)})}function Wl(){h=this.clientHeight,b=this.clientWidth,l(4,h),l(2,b)}const Hl=()=>{l(1,a.current="",a)};return e.$$.update=()=>{e.$$.dirty[0]&1&&l(32,o={loadedfile:i.loadedfile,width:i.width,height:i.height,dithering:i.dithering,gray_scale_input:i.gray_scale_input,gray_scale_nearest_pixel:i.gray_scale_nearest_pixel,pallette:i.pallette,matrix:i.matrix}),e.$$.dirty[0]&7|e.$$.dirty[1]&2&&l(17,n=JSON.stringify({ui:a,params:o,config:i,clientWidth:b},null,2))},[i,a,b,r,h,w,m,_,v,C,X,R,V,$,G,pe,se,n,c,f,q,y,P,Y,B,de,re,J,ee,Be,F,U,o,Je,Ae,Z,W,He,Ke,$e,st,ge,ie,ke,at,je,Ue,ut,ft,kt,wt,vt,zt,oe,ht,yt,we,Tt,Ct,ve,ze,Ee,ye,Ce,Pe,De,Se,Te,Me,Pt,dt,Ye,Le,Fe,k,M,Dt,Tl,Ml,Sl,Ll,Fl,Nl,Ol,Al,ql,Wl,Hl]}class In extends Wt{constructor(t){super(),qt(this,t,Rn,Dn,At,{},null,[-1,-1,-1,-1])}}new In({target:document.getElementById("app")});
