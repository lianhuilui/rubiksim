(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function l(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=l(r);fetch(r.href,a)}})();function De(){}function Rt(e){return e()}function lt(){return Object.create(null)}function pe(e){e.forEach(Rt)}function Ft(e){return typeof e=="function"}function Qe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ot(e){return Object.keys(e).length===0}function h(e,t){e.appendChild(t)}function E(e,t,l){e.insertBefore(t,l||null)}function I(e){e.parentNode.removeChild(e)}function Be(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function P(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function y(){return H(" ")}function Xe(){return H("")}function K(e,t,l,i){return e.addEventListener(t,l,i),()=>e.removeEventListener(t,l,i)}function d(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Ge(e){return e===""?null:+e}function Tt(e){return Array.from(e.childNodes)}function _e(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function be(e,t){e.value=t==null?"":t}function Ye(e,t,l,i){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,i?"important":"")}function A(e,t,l){e.classList[l?"add":"remove"](t)}let Ne;function Se(e){Ne=e}function At(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function Mt(e){At().$$.after_update.push(e)}function Ct(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(i=>i.call(this,t))}const Ee=[],ce=[],qe=[],We=[],Bt=Promise.resolve();let He=!1;function It(){He||(He=!0,Bt.then(Gt))}function nt(){return It(),Bt}function Ke(e){qe.push(e)}function me(e){We.push(e)}const $e=new Set;let Me=0;function Gt(){const e=Ne;do{for(;Me<Ee.length;){const t=Ee[Me];Me++,Se(t),qt(t.$$)}for(Se(null),Ee.length=0,Me=0;ce.length;)ce.pop()();for(let t=0;t<qe.length;t+=1){const l=qe[t];$e.has(l)||($e.add(l),l())}qe.length=0}while(Ee.length);for(;We.length;)We.pop()();He=!1,$e.clear(),Se(e)}function qt(e){if(e.fragment!==null){e.update(),pe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ke)}}const Le=new Set;let ze;function we(){ze={r:0,c:[],p:ze}}function ve(){ze.r||pe(ze.c),ze=ze.p}function C(e,t){e&&e.i&&(Le.delete(e),e.i(t))}function O(e,t,l,i){if(e&&e.o){if(Le.has(e))return;Le.add(e),ze.c.push(()=>{Le.delete(e),i&&(l&&e.d(1),i())}),e.o(t)}else i&&i()}function ke(e,t,l){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=l,l(e.$$.ctx[i]))}function ue(e){e&&e.c()}function ae(e,t,l,i){const{fragment:r,on_mount:a,on_destroy:s,after_update:f}=e.$$;r&&r.m(t,l),i||Ke(()=>{const n=a.map(Rt).filter(Ft);s?s.push(...n):pe(n),e.$$.on_mount=[]}),f.forEach(Ke)}function fe(e,t){const l=e.$$;l.fragment!==null&&(pe(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Lt(e,t){e.$$.dirty[0]===-1&&(Ee.push(e),It(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ze(e,t,l,i,r,a,s,f=[-1]){const n=Ne;Se(e);const o=e.$$={fragment:null,ctx:null,props:a,update:De,not_equal:r,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(n?n.$$.context:[])),callbacks:lt(),dirty:f,skip_bound:!1,root:t.target||n.$$.root};s&&s(o.root);let p=!1;if(o.ctx=l?l(e,t.props||{},(b,u,...g)=>{const c=g.length?g[0]:u;return o.ctx&&r(o.ctx[b],o.ctx[b]=c)&&(!o.skip_bound&&o.bound[b]&&o.bound[b](c),p&&Lt(e,b)),u}):[],o.update(),p=!0,pe(o.before_update),o.fragment=i?i(o.ctx):!1,t.target){if(t.hydrate){const b=Tt(t.target);o.fragment&&o.fragment.l(b),b.forEach(I)}else o.fragment&&o.fragment.c();t.intro&&C(e.$$.fragment),ae(e,t.target,t.anchor,t.customElement),Gt()}Se(n)}class xe{$destroy(){fe(this,1),this.$destroy=De}$on(t,l){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(l),()=>{const r=i.indexOf(l);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function jt(e){let t,l,i,r,a,s;return{c(){t=P("div"),l=H(e[1]),d(t,"style",i=e[0]&&e[2]?"background-color: "+e[2]+";":""),d(t,"class",r="h-10 p-2 "+(e[0]?e[3]:"")+" rounded-lg "+(e[0]?"border-solid":"border-none")+" border-2 text-center svelte-mesu7o")},m(f,n){E(f,t,n),h(t,l),a||(s=[K(t,"click",e[4]),K(t,"click",e[5])],a=!0)},p(f,[n]){n&2&&_e(l,f[1]),n&5&&i!==(i=f[0]&&f[2]?"background-color: "+f[2]+";":"")&&d(t,"style",i),n&9&&r!==(r="h-10 p-2 "+(f[0]?f[3]:"")+" rounded-lg "+(f[0]?"border-solid":"border-none")+" border-2 text-center svelte-mesu7o")&&d(t,"class",r)},i:De,o:De,d(f){f&&I(t),a=!1,pe(s)}}}function $t(e,t,l){let{checked:i=!1}=t,{text:r="O"}=t,{bgcolor:a=""}=t,{toggleClass:s=a?"":"bg-green-600"}=t,f=()=>{console.log("toggle"),l(0,i=!i)};function n(o){Ct.call(this,e,o)}return e.$$set=o=>{"checked"in o&&l(0,i=o.checked),"text"in o&&l(1,r=o.text),"bgcolor"in o&&l(2,a=o.bgcolor),"toggleClass"in o&&l(3,s=o.toggleClass)},[i,r,a,s,f,n]}class de extends xe{constructor(t){super(),Ze(this,t,$t,jt,Qe,{checked:0,text:1,bgcolor:2,toggleClass:3})}}function it(e,t,l){const i=e.slice();return i[5]=t[l],i}function rt(e){let t,l;return{c(){t=P("span"),l=H("\xA0"),Ye(t,"background-color",e[5])},m(i,r){E(i,t,r),h(t,l)},p:De,d(i){i&&I(t)}}}function Ut(e){let t,l,i,r,a,s,f=e[3],n=[];for(let o=0;o<f.length;o+=1)n[o]=rt(it(e,f,o));return{c(){t=P("button"),l=H(e[2]),i=y(),r=P("div");for(let o=0;o<n.length;o+=1)n[o].c();d(r,"class","svelte-63dooi"),d(t,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),A(t,"bg-green-600",e[1]==e[0])},m(o,p){E(o,t,p),h(t,l),h(t,i),h(t,r);for(let b=0;b<n.length;b+=1)n[b].m(r,null);a||(s=K(t,"click",e[4]),a=!0)},p(o,[p]){if(p&4&&_e(l,o[2]),p&8){f=o[3];let b;for(b=0;b<f.length;b+=1){const u=it(o,f,b);n[b]?n[b].p(u,p):(n[b]=rt(u),n[b].c(),n[b].m(r,null))}for(;b<n.length;b+=1)n[b].d(1);n.length=f.length}p&3&&A(t,"bg-green-600",o[1]==o[0])},i:De,o:De,d(o){o&&I(t),Be(n,o),a=!1,s()}}}function Jt(e,t,l){let{color:i=""}=t,{selected:r=""}=t,{name:a="default"}=t,s=i.split(",");function f(n){Ct.call(this,e,n)}return e.$$set=n=>{"color"in n&&l(0,i=n.color),"selected"in n&&l(1,r=n.selected),"name"in n&&l(2,a=n.name)},[i,r,a,s,f]}class Wt extends xe{constructor(t){super(),Ze(this,t,Jt,Ut,Qe,{color:0,selected:1,name:2})}}const Ve=(e,t)=>({r:e.r-t.r,g:e.g-t.g,b:e.b-t.b}),Ht=(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}),Kt=(e,t,l)=>Math.max(e,Math.min(t,l));let Ue={};const Et=e=>{if(Ue[e])return Ue[e];{if(e.length==4){let[a,s,f,n]=e.split("");e="#"+s+s+f+f+n+n}let t=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16),r={r:t,g:l,b:i};return Ue[e]=r,r}},et=(e,t,l)=>{let i=Ve(l?Nt(e):e,t),r=Math.abs(i.r),a=Math.abs(i.g),s=Math.abs(i.b);return r*r+s*s+a*a};let Je={};const Vt=(e,t,l)=>{let i;Je[t]?i=Je[t]:(i=t.split(","),Je[t]=i);let r=i[0],a=null;return i.forEach((s,f)=>{let n=Et(s),o=et(n,e,l);(a==null||a>o)&&(a=o,r=n)}),r},Qt=(e,t,l)=>{let i=t[0],r=null;return t.forEach((a,s)=>{let f=et(a,e,l);(r==null||r>f)&&(r=f,i=a)}),i},St=e=>Math.floor((e.r+e.g+e.b)/3),Xt=e=>"#"+e.r.toString(16).padStart(2,"0")+e.g.toString(16).padStart(2,"0")+e.b.toString(16).padStart(2,"0"),Nt=e=>{let t=St(e);return{r:t,g:t,b:t}};function Yt(e){let t=0;for(let l=0,i=e.length;l<i;l++){let r=e.charCodeAt(l);t=(t<<5)-t+r,t|=0}return t}const tt=(e,t,l)=>(t*l+e)*4;let Zt=function(e,t,l,i){let r=e.width,a=tt(t,l,r);e.data[a]=i.r,e.data[a+1]=i.g,e.data[a+2]=i.b},xt=function(e,t,l){e.data[t]=l},el=function(e,t,l){let i=e.width,r=tt(t,l,i);return{r:e.data[r],g:e.data[r+1],b:e.data[r+2]}};const z={getPixelDataRGB:el,setPixelDataRGB:Zt,setPixelDataRaw:xt,calc_i:tt,hashCode:Yt,Rgb2Gray:Nt,RgbGrayValue:St,RgbToHex:Xt,nearestPixel:Vt,nearestPixel2:Qt,clamp:Kt,pixelAdd:Ht,pixelDiff:Ve,hexToRgb:Et,calculatePixelDifference:et};function st(e,t,l){const i=e.slice();return i[44]=t[l],i}function ot(e,t,l){const i=e.slice();return i[47]=t[l],i[48]=t,i[49]=l,i}function at(e,t,l){const i=e.slice();return i[50]=t[l],i[51]=t,i[52]=l,i}function ft(e,t,l){const i=e.slice();return i[53]=t[l],i}function ct(e,t,l){const i=e.slice();return i[56]=t[l],i}function ut(e){let t,l,i,r,a,s,f,n,o,p=e[0].width+"",b,u,g,c,v,M,Y,$,V,S,te,oe;function re(m){e[21](m)}let U={text:"Pixelated"};e[0].pixelated!==void 0&&(U.checked=e[0].pixelated),v=new de({props:U}),ce.push(()=>ke(v,"checked",re));function Z(m){e[22](m)}let N={text:"Cache"};return e[0].cache!==void 0&&(N.checked=e[0].cache),$=new de({props:N}),ce.push(()=>ke($,"checked",Z)),{c(){t=P("div"),l=P("div"),i=P("div"),r=P("span"),r.textContent="Width",a=y(),s=P("input"),n=y(),o=P("span"),b=H(p),u=y(),g=P("div"),c=P("div"),ue(v.$$.fragment),Y=y(),ue($.$$.fragment),d(r,"class","svelte-oug5tb"),Ye(s,"flex","1"),d(s,"type","range"),d(s,"min","3"),d(s,"max",f=e[0].max_width),d(s,"step","3"),d(s,"class","svelte-oug5tb"),d(o,"class","svelte-oug5tb"),d(i,"class","flex slider-wrapper svelte-oug5tb"),d(c,"class","d-block"),d(g,"class","flex"),d(l,"class","flex flex-col"),d(t,"class","bg-white text-black p-2")},m(m,q){E(m,t,q),h(t,l),h(l,i),h(i,r),h(i,a),h(i,s),be(s,e[0].width),h(i,n),h(i,o),h(o,b),h(l,u),h(l,g),h(g,c),ae(v,c,null),h(c,Y),ae($,c,null),S=!0,te||(oe=[K(s,"change",e[20]),K(s,"input",e[20])],te=!0)},p(m,q){(!S||q[0]&1&&f!==(f=m[0].max_width))&&d(s,"max",f),q[0]&1&&be(s,m[0].width),(!S||q[0]&1)&&p!==(p=m[0].width+"")&&_e(b,p);const se={};!M&&q[0]&1&&(M=!0,se.checked=m[0].pixelated,me(()=>M=!1)),v.$set(se);const ge={};!V&&q[0]&1&&(V=!0,ge.checked=m[0].cache,me(()=>V=!1)),$.$set(ge)},i(m){S||(C(v.$$.fragment,m),C($.$$.fragment,m),S=!0)},o(m){O(v.$$.fragment,m),O($.$$.fragment,m),S=!1},d(m){m&&I(t),fe(v),fe($),te=!1,pe(oe)}}}function gt(e){let t,l,i,r,a,s,f,n,o,p,b,u,g,c,v=e[0].rubiks_scale+"",M,Y,$,V,S,te,oe,re=e[0].grid_size+"",U,Z,N,m;function q(F){e[23](F)}let se={text:"rubiks"};e[0].show_rubiks!==void 0&&(se.checked=e[0].show_rubiks),r=new de({props:se}),ce.push(()=>ke(r,"checked",q));function ge(F){e[24](F)}let J={text:"Show Grid"};return e[0].show_grid!==void 0&&(J.checked=e[0].show_grid),f=new de({props:J}),ce.push(()=>ke(f,"checked",ge)),{c(){t=P("div"),l=P("div"),i=P("div"),ue(r.$$.fragment),s=y(),ue(f.$$.fragment),o=y(),p=P("div"),b=H(`Scale\r
            `),u=P("input"),g=y(),c=P("span"),M=H(v),Y=y(),$=P("span"),$.textContent="\xA0",V=H(`\r
            Grid Size\r
            `),S=P("input"),te=y(),oe=P("span"),U=H(re),d(i,"class","flex"),d(u,"type","range"),d(u,"max","40"),Ye($,"margin-left","10px"),d(S,"type","range"),d(S,"max","10"),d(p,"class","flex"),d(l,"class","flex flex-col"),d(t,"class","bg-white text-black p-2")},m(F,x){E(F,t,x),h(t,l),h(l,i),ae(r,i,null),h(i,s),ae(f,i,null),h(l,o),h(l,p),h(p,b),h(p,u),be(u,e[0].rubiks_scale),h(p,g),h(p,c),h(c,M),h(p,Y),h(p,$),h(p,V),h(p,S),be(S,e[0].grid_size),h(p,te),h(p,oe),h(oe,U),Z=!0,N||(m=[K(u,"change",e[25]),K(u,"input",e[25]),K(S,"change",e[26]),K(S,"input",e[26])],N=!0)},p(F,x){const Pe={};!a&&x[0]&1&&(a=!0,Pe.checked=F[0].show_rubiks,me(()=>a=!1)),r.$set(Pe);const ee={};!n&&x[0]&1&&(n=!0,ee.checked=F[0].show_grid,me(()=>n=!1)),f.$set(ee),x[0]&1&&be(u,F[0].rubiks_scale),(!Z||x[0]&1)&&v!==(v=F[0].rubiks_scale+"")&&_e(M,v),x[0]&1&&be(S,F[0].grid_size),(!Z||x[0]&1)&&re!==(re=F[0].grid_size+"")&&_e(U,re)},i(F){Z||(C(r.$$.fragment,F),C(f.$$.fragment,F),Z=!0)},o(F){O(r.$$.fragment,F),O(f.$$.fragment,F),Z=!1},d(F){F&&I(t),fe(r),fe(f),N=!1,pe(m)}}}function dt(e){let t,l,i,r,a,s,f,n,o,p,b,u,g,c,v,M,Y,$,V,S,te;function oe(m){e[27](m)}let re={text:"Gray"};e[0].gray_scale_input!==void 0&&(re.checked=e[0].gray_scale_input),a=new de({props:re}),ce.push(()=>ke(a,"checked",oe));function U(m){e[28](m)}let Z={text:"Nearest Gray Pixel"};e[0].gray_scale_nearest_pixel!==void 0&&(Z.checked=e[0].gray_scale_nearest_pixel),b=new de({props:Z}),ce.push(()=>ke(b,"checked",U)),v=new de({props:{text:"No Dithering",checked:e[0].dithering==""}}),v.$on("click",e[29]),Y=new de({props:{text:"Patterned Dithering",checked:e[0].dithering=="pattern"}}),Y.$on("click",e[30]);let N=e[0].dithering=="pattern"&&ht(e);return S=new de({props:{text:"Floyd Steinberg",checked:e[0].dithering=="fs"}}),S.$on("click",e[32]),{c(){t=P("div"),l=P("div"),i=P("span"),i.textContent="Input Image:",r=y(),ue(a.$$.fragment),f=y(),n=P("div"),o=P("span"),o.textContent="Nearest Pixel:",p=y(),ue(b.$$.fragment),g=y(),c=P("div"),ue(v.$$.fragment),M=y(),ue(Y.$$.fragment),$=y(),N&&N.c(),V=y(),ue(S.$$.fragment),d(i,"class","p-2"),d(l,"class","flex"),d(o,"class","p-2"),d(n,"class","flex"),d(c,"class","flex"),d(t,"class","bg-white text-black p-2")},m(m,q){E(m,t,q),h(t,l),h(l,i),h(l,r),ae(a,l,null),h(t,f),h(t,n),h(n,o),h(n,p),ae(b,n,null),h(t,g),h(t,c),ae(v,c,null),h(c,M),ae(Y,c,null),h(c,$),N&&N.m(c,null),h(c,V),ae(S,c,null),te=!0},p(m,q){const se={};!s&&q[0]&1&&(s=!0,se.checked=m[0].gray_scale_input,me(()=>s=!1)),a.$set(se);const ge={};!u&&q[0]&1&&(u=!0,ge.checked=m[0].gray_scale_nearest_pixel,me(()=>u=!1)),b.$set(ge);const J={};q[0]&1&&(J.checked=m[0].dithering==""),v.$set(J);const F={};q[0]&1&&(F.checked=m[0].dithering=="pattern"),Y.$set(F),m[0].dithering=="pattern"?N?N.p(m,q):(N=ht(m),N.c(),N.m(c,V)):N&&(N.d(1),N=null);const x={};q[0]&1&&(x.checked=m[0].dithering=="fs"),S.$set(x)},i(m){te||(C(a.$$.fragment,m),C(b.$$.fragment,m),C(v.$$.fragment,m),C(Y.$$.fragment,m),C(S.$$.fragment,m),te=!0)},o(m){O(a.$$.fragment,m),O(b.$$.fragment,m),O(v.$$.fragment,m),O(Y.$$.fragment,m),O(S.$$.fragment,m),te=!1},d(m){m&&I(t),fe(a),fe(b),fe(v),fe(Y),N&&N.d(),fe(S)}}}function ht(e){let t,l,i,r=e[8],a=[];for(let s=0;s<r.length;s+=1)a[s]=_t(ct(e,r,s));return{c(){t=P("span"),t.textContent="Matrix:",l=y();for(let s=0;s<a.length;s+=1)a[s].c();i=Xe(),d(t,"class","h-10 p-2")},m(s,f){E(s,t,f),E(s,l,f);for(let n=0;n<a.length;n+=1)a[n].m(s,f);E(s,i,f)},p(s,f){if(f[0]&257){r=s[8];let n;for(n=0;n<r.length;n+=1){const o=ct(s,r,n);a[n]?a[n].p(o,f):(a[n]=_t(o),a[n].c(),a[n].m(i.parentNode,i))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},d(s){s&&I(t),s&&I(l),Be(a,s),s&&I(i)}}}function _t(e){let t,l=e[56].length+"",i,r,a,s;function f(){return e[31](e[56])}return{c(){t=P("button"),i=H(l),r=y(),d(t,"class","h-10 p-2 rounded-lg border-solid border-2"),A(t,"bg-green-600",e[0].matrix==e[56])},m(n,o){E(n,t,o),h(t,i),h(t,r),a||(s=K(t,"click",f),a=!0)},p(n,o){e=n,o[0]&257&&A(t,"bg-green-600",e[0].matrix==e[56])},d(n){n&&I(t),a=!1,s()}}}function pt(e){let t,l,i,r,a,s=e[7],f=[];for(let u=0;u<s.length;u+=1)f[u]=bt(ft(e,s,u));const n=u=>O(f[u],1,1,()=>{f[u]=null});let o=e[0].individual_pallette_colors,p=[];for(let u=0;u<o.length;u+=1)p[u]=mt(at(e,o,u));const b=u=>O(p[u],1,1,()=>{p[u]=null});return{c(){t=P("div"),l=P("div");for(let u=0;u<f.length;u+=1)f[u].c();i=y(),r=P("div");for(let u=0;u<p.length;u+=1)p[u].c();d(l,"class","flex"),d(t,"class","bg-white text-black p-2"),d(r,"class","flex")},m(u,g){E(u,t,g),h(t,l);for(let c=0;c<f.length;c+=1)f[c].m(l,null);E(u,i,g),E(u,r,g);for(let c=0;c<p.length;c+=1)p[c].m(r,null);a=!0},p(u,g){if(g[0]&4225){s=u[7];let c;for(c=0;c<s.length;c+=1){const v=ft(u,s,c);f[c]?(f[c].p(v,g),C(f[c],1)):(f[c]=bt(v),f[c].c(),C(f[c],1),f[c].m(l,null))}for(we(),c=s.length;c<f.length;c+=1)n(c);ve()}if(g[0]&1){o=u[0].individual_pallette_colors;let c;for(c=0;c<o.length;c+=1){const v=at(u,o,c);p[c]?(p[c].p(v,g),C(p[c],1)):(p[c]=mt(v),p[c].c(),C(p[c],1),p[c].m(r,null))}for(we(),c=o.length;c<p.length;c+=1)b(c);ve()}},i(u){if(!a){for(let g=0;g<s.length;g+=1)C(f[g]);for(let g=0;g<o.length;g+=1)C(p[g]);a=!0}},o(u){f=f.filter(Boolean);for(let g=0;g<f.length;g+=1)O(f[g]);p=p.filter(Boolean);for(let g=0;g<p.length;g+=1)O(p[g]);a=!1},d(u){u&&I(t),Be(f,u),u&&I(i),u&&I(r),Be(p,u)}}}function bt(e){let t,l;function i(...r){return e[33](e[53],...r)}return t=new Wt({props:{selected:e[0].pallette,name:e[53].name,color:e[53].colors}}),t.$on("click",i),{c(){ue(t.$$.fragment)},m(r,a){ae(t,r,a),l=!0},p(r,a){e=r;const s={};a[0]&1&&(s.selected=e[0].pallette),t.$set(s)},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){O(t.$$.fragment,r),l=!1},d(r){fe(t,r)}}}function mt(e){let t,l,i;function r(s){e[34](s,e[50])}let a={text:e[50].color,bgcolor:e[50].on?e[50].color:"white"};return e[50].on!==void 0&&(a.checked=e[50].on),t=new de({props:a}),ce.push(()=>ke(t,"checked",r)),{c(){ue(t.$$.fragment)},m(s,f){ae(t,s,f),i=!0},p(s,f){e=s;const n={};f[0]&1&&(n.text=e[50].color),f[0]&1&&(n.bgcolor=e[50].on?e[50].color:"white"),!l&&f[0]&1&&(l=!0,n.checked=e[50].on,me(()=>l=!1)),t.$set(n)},i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){O(t.$$.fragment,s),i=!1},d(s){fe(t,s)}}}function kt(e){let t,l,i,r,a,s,f,n,o,p,b,u=e[0].dithering=="pattern"&&wt(e),g=e[0].dithering=="fs"&&zt(e);return{c(){t=P("code"),l=H(e[6]),i=y(),r=P("input"),s=y(),u&&u.c(),f=y(),g&&g.c(),n=Xe(),d(r,"type","range"),d(r,"min","-1"),d(r,"max",a=e[1].total_pixels),d(r,"step","1")},m(c,v){E(c,t,v),h(t,l),E(c,i,v),E(c,r,v),be(r,e[0].debug_range),E(c,s,v),u&&u.m(c,v),E(c,f,v),g&&g.m(c,v),E(c,n,v),o=!0,p||(b=[K(r,"change",e[35]),K(r,"input",e[35])],p=!0)},p(c,v){(!o||v[0]&64)&&_e(l,c[6]),(!o||v[0]&2&&a!==(a=c[1].total_pixels))&&d(r,"max",a),v[0]&1&&be(r,c[0].debug_range),c[0].dithering=="pattern"?u?u.p(c,v):(u=wt(c),u.c(),u.m(f.parentNode,f)):u&&(u.d(1),u=null),c[0].dithering=="fs"?g?(g.p(c,v),v[0]&1&&C(g,1)):(g=zt(c),g.c(),C(g,1),g.m(n.parentNode,n)):g&&(we(),O(g,1,1,()=>{g=null}),ve())},i(c){o||(C(g),o=!0)},o(c){O(g),o=!1},d(c){c&&I(t),c&&I(i),c&&I(r),c&&I(s),u&&u.d(c),c&&I(f),g&&g.d(c),c&&I(n),p=!1,pe(b)}}}function wt(e){let t,l=e[0].matrix,i=[];for(let r=0;r<l.length;r+=1)i[r]=Pt(st(e,l,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=Xe()},m(r,a){for(let s=0;s<i.length;s+=1)i[s].m(r,a);E(r,t,a)},p(r,a){if(a[0]&1){l=r[0].matrix;let s;for(s=0;s<l.length;s+=1){const f=st(r,l,s);i[s]?i[s].p(f,a):(i[s]=Pt(f),i[s].c(),i[s].m(t.parentNode,t))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},d(r){Be(i,r),r&&I(t)}}}function vt(e){let t,l,i=e[47]+"",r,a,s;function f(){e[36].call(t,e[48],e[49])}return{c(){t=P("input"),l=y(),r=H(i),d(t,"type","range"),d(t,"step","0.01"),d(t,"max","1.0"),d(t,"min","0.0")},m(n,o){E(n,t,o),be(t,e[47]),E(n,l,o),E(n,r,o),a||(s=[K(t,"change",f),K(t,"input",f)],a=!0)},p(n,o){e=n,o[0]&1&&be(t,e[47]),o[0]&1&&i!==(i=e[47]+"")&&_e(r,i)},d(n){n&&I(t),n&&I(l),n&&I(r),a=!1,pe(s)}}}function Pt(e){let t,l,i=e[44],r=[];for(let a=0;a<i.length;a+=1)r[a]=vt(ot(e,i,a));return{c(){t=P("div");for(let a=0;a<r.length;a+=1)r[a].c();l=y(),d(t,"class","flex")},m(a,s){E(a,t,s);for(let f=0;f<r.length;f+=1)r[f].m(t,null);h(t,l)},p(a,s){if(s[0]&1){i=a[44];let f;for(f=0;f<i.length;f+=1){const n=ot(a,i,f);r[f]?r[f].p(n,s):(r[f]=vt(n),r[f].c(),r[f].m(t,l))}for(;f<r.length;f+=1)r[f].d(1);r.length=i.length}},d(a){a&&I(t),Be(r,a)}}}function zt(e){let t,l,i;function r(s){e[37](s)}let a={text:"Cap"};return e[0].cap!==void 0&&(a.checked=e[0].cap),t=new de({props:a}),ce.push(()=>ke(t,"checked",r)),{c(){ue(t.$$.fragment)},m(s,f){ae(t,s,f),i=!0},p(s,f){const n={};!l&&f[0]&1&&(l=!0,n.checked=s[0].cap,me(()=>l=!1)),t.$set(n)},i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){O(t.$$.fragment,s),i=!1},d(s){fe(t,s)}}}function Dt(e){let t;return{c(){t=P("div"),t.textContent="Drop to load image",d(t,"class","rounded-lg border-solid border-2 p-8 text-white text-center m-auto w-fit")},m(l,i){E(l,t,i)},d(l){l&&I(t)}}}function yt(e){let t,l=e[1].resizedwidth+"",i,r,a=e[1].resizedheight+"",s,f,n=e[1].resizedwidth*e[1].resizedheight+"",o,p,b=e[1].resizedheight*e[1].resizedwidth/9+"",u;return{c(){t=H("Image Size: "),i=H(l),r=H(" x "),s=H(a),f=H(" = "),o=H(n),p=H(`\r
      | Total Rubiks: `),u=H(b)},m(g,c){E(g,t,c),E(g,i,c),E(g,r,c),E(g,s,c),E(g,f,c),E(g,o,c),E(g,p,c),E(g,u,c)},p(g,c){c[0]&2&&l!==(l=g[1].resizedwidth+"")&&_e(i,l),c[0]&2&&a!==(a=g[1].resizedheight+"")&&_e(s,a),c[0]&2&&n!==(n=g[1].resizedwidth*g[1].resizedheight+"")&&_e(o,n),c[0]&2&&b!==(b=g[1].resizedheight*g[1].resizedwidth/9+"")&&_e(u,b)},d(g){g&&I(t),g&&I(i),g&&I(r),g&&I(s),g&&I(f),g&&I(o),g&&I(p),g&&I(u)}}}function tl(e){let t,l,i,r,a,s,f,n,o,p,b,u,g,c,v,M,Y,$,V,S,te,oe,re,U,Z,N,m,q,se,ge,J,F,x,Pe,ee,ye,Re,Fe,Oe,W,Ie,Te;function je(k){e[19](k)}let Ae={text:"debug"};e[1].show_debug!==void 0&&(Ae.checked=e[1].show_debug),v=new de({props:Ae}),ce.push(()=>ke(v,"checked",je));let Q=e[1].current=="img"&&ut(e),X=e[1].current=="rubiks"&&gt(e),_=e[1].current=="processing"&&dt(e),R=e[1].current=="pallette"&&pt(e),D=e[1].show_debug&&kt(e),w=!e[2]&&e[1].hovering&&Dt(),L=e[1].resizedheight&&e[1].resizedwidth&&yt(e);return{c(){t=P("main"),l=P("div"),i=P("div"),r=P("div"),a=P("button"),a.textContent="Output Image",s=y(),f=P("button"),f.textContent="Pallette",n=y(),o=P("button"),o.textContent="Processing",p=y(),b=P("button"),b.textContent="Rubiks",u=y(),g=P("div"),c=y(),ue(v.$$.fragment),Y=y(),Q&&Q.c(),$=y(),X&&X.c(),V=y(),_&&_.c(),S=y(),R&&R.c(),te=y(),D&&D.c(),oe=y(),re=P("div"),U=P("div"),Z=P("div"),N=P("div"),m=P("canvas"),ge=y(),J=P("canvas"),Pe=y(),ee=P("canvas"),Fe=y(),w&&w.c(),Oe=y(),L&&L.c(),d(a,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),A(a,"bg-gray-400",e[1].current=="img"),d(f,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),A(f,"bg-gray-400",e[1].current=="pallette"),d(o,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),A(o,"bg-gray-400",e[1].current=="processing"),d(b,"class","h-10 p-2 rounded-lg border-solid border-2 text-center"),A(b,"bg-gray-400",e[1].current=="rubiks"),d(g,"class","spacer svelte-oug5tb"),d(r,"class","flex"),d(i,"class","bg-white text-black p-2"),d(m,"class","small svelte-oug5tb"),d(m,"id","canvas"),d(m,"width",q=e[1].canvaswidth),d(m,"height",se=e[1].canvasheight),A(m,"shown",e[2]),A(m,"pixelated",e[0].pixelated),d(J,"id","output_canvas"),d(J,"width",F=e[1].resizedwidth),d(J,"height",x=e[1].resizedheight),d(J,"class","svelte-oug5tb"),A(J,"small",e[0].show_rubiks),A(J,"shown",e[2]),A(J,"pixelated",e[0].pixelated),d(ee,"id","rubiks_canvas"),d(ee,"width",ye=e[1].resizedwidth*e[0].rubiks_scale),d(ee,"height",Re=e[1].resizedheight*e[0].rubiks_scale),d(ee,"class","svelte-oug5tb"),A(ee,"shown",e[2]&&e[0].show_rubiks),A(ee,"pixelated",e[0].pixelated),d(N,"class","flex-col"),d(Z,"class","flex"),d(U,"ondragover","return false"),d(U,"id","drop_zone"),d(U,"class","bg-black h-full"),d(re,"class","bg-green-800 grow justify-center"),d(l,"class","flex flex-col bg-red-800 h-screen")},m(k,B){E(k,t,B),h(t,l),h(l,i),h(i,r),h(r,a),h(r,s),h(r,f),h(r,n),h(r,o),h(r,p),h(r,b),h(r,u),h(r,g),h(r,c),ae(v,r,null),h(l,Y),Q&&Q.m(l,null),h(l,$),X&&X.m(l,null),h(l,V),_&&_.m(l,null),h(l,S),R&&R.m(l,null),h(l,te),D&&D.m(l,null),h(l,oe),h(l,re),h(re,U),h(U,Z),h(Z,N),h(N,m),e[38](m),h(N,ge),h(N,J),e[39](J),h(N,Pe),h(N,ee),e[40](ee),h(U,Fe),w&&w.m(U,null),h(l,Oe),L&&L.m(l,null),W=!0,Ie||(Te=[K(a,"click",e[15]),K(f,"click",e[16]),K(o,"click",e[17]),K(b,"click",e[18]),K(U,"drop",e[9]),K(U,"dragenter",e[10]),K(U,"dragleave",e[11])],Ie=!0)},p(k,B){(!W||B[0]&2)&&A(a,"bg-gray-400",k[1].current=="img"),(!W||B[0]&2)&&A(f,"bg-gray-400",k[1].current=="pallette"),(!W||B[0]&2)&&A(o,"bg-gray-400",k[1].current=="processing"),(!W||B[0]&2)&&A(b,"bg-gray-400",k[1].current=="rubiks");const G={};!M&&B[0]&2&&(M=!0,G.checked=k[1].show_debug,me(()=>M=!1)),v.$set(G),k[1].current=="img"?Q?(Q.p(k,B),B[0]&2&&C(Q,1)):(Q=ut(k),Q.c(),C(Q,1),Q.m(l,$)):Q&&(we(),O(Q,1,1,()=>{Q=null}),ve()),k[1].current=="rubiks"?X?(X.p(k,B),B[0]&2&&C(X,1)):(X=gt(k),X.c(),C(X,1),X.m(l,V)):X&&(we(),O(X,1,1,()=>{X=null}),ve()),k[1].current=="processing"?_?(_.p(k,B),B[0]&2&&C(_,1)):(_=dt(k),_.c(),C(_,1),_.m(l,S)):_&&(we(),O(_,1,1,()=>{_=null}),ve()),k[1].current=="pallette"?R?(R.p(k,B),B[0]&2&&C(R,1)):(R=pt(k),R.c(),C(R,1),R.m(l,te)):R&&(we(),O(R,1,1,()=>{R=null}),ve()),k[1].show_debug?D?(D.p(k,B),B[0]&2&&C(D,1)):(D=kt(k),D.c(),C(D,1),D.m(l,oe)):D&&(we(),O(D,1,1,()=>{D=null}),ve()),(!W||B[0]&2&&q!==(q=k[1].canvaswidth))&&d(m,"width",q),(!W||B[0]&2&&se!==(se=k[1].canvasheight))&&d(m,"height",se),(!W||B[0]&4)&&A(m,"shown",k[2]),(!W||B[0]&1)&&A(m,"pixelated",k[0].pixelated),(!W||B[0]&2&&F!==(F=k[1].resizedwidth))&&d(J,"width",F),(!W||B[0]&2&&x!==(x=k[1].resizedheight))&&d(J,"height",x),(!W||B[0]&1)&&A(J,"small",k[0].show_rubiks),(!W||B[0]&4)&&A(J,"shown",k[2]),(!W||B[0]&1)&&A(J,"pixelated",k[0].pixelated),(!W||B[0]&3&&ye!==(ye=k[1].resizedwidth*k[0].rubiks_scale))&&d(ee,"width",ye),(!W||B[0]&3&&Re!==(Re=k[1].resizedheight*k[0].rubiks_scale))&&d(ee,"height",Re),(!W||B[0]&5)&&A(ee,"shown",k[2]&&k[0].show_rubiks),(!W||B[0]&1)&&A(ee,"pixelated",k[0].pixelated),!k[2]&&k[1].hovering?w||(w=Dt(),w.c(),w.m(U,null)):w&&(w.d(1),w=null),k[1].resizedheight&&k[1].resizedwidth?L?L.p(k,B):(L=yt(k),L.c(),L.m(l,null)):L&&(L.d(1),L=null)},i(k){W||(C(v.$$.fragment,k),C(Q),C(X),C(_),C(R),C(D),W=!0)},o(k){O(v.$$.fragment,k),O(Q),O(X),O(_),O(R),O(D),W=!1},d(k){k&&I(t),fe(v),Q&&Q.d(),X&&X.d(),_&&_.d(),R&&R.d(),D&&D.d(),e[38](null),e[39](null),e[40](null),w&&w.d(),L&&L.d(),Ie=!1,pe(Te)}}}function ll(e,t,l){let i,r,a=!1,s=[{name:"rbk",colors:"#013082,#BB2328,#01B351,#FE8F25,#F5FF42,#ECF3F6"},{name:"rbkng",colors:"#013082,#BB2328,#FE8F25,#F5FF42,#ECF3F6"},{name:"b&w",colors:"#000,#fff"},{name:"gray",colors:"#000,#666,#fff"},{name:"grayscale",colors:"#000,#111,#222,#333,#444,#555,#666,#777,#888,#999,#aaa,#bbb,#ccc,#ddd,#eee,#fff"},{name:"rgb",colors:"#000,#f00,#0f0,#00f,#fff"},{name:"cmyk",colors:"#000,#0ff,#f0f,#ff0,#fff"}],f=[[[0/4,2/4],[3/4,1/4]],[[0/16,8/16,2/16,10/16],[12/16,4/16,14/16,6/16],[3/16,11/16,1/16,9/16],[15/16,7/16,13/16,5/16]]],n={loadedfile:"",cache:!0,cap:!1,pixelated:!0,width:0,height:0,dithering:"pattern",max_width:600,show_rubiks:!0,show_grid:!1,rubiks_scale:8,gray_scale_input:!1,gray_scale_nearest_pixel:!1,grid_size:2,pallette:s[0].colors,individual_pallette_colors:[],debug_range:-1,matrix:f[0]},o={current:"",hovering:!1,show_debug:!1,resizedwidth:0,resizedheight:0,total_pixels:0,canvaswidth:100,canvasheight:100},p,b,u,g=function(_){_.preventDefault();let R=_;if(R.dataTransfer.items)if(R.dataTransfer.items.length==1){let D=R.dataTransfer.items[0];if(D.kind==="file"){const w=D.getAsFile();Y(w)}else console.log("kind is not file, but: "+D.kind)}else l(6,r="Error: can only load one file");l(1,o.hovering=!1,o)},c=function(){console.log("drag enter"),l(1,o.hovering=!0,o)},v=function(){l(1,o.hovering=!1,o)},M,Y=function(_){l(0,n.loadedfile=_.name,n);let R=p.getContext("2d");M=new Image,M.onload=async function(){l(1,o.canvasheight=M.height,o),l(1,o.canvaswidth=M.width,o),l(0,n.width=Math.min(99,o.canvaswidth),n),l(0,n.max_width=Math.min(o.canvaswidth,999),n),l(2,a=!0),await nt(),R.drawImage(M,0,0,M.width,M.height)},M.src=URL.createObjectURL(_)},$=function(_){l(0,n.pallette=_,n),l(0,n.individual_pallette_colors=[],n),_.split(",").forEach(R=>{n.individual_pallette_colors.push({color:R,on:!0})})},V=function(_){o.current==_?l(1,o.current="",o):l(1,o.current=_,o)},S={};Mt(async()=>{if(!n.width){console.log("no width, ending here");return}if(!a){console.log("no image loaded, ending here");return}if(!M){console.log("originalImage is empty","ending here");return}let _=o.canvasheight/o.canvaswidth*n.width;if(l(0,n.height=_,n),l(1,o.resizedwidth=parseInt(n.width/3)*3,o),l(1,o.resizedheight=parseInt(_/3)*3,o),l(1,o.total_pixels=o.resizedheight*o.resizedwidth,o),await nt(),_<1){console.log("height is less than 1","ending here");return}let R=z.hashCode(JSON.stringify(i));if(n.cache&&S[R]){console.log("found",i.loadedfile,R,"from cache");let D=b.getContext("2d"),w=S[R],L=new ImageData(w.data,w.width,w.height);D.putImageData(L,0,0)}else{console.log("generating...",JSON.stringify(i),R);let D=b.getContext("2d");D.drawImage(M,0,0,o.resizedwidth,o.resizedheight);let w=D.getImageData(0,0,o.resizedwidth,o.resizedheight);if(n.gray_scale_input)for(let G=0,le=0;G<w.height;G++)for(let j=0;j<w.width;j++,le+=4){let Ce=z.getPixelDataRGB(w,j,G),he=Math.round((Ce.r+Ce.g+Ce.b)/3);z.setPixelDataRaw(w,le,he),z.setPixelDataRaw(w,le+1,he),z.setPixelDataRaw(w,le+2,he)}let L=n.pallette;n.individual_pallette_colors.length&&(L=n.individual_pallette_colors.filter(G=>G.on).map(G=>G.color).join(","));let k=L.split(",").length,B=L.split(",");B.forEach((G,le)=>{B[le]=z.hexToRgb(G)});for(let G=0,le=0;G<w.height;G++)for(let j=0;j<w.width;j++,le+=4){let Ce=z.getPixelDataRGB(w,j,G),he=z.nearestPixel2(Ce,B,n.gray_scale_nearest_pixel);if(n.dithering=="")z.setPixelDataRaw(w,le,he.r),z.setPixelDataRaw(w,le+1,he.g),z.setPixelDataRaw(w,le+2,he.b);else if(n.dithering=="fs"){z.setPixelDataRaw(w,le,he.r),z.setPixelDataRaw(w,le+1,he.g),z.setPixelDataRaw(w,le+2,he.b);let T=z.pixelDiff(Ce,he);if(j<w.width-1){let ne=z.getPixelDataRGB(w,j+1,G);n.cap?z.setPixelDataRGB(w,j+1,G,{r:z.clamp(0,255,ne.r+T.r*7/16),g:z.clamp(0,255,ne.g+T.g*7/16),b:z.clamp(0,255,ne.b+T.b*7/16)}):z.setPixelDataRGB(w,j+1,G,{r:ne.r+T.r*7/16,g:ne.g+T.g*7/16,b:ne.b+T.b*7/16})}if(G<w.height-1){if(j>0){let ie=z.getPixelDataRGB(w,j-1,G+1);n.cap?z.setPixelDataRGB(w,j-1,G+1,{r:z.clamp(0,255,ie.r+T.r*3/16),g:z.clamp(0,255,ie.g+T.g*3/16),b:z.clamp(0,255,ie.b+T.b*3/16)}):z.setPixelDataRGB(w,j-1,G+1,{r:ie.r+T.r*3/16,g:ie.g+T.g*3/16,b:ie.b+T.b*3/16})}let ne=z.getPixelDataRGB(w,j,G+1);if(n.cap?z.setPixelDataRGB(w,j,G+1,{r:z.clamp(0,255,ne.r+T.r*5/16),g:z.clamp(0,255,ne.g+T.g*5/16),b:z.clamp(0,255,ne.b+T.b*5/16)}):z.setPixelDataRGB(w,j,G+1,{r:ne.r+T.r*5/16,g:ne.g+T.g*5/16,b:ne.b+T.b*5/16}),j<w.width-1){let ie=z.getPixelDataRGB(w,j+1,G+1);n.cap?z.setPixelDataRGB(w,j+1,G+1,{r:z.clamp(0,255,ie.r+T.r*1/16),g:z.clamp(0,255,ie.g+T.g*1/16),b:z.clamp(0,255,ie.b+T.b*1/16)}):z.setPixelDataRGB(w,j+1,G+1,{r:ie.r+T.r*1/16,g:ie.g+T.g*1/16,b:ie.b+T.b*1/16})}}}else if(n.dithering=="pattern"){let T=z.getPixelDataRGB(w,j,G),ne=255/k*(n.matrix[j%n.matrix[0].length][G%n.matrix.length]-.5),ie=z.nearestPixel2({r:T.r+ne,g:T.g+ne,b:T.b+ne},B,n.gray_scale_nearest_pixel);z.setPixelDataRaw(w,le,ie.r),z.setPixelDataRaw(w,le+1,ie.g),z.setPixelDataRaw(w,le+2,ie.b)}}if(D.putImageData(w,0,0),n.cache){let G=new ImageData(new Uint8ClampedArray(w.data),w.width,w.height);console.log("adding",R,"to cache"),console.log(G),S[R]=G}}if(n.show_rubiks){let D=u.getContext("2d"),L=b.getContext("2d").getImageData(0,0,o.resizedwidth,o.resizedheight);if(D.imageSmoothingEnabled=!1,D.drawImage(b,0,0,o.resizedwidth*n.rubiks_scale,o.resizedheight*n.rubiks_scale),n.show_grid&&n.grid_size>0){D.lineWidth=n.grid_size,D.strokeStyle="#000000";for(let k=0;k<L.height;k++)D.beginPath(),D.moveTo(0,k*n.rubiks_scale),D.lineTo(L.width*n.rubiks_scale,k*n.rubiks_scale),D.stroke();for(let k=0;k<L.width;k++)D.beginPath(),D.moveTo(k*n.rubiks_scale,0),D.lineTo(k*n.rubiks_scale,L.height*n.rubiks_scale),D.stroke()}}});const te=()=>{V("img")},oe=()=>{V("pallette")},re=()=>{V("processing")},U=()=>{V("rubiks")};function Z(_){e.$$.not_equal(o.show_debug,_)&&(o.show_debug=_,l(1,o))}function N(){n.width=Ge(this.value),l(0,n)}function m(_){e.$$.not_equal(n.pixelated,_)&&(n.pixelated=_,l(0,n))}function q(_){e.$$.not_equal(n.cache,_)&&(n.cache=_,l(0,n))}function se(_){e.$$.not_equal(n.show_rubiks,_)&&(n.show_rubiks=_,l(0,n))}function ge(_){e.$$.not_equal(n.show_grid,_)&&(n.show_grid=_,l(0,n))}function J(){n.rubiks_scale=Ge(this.value),l(0,n)}function F(){n.grid_size=Ge(this.value),l(0,n)}function x(_){e.$$.not_equal(n.gray_scale_input,_)&&(n.gray_scale_input=_,l(0,n))}function Pe(_){e.$$.not_equal(n.gray_scale_nearest_pixel,_)&&(n.gray_scale_nearest_pixel=_,l(0,n))}const ee=()=>l(0,n.dithering="",n),ye=()=>l(0,n.dithering="pattern",n),Re=_=>{l(0,n.matrix=_,n)},Fe=()=>l(0,n.dithering="fs",n),Oe=(_,R,D)=>{$(_.colors)};function W(_,R){e.$$.not_equal(R.on,_)&&(R.on=_,l(0,n))}function Ie(){n.debug_range=Ge(this.value),l(0,n)}function Te(_,R){_[R]=Ge(this.value),l(0,n)}function je(_){e.$$.not_equal(n.cap,_)&&(n.cap=_,l(0,n))}function Ae(_){ce[_?"unshift":"push"](()=>{p=_,l(3,p)})}function Q(_){ce[_?"unshift":"push"](()=>{b=_,l(4,b)})}function X(_){ce[_?"unshift":"push"](()=>{u=_,l(5,u)})}return e.$$.update=()=>{e.$$.dirty[0]&1&&l(14,i={loadedfile:n.loadedfile,width:n.width,height:n.height,dithering:n.dithering,gray_scale_input:n.gray_scale_input,gray_scale_nearest_pixel:n.gray_scale_nearest_pixel,pallette:n.pallette,individual_pallette_colors:n.individual_pallette_colors,matrix:n.matrix}),e.$$.dirty[0]&16387&&l(6,r=("UI = "+JSON.stringify(o)+`
params: `+JSON.stringify(i)+`
CONFIG:`+JSON.stringify(n)).replaceAll(",",", "))},[n,o,a,p,b,u,r,s,f,g,c,v,$,V,i,te,oe,re,U,Z,N,m,q,se,ge,J,F,x,Pe,ee,ye,Re,Fe,Oe,W,Ie,Te,je,Ae,Q,X]}class nl extends xe{constructor(t){super(),Ze(this,t,ll,tl,Qe,{},null,[-1,-1])}}new nl({target:document.getElementById("app")});
